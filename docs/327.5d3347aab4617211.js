(self.webpackChunkwonder_writer=self.webpackChunkwonder_writer||[]).push([[327],{4327:(He,z,y)=>{"use strict";y.r(z),y.d(z,{ProjectModule:()=>Tn});var v=y(9808),B=y(9426),P=y(9270),O=y(7566),w=y(8397),m=y(8389),e=y(1223),c=y(3557),n=y(8718),r=y(1407),f=y(7458),l=y(2076),s=y(8746),a=y(9841);class o{static getTypeLabel(L,t=!1){switch(L){case"manuscript":return"\uc6d0\uace0";case"character":return"\uc778\ubb3c";case"place":return"\uc7a5\uc18c";case"episode":return"\uc0ac\uac74";default:if(t&&"directory"===L)return"\ud3f4\ub354";throw new Error(`Invalid hierarchy type: ${L}`)}}static getCreateSuccessMessage(L){switch(L){case"manuscript":return"\uc6d0\uace0\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"character":return"\uc778\ubb3c\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"place":return"\uc7a5\uc18c\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"episode":return"\uc0ac\uac74\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4";default:throw new Error(`Invalid hierarchy type: ${L}`)}}static getCreateFailureMessage(L){switch(L){case"manuscript":return"\uc6d0\uace0\ub97c \uc0dd\uc131\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"character":return"\uc778\ubb3c\uc744 \uc0dd\uc131\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"place":return"\uc7a5\uc18c\ub97c \uc0dd\uc131\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"episode":return"\uc0ac\uac74\uc744 \uc0dd\uc131\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";default:throw new Error(`Invalid hierarchy type: ${L}`)}}static getDeleteConfirmMessage(L){switch(L){case"manuscript":return"\uc6d0\uace0\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";case"character":return"\uc778\ubb3c\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";case"place":return"\uc7a5\uc18c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";case"episode":return"\uc0ac\uac74\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?";default:throw new Error(`Invalid hierarchy type: ${L}`)}}static getDeleteSuccessMessage(L){switch(L){case"manuscript":return"\uc6d0\uace0\uac00 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"character":return"\uc778\ubb3c\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"place":return"\uc7a5\uc18c\uac00 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"episode":return"\uc0ac\uac74\uc774 \uc0ad\uc81c \ub418\uc5c8\uc2b5\ub2c8\ub2e4";default:throw new Error(`Invalid hierarchy type: ${L}`)}}static getDeleteFailureMessage(L){switch(L){case"manuscript":return"\uc6d0\uace0\ub97c \uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"character":return"\uc778\ubb3c\uc744 \uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"place":return"\uc7a5\uc18c\ub97c \uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"episode":return"\uc0ac\uac74\uc744 \uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";default:throw new Error(`Invalid hierarchy type: ${L}`)}}static getEditSuccessMessage(L){switch(L){case"directory":return"\ud3f4\ub354\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"manuscript":return"\uc6d0\uace0\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"character":return"\uc778\ubb3c\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"place":return"\uc7a5\uc18c\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4";case"episode":return"\uc0ac\uac74\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}}static getEditFailureMessage(L){switch(L){case"directory":return"\ud3f4\ub354\ub97c \uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"manuscript":return"\uc6d0\uace0\ub97c \uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"character":return"\uc778\ubb3c\uc744 \uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"place":return"\uc7a5\uc18c\ub97c \uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4";case"episode":return"\uc0ac\uac74\uc744 \uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4"}}static findHierarchyById(L,t){let u;return L.some(S=>(u=S.id===t?S:this.findHierarchyById(S.children||[],t),u)),u}static findAndUpdateDropTargetHierarchy(L,t,u){const S=o.findHierarchyById(L,u.parentId);if(S){const q=Object.assign(Object.assign({},S),{children:[...S.children||[]]}),K=Object.assign(Object.assign({},t),{parentId:q.id});q.id===u.parentId&&(q.children=q.children.filter(oe=>oe.id!==t.id));const W=q.children.findIndex(oe=>oe.id===u.nextId);return-1===W?q.children.push(K):q.children.splice(W,0,K),q.children.forEach((oe,he)=>oe.order=he),q}}static findAndUpdateDropOriginHierarchy(L,t,u){if(t.parentId!==u.parentId){const S=o.findHierarchyById(L,t.parentId);if(S){const q=Object.assign(Object.assign({},S),{children:[...(S.children||[]).filter(K=>K.id!==t.id)]});return q.children.forEach((K,W)=>K.order=W),q}}}}var h=y(6267),i=y(1427),d=y(2164),T=y(7410),C=y(9848),x=y(4463),M=y(2436),b=y(3112),g=y(7031),_=y(3848);let A=(()=>{class p{constructor(t,u,S,q,K,W){this.modalRef=t,this.data=u,this.toastService=S,this.loadingCoverService=q,this.hierarchyStoreService=K,this.subscriptionService=W}ngOnInit(){}onSubmit(){this.singleTextForm.valid?this._createDirectory():this.toastService.open({message:"\ud3f4\ub354 \uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",type:O.p.error})}_createDirectory(){const u=this.hierarchyStoreService.addDirectoryHierarchy(this.singleTextForm.value,this.data),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:q=>{this.toastService.open({message:"\ud3f4\ub354\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}),this.close(q)},error:q=>{console.error(q),this.toastService.open({message:"\ud3f4\ub354\ub97c \uc0dd\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_createDirectory",S),this.loadingCoverService.showLoading=!0}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv),e.Y36(C.xJ),e.Y36(O.k),e.Y36(c.x),e.Y36(d.F),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-create-directory-modal"]],viewQuery:function(t,u){if(1&t&&e.Gf(T.l,5),2&t){let S;e.iGM(S=e.CRH())&&(u.singleTextForm=S.first)}},features:[e._Bn([P.F])],decls:8,vars:0,consts:[[3,"close"],["label","\ud3f4\ub354 \uba85",3,"formSubmit"],["appFlatButton","",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2," \ud3f4\ub354 \uc0dd\uc131 "),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"app-single-text-form",1),e.NdJ("formSubmit",function(){return u.onSubmit()}),e.qZA(),e.qZA(),e.TgZ(5,"app-modal-actions"),e.TgZ(6,"button",2),e.NdJ("click",function(){return u.onSubmit()}),e._uU(7," \uc0dd\uc131 "),e.qZA(),e.qZA(),e.qZA())},directives:[x.O,M.R,b.E,T.l,g.I,_.z],styles:[""]}),p})();var k=y(6388);let H=(()=>{class p{constructor(t){this.modalRef=t}ngOnInit(){}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-delete-directory-modal"]],decls:9,vars:0,consts:[[3,"close"],["appAutoFocus","","appFlatButton","","color","chestnut",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2," \ud3f4\ub354 \uc0ad\uc81c "),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"p"),e._uU(5," \ud3f4\ub354\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? "),e.qZA(),e.qZA(),e.TgZ(6,"app-modal-actions"),e.TgZ(7,"button",1),e.NdJ("click",function(){return u.close(!0)}),e._uU(8," \uc0ad\uc81c "),e.qZA(),e.qZA(),e.qZA())},directives:[x.O,M.R,b.E,g.I,k.h,_.z],styles:[""]}),p})(),U=(()=>{class p{constructor(t,u,S,q,K,W){this.modalRef=t,this.data=u,this.toastService=S,this.loadingCoverService=q,this.hierarchyStoreService=K,this.subscriptionService=W}ngOnInit(){this._setTypeLabel()}_setTypeLabel(){this.typeLabel=o.getTypeLabel(this.data.type)}onSubmit(){this.singleTextForm.valid?this._createHierarchy():this.toastService.open({message:`${this.typeLabel} \uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694`,type:O.p.error})}_createHierarchy(){const u=this.hierarchyStoreService.addHierarchy(this.singleTextForm.value,this.data.type,this.data.parent),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:q=>{this.toastService.open({message:o.getCreateSuccessMessage(this.data.type)}),this.close(q)},error:q=>{console.error(q),this.toastService.open({message:o.getCreateFailureMessage(this.data.type),type:O.p.error})}});this.subscriptionService.store("_createHierarchy",S),this.loadingCoverService.showLoading=!0}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv),e.Y36(C.xJ),e.Y36(O.k),e.Y36(c.x),e.Y36(d.F),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-create-hierarchy-modal"]],viewQuery:function(t,u){if(1&t&&e.Gf(T.l,5),2&t){let S;e.iGM(S=e.CRH())&&(u.singleTextForm=S.first)}},features:[e._Bn([P.F])],decls:8,vars:2,consts:[[3,"close"],[3,"label","formSubmit"],["appFlatButton","",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"app-single-text-form",1),e.NdJ("formSubmit",function(){return u.onSubmit()}),e.qZA(),e.qZA(),e.TgZ(5,"app-modal-actions"),e.TgZ(6,"button",2),e.NdJ("click",function(){return u.onSubmit()}),e._uU(7," \uc0dd\uc131 "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",u.typeLabel," \uc0dd\uc131 "),e.xp6(2),e.Q6J("label",u.typeLabel+" \uba85"))},directives:[x.O,M.R,b.E,T.l,g.I,_.z],styles:[""]}),p})(),J=(()=>{class p{constructor(t,u){this.modalRef=t,this.data=u}ngOnInit(){this._setTexts()}_setTexts(){this.typeLabel=o.getTypeLabel(this.data.type),this.message=o.getDeleteConfirmMessage(this.data.type)}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv),e.Y36(C.xJ))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-delete-hierarchy-modal"]],decls:9,vars:2,consts:[[3,"close"],["appAutoFocus","","appFlatButton","","color","chestnut",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"app-modal-actions"),e.TgZ(7,"button",1),e.NdJ("click",function(){return u.close(!0)}),e._uU(8," \uc0ad\uc81c "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",u.typeLabel," \uc0ad\uc81c "),e.xp6(3),e.hij(" ",u.message," "))},directives:[x.O,M.R,b.E,g.I,k.h,_.z],styles:[""]}),p})(),ee=(()=>{class p{constructor(t,u,S,q,K,W){this.modalRef=t,this.data=u,this.toastService=S,this.loadingCoverService=q,this.hierarchyStoreService=K,this.subscriptionService=W}ngOnInit(){this._setTypeLabel()}ngAfterViewInit(){this._setInitialValue()}_setTypeLabel(){this.typeLabel=o.getTypeLabel(this.data.type,!0)}_setInitialValue(){this.singleTextForm.initialValue=this.data.name}onSubmit(){this.singleTextForm.valid?this._editHierarchy():this.toastService.open({message:`${this.typeLabel} \uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694`,type:O.p.error})}_editHierarchy(){const t=this.singleTextForm.value,u=Object.assign(Object.assign({},this.data),{name:t}),S=this.hierarchyStoreService.updateHierarchy(u),q=(0,l.D)(S).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:K=>{this.toastService.open({message:o.getEditSuccessMessage(this.data.type)}),this.close(K)},error:K=>{console.error(K),this.toastService.open({message:o.getEditFailureMessage(this.data.type),type:O.p.error})}});this.subscriptionService.store("_editHierarchy",q),this.loadingCoverService.showLoading=!0}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv),e.Y36(C.xJ),e.Y36(O.k),e.Y36(c.x),e.Y36(d.F),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-edit-hierarchy-modal"]],viewQuery:function(t,u){if(1&t&&e.Gf(T.l,5),2&t){let S;e.iGM(S=e.CRH())&&(u.singleTextForm=S.first)}},features:[e._Bn([P.F])],decls:8,vars:2,consts:[[3,"close"],[3,"label","formSubmit"],["appFlatButton","",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"app-single-text-form",1),e.NdJ("formSubmit",function(){return u.onSubmit()}),e.qZA(),e.qZA(),e.TgZ(5,"app-modal-actions"),e.TgZ(6,"button",2),e.NdJ("click",function(){return u.onSubmit()}),e._uU(7," \uc218\uc815 "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",u.typeLabel," \uc218\uc815 "),e.xp6(2),e.Q6J("label",u.typeLabel+" \uba85"))},directives:[x.O,M.R,b.E,T.l,g.I,_.z],styles:[""]}),p})();var F=y(4666),D=y(496),E=y(2581);let N=(()=>{class p{constructor(t,u,S){this.elementRef=t,this.hierarchyService=u,this.subscriptionService=S,this.droppable=!1}get element(){return this.elementRef.nativeElement}checkDraggingHierarchyContained(t,u){throw new Error("'_checkDraggingHierarchyContained()' method should be overridden")}_subscribeDraggingHierarchy(){const t=this.hierarchyService.draggingHierarchy$.subscribe(u=>{u||(this.droppable=!1)});this.subscriptionService.store("_subscribeDraggingHierarchy",t)}_subscribeDraggingScope(){const t=this.hierarchyService.draggingScope$.subscribe(u=>this._draggingScope=u);this.subscriptionService.store("_subscribeDraggingScope",t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(e.SBq),e.Y36(i._),e.Y36(P.F))},p.\u0275dir=e.lG2({type:p,selectors:[["","appDroppableItem",""]],hostVars:2,hostBindings:function(t,u){2&t&&e.ekj("ww-droppable",u.droppable)}}),p})(),I=(()=>{class p{constructor(t){this.modalRef=t}ngOnInit(){}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-clear-hierarchy-modal"]],decls:9,vars:0,consts:[[3,"close"],["appAutoFocus","","appFlatButton","","color","chestnut",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2," \ud3f4\ub354 \ube44\uc6b0\uae30 "),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"p"),e._uU(5," \uc815\ub9d0 \ud3f4\ub354\ub97c \ube44\uc6b0\uc2dc\uaca0\uc2b5\ub2c8\uae4c? "),e.qZA(),e.qZA(),e.TgZ(6,"app-modal-actions"),e.TgZ(7,"button",1),e.NdJ("click",function(){return u.close(!0)}),e._uU(8," \ube44\uc6b0\uae30 "),e.qZA(),e.qZA(),e.qZA())},directives:[x.O,M.R,b.E,g.I,k.h,_.z],styles:[""]}),p})();var Y=y(5405),Z=y(7395),R=y(6868),j=y(1777);function V(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){const q=e.CHM(t).$implicit,K=e.oxw();return q.click(),K.close.emit()}),e._uU(1),e.qZA()}if(2&p){const t=L.$implicit;e.xp6(1),e.hij(" ",t.name,"\n")}}let Q=(()=>{class p{constructor(t){this.elementRef=t,this.data=[],this.close=new e.vpe,this.fadeIn="visible",this._ready=!1}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this._ready=!0})}onWindowWheel(){this._ready&&this.close.emit()}onHostContextMenu(t){m.F$.neutralize(t)}onWindowClick(t){this._detectClickEvent(t,!0)}onWindowContextMenu(t){this._detectClickEvent(t)}onWindowKeydown(t){m.F$.isKey(t,m.D$.Escape)&&this.close.emit()}onWindowTouchStart(t){this._detectClickEvent(t)}_detectClickEvent(t,u=!1){if(this._ready){const S=t.target,q=this.elementRef.nativeElement,K=q.contains(S),W=!u&&q.parentElement.contains(S);!K&&!W&&this.close.emit()}}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(e.SBq))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-hierarchy-context-menu"]],hostVars:1,hostBindings:function(t,u){1&t&&e.NdJ("wheel",function(){return u.onWindowWheel()},!1,e.Jf7)("contextmenu",function(q){return u.onHostContextMenu(q)})("click",function(q){return u.onWindowClick(q)},!1,e.Jf7)("contextmenu",function(q){return u.onWindowContextMenu(q)},!1,e.Jf7)("keydown",function(q){return u.onWindowKeydown(q)},!1,e.Jf7)("touchstart",function(q){return u.onWindowTouchStart(q)},!1,e.Jf7),2&t&&e.d8E("@fadeIn",u.fadeIn)},inputs:{data:"data"},outputs:{close:"close"},decls:1,vars:1,consts:[["class","ww-item",3,"click",4,"ngFor","ngForOf"],[1,"ww-item",3,"click"]],template:function(t,u){1&t&&e.YNc(0,V,2,1,"div",0),2&t&&e.Q6J("ngForOf",u.data)},directives:[v.sg],styles:["[_nghost-%COMP%]{box-sizing:border-box;padding:10px 0;width:190px;position:fixed;display:block;z-index:200;background-color:#313335;box-shadow:0 3px 6px #00000080}.ww-item[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 15px;font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:400;display:flex;align-items:center;flex-wrap:wrap;height:40px;cursor:pointer;-webkit-user-select:none;user-select:none;color:#fff}.ww-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}@media screen and (max-width: 1024px){.ww-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;text-align:center}.ww-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}}.ww-item[_ngcontent-%COMP%]:hover{background-color:#5a5c5f}.ww-item[_ngcontent-%COMP%]:active{background-color:#414345}.ww-light-theme   [_nghost-%COMP%]{background-color:#fff}.ww-light-theme   [_nghost-%COMP%]   .ww-item[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   .ww-item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.ww-light-theme   [_nghost-%COMP%]   .ww-item[_ngcontent-%COMP%]:active{background-color:#e6e6e6}"],data:{animation:[(0,j.X$)("fadeIn",[(0,j.SB)("void",(0,j.oB)({opacity:0})),(0,j.SB)("visible",(0,j.oB)({opacity:1})),(0,j.eR)("void <=> visible",(0,j.jt)(".2s"))])]}}),p})();function X(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-icon-button",11),e.NdJ("click",function(S){return e.CHM(t),e.oxw().toggleDirectoryOpened(S)}),e.qZA()}if(2&p){const t=e.oxw();e.ekj("ww-opened",t.data.opened)}}function ie(p,L){1&p&&e._UZ(0,"app-icon",12)}function ae(p,L){1&p&&e._UZ(0,"app-icon",13)}function le(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"app-icon-button",15),e.NdJ("touchstart",function(S){return e.CHM(t),e.oxw().onDragButtonClick(S)}),e.qZA(),e.qZA()}}function fe(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-hierarchy-context-menu",16),e.NdJ("close",function(){return e.CHM(t),e.oxw().onContextMenuClose()}),e.qZA()}if(2&p){const t=e.oxw();e.Udp("left",t.contextMenuLeft)("top",t.contextMenuTop),e.Q6J("data",t.contextMenu)}}let de=(()=>{class p extends N{constructor(t,u,S,q,K,W,oe,he,pe){super(t,u,S),this.elementRef=t,this.hierarchyService=u,this.subscriptionService=S,this.router=q,this.toastService=K,this.modalService=W,this.eventListenerService=oe,this.loadingCoverService=he,this.hierarchyStoreService=pe,this.depth=0,this.hierarchyDeleted=new e.vpe,this.contextMenuOpened=!1,this.contextMenu=[],this._animator=new F.L,this._longPressed=!1,this._handleWindowMouseUp=()=>{this.backgroundOpacity=void 0,this._longPressed=!1,this._animator.cancel(),clearTimeout(this._longPressDelay)}}get data(){return this._data}set data(t){this._data=t,this._buildContextMenu(),"directory"===this._data.type&&this.hierarchyService.registerDroppableHierarchy(this)}get droppableEvent(){return{parentId:this._data.id}}get opened(){var t;return(null===(t=this._openedHierarchy)||void 0===t?void 0:t.id)===this._data.id}get paddingLeft(){return 21*this.depth+10+"px"}get isRootHierarchy(){return!this._data.parentId&&"directory"===this._data.type}get hasChildren(){return(this._data.children||[]).length>0}get contextMenuLeft(){if(this.contextMenuMouseEvent)return`${this.contextMenuMouseEvent.x}px`}get contextMenuTop(){if(this.contextMenuMouseEvent)return`${this.contextMenuMouseEvent.y}px`}ngOnInit(){this._subscribeDraggingHierarchy(),this._subscribeDraggingScope(),this._subscribeOpenedHierarchy()}ngOnDestroy(){this._animator.cancel(),this.hierarchyService.unregisterDroppableHierarchy(this)}checkDraggingHierarchyContained(t,u){if(this._draggingScope===this.directoryType){const S=this.element.getBoundingClientRect(),{x:q,y:K}=m.F$.getMouseOrTouchXY(t),W={x:q-u.width/2,y:K-u.height/2,width:u.width,height:u.height},oe={x:S.x,y:S.y+S.height/2,width:S.width,height:S.height/2},he=E.k.rectHorizontallyOverlapsRect(oe,W)||E.k.rectHorizontallyOverlapsRect(W,oe),pe=E.k.rectVerticallyContainsRect(W,oe);this.droppable=he&&pe}}onHostMobileClick(){window.innerWidth<1024&&this.onHostDoubleClick()}toggleDirectoryOpened(t){t&&m.F$.neutralize(t);const u=!this._data.opened;u||this._closeChildrenHierarchies(),this._data.opened=u}onHostDoubleClick(){"directory"===this._data.type?this.toggleDirectoryOpened():this._navigateToDocument()}onHostMouseDown(t){this._data.parentId&&(this._longPressed=!0,this._addWindowMouseUp(),clearTimeout(this._longPressDelay),this._longPressDelay=setTimeout(()=>{this._longPressed&&this._startLongPressTimer(t)},100))}onHostContextMenu(t){m.F$.neutralize(t),window.innerWidth>1024&&(this.contextMenuMouseEvent=t),this.contextMenuOpened=!0}onDragButtonClick(t){m.F$.neutralize(t),this._startDragging(t)}onContextMenuClose(){this.contextMenuOpened=!1,this.contextMenuMouseEvent=void 0}_subscribeOpenedHierarchy(){const t=this.hierarchyService.openedHierarchy$.subscribe(u=>this._openedHierarchy=u);this.subscriptionService.store("_subscribeOpenedHierarchy",t)}_buildContextMenu(){this.contextMenu=[],this._data.parentId&&this.contextMenu.push({name:"\uc774\ub984 \ubcc0\uacbd",click:()=>this._openEditHierarchyModal()}),"directory"===this._data.type&&this._buildDirectoryContextMenu(),this._data.parentId&&this.contextMenu.push({name:"\uc0ad\uc81c",click:()=>this._handleDeleteEvent()})}_buildDirectoryContextMenu(){this.contextMenu.push({name:"\uc0c8 \ud3f4\ub354",click:()=>this._openCreateDirectoryModal()},{name:`\uc0c8 ${o.getTypeLabel(this._data.directoryType)}`,click:()=>this._openCreateHierarchyModal()},{name:"\ube44\uc6b0\uae30",click:()=>this._openClearHierarchyModal()})}_closeChildrenHierarchies(t=this._data){(t.children||[]).forEach(u=>{"directory"===u.type&&(this._closeChildrenHierarchies(u),u.opened=!1)})}_navigateToDocument(){this.hierarchyService.hierarchyDrawerOpened=!1,this.router.navigate(["/writer/project",this._data.projectId,this._data.id]).catch(t=>{console.error(t),this.toastService.open({message:"\ubb38\uc11c\ub97c \uc5f4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error})})}_startLongPressTimer(t){this._animator.animate({start:.5,target:1,duration:150,onProgress:u=>this.backgroundOpacity=D.i.toFloat(u.toFixed(2)),onEnd:()=>this._startDragging(t)})}_startDragging(t){this.hierarchyService.draggingScope=this.directoryType,this.hierarchyService.draggingHierarchy=this._data,this.hierarchyService.draggingMouseEvent=t}_addWindowMouseUp(){this.eventListenerService.addEvent(window,"mouseup",this._handleWindowMouseUp),this.eventListenerService.addEvent(window,"touchend",this._handleWindowMouseUp)}_openCreateDirectoryModal(){this.modalService.open(A,{data:this._data,closeOnNavigating:!0,onClose:t=>{t&&(this._data.opened=!0,this._data.children.push(t))}})}_handleDeleteEvent(){"directory"===this._data.type?this._openDeleteDirectoryModal():this._openDeleteHierarchyModal()}_openDeleteDirectoryModal(){this.modalService.open(H,{closeOnNavigating:!0,onClose:t=>{t&&this._deleteDirectory()}})}_deleteDirectory(){const t=this.hierarchyStoreService.deleteDirectoryHierarchy(this._data),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:()=>{this.toastService.open({message:"\ud3f4\ub354\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}),this.hierarchyDeleted.emit(this._data),this.hierarchyService.emitHierarchyChanged()},error:S=>{console.error(S),this.toastService.open({message:"\ud3f4\ub354\ub97c \uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_deleteDirectory",u),this.loadingCoverService.showLoading=!0}_openCreateHierarchyModal(){this.modalService.open(U,{data:{parent:this._data,type:this._data.directoryType},closeOnNavigating:!0,onClose:t=>{t&&(this._data.opened=!0,this._data.children.push(t))}})}_openDeleteHierarchyModal(){this.modalService.open(J,{data:this._data,closeOnNavigating:!0,onClose:t=>{t&&this._deleteHierarchy()}})}_deleteHierarchy(){const t=this.hierarchyStoreService.deleteHierarchy(this._data),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:()=>{this.toastService.open({message:o.getDeleteSuccessMessage(this._data.type)}),this._unselectOpenedHierarchy(),this.hierarchyDeleted.emit(this._data),this.hierarchyService.emitHierarchyChanged()},error:S=>{console.error(S),this.toastService.open({message:o.getDeleteFailureMessage(this._data.type),type:O.p.error})}});this.subscriptionService.store("_deleteDirectory",u),this.loadingCoverService.showLoading=!0}_openEditHierarchyModal(){this.modalService.open(ee,{data:this._data,closeOnNavigating:!0,onClose:t=>{t&&(this._data.name=t.name,this.hierarchyService.emitHierarchyChanged())}})}_unselectOpenedHierarchy(){var t;(null===(t=this._openedHierarchy)||void 0===t?void 0:t.id)===this._data.id&&this.hierarchyService.closeDocumentHierarchy()}_openClearHierarchyModal(){this.modalService.open(I,{closeOnNavigating:!0,onClose:t=>{t&&this._clearHierarchy()}})}_clearHierarchy(){const t=this.hierarchyStoreService.clearHierarchy(this._data),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:()=>{this._data.children=[],this._data.opened=!1,this.toastService.open({message:"\ud3f4\ub354\ub97c \ubaa8\ub450 \ube44\uc6e0\uc2b5\ub2c8\ub2e4"})},error:S=>{console.error(S),this.toastService.open({message:"\ud3f4\ub354\ub97c \ube44\uc6b0\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_clearHierarchy",u),this.loadingCoverService.showLoading=!0}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(e.SBq),e.Y36(i._),e.Y36(P.F),e.Y36(B.F0),e.Y36(O.k),e.Y36(Y.Z),e.Y36(h.F),e.Y36(c.x),e.Y36(d.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-current-hierarchy"]],hostVars:6,hostBindings:function(t,u){1&t&&e.NdJ("click",function(){return u.onHostMobileClick()})("dblclick",function(){return u.onHostDoubleClick()})("mousedown",function(q){return u.onHostMouseDown(q)})("contextmenu",function(q){return u.onHostContextMenu(q)}),2&t&&(e.Udp("padding-left",u.paddingLeft),e.ekj("ww-contextmenu-opened",u.contextMenuOpened)("ww-opened",u.opened))},inputs:{depth:"depth",directoryType:"directoryType",data:"data"},outputs:{hierarchyDeleted:"hierarchyDeleted"},features:[e._Bn([P.F,h.F]),e.qOj],decls:12,vars:8,consts:[[1,"ww-flex","ww-left"],[1,"ww-directory-more"],["color","suva-grey","name","chevron-down",3,"ww-opened","click",4,"ngIf"],[1,"ww-type-icon"],[3,"ngSwitch"],["name","directory",4,"ngSwitchCase"],["name","article",4,"ngSwitchDefault"],[1,"ww-name"],["class","ww-flex ww-mobile",4,"ngIf"],[1,"ww-background"],[3,"data","left","top","close",4,"ngIf"],["color","suva-grey","name","chevron-down",3,"click"],["name","directory"],["name","article"],[1,"ww-flex","ww-mobile"],["color","suva-grey","name","drag-handle",3,"touchstart"],[3,"data","close"]],template:function(t,u){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,X,1,2,"app-icon-button",2),e.qZA(),e.TgZ(3,"div",3),e.ynx(4,4),e.YNc(5,ie,1,0,"app-icon",5),e.YNc(6,ae,1,0,"app-icon",6),e.BQk(),e.qZA(),e.TgZ(7,"div",7),e._uU(8),e.qZA(),e.qZA(),e.YNc(9,le,2,0,"div",8),e._UZ(10,"div",9),e.YNc(11,fe,1,5,"app-hierarchy-context-menu",10)),2&t&&(e.xp6(2),e.Q6J("ngIf",u.hasChildren),e.xp6(2),e.Q6J("ngSwitch",u.data.type),e.xp6(1),e.Q6J("ngSwitchCase","directory"),e.xp6(3),e.hij(" ",u.data.name," "),e.xp6(1),e.Q6J("ngIf",!u.isRootHierarchy),e.xp6(1),e.Udp("opacity",u.backgroundOpacity),e.xp6(1),e.Q6J("ngIf",u.contextMenuOpened))},directives:[v.O5,v.RF,v.n9,v.ED,Z.r,R.o,Q],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:0 8px;box-sizing:border-box;border:2px solid transparent;position:relative;height:40px;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}[_nghost-%COMP%]:hover   .ww-background[_ngcontent-%COMP%], .ww-contextmenu-opened[_nghost-%COMP%]   .ww-background[_ngcontent-%COMP%]{opacity:.5}.ww-opened[_nghost-%COMP%]   .ww-background[_ngcontent-%COMP%]{background-color:#3167ff;opacity:.5}.ww-droppable[_nghost-%COMP%]{box-sizing:border-box;border:2px solid #6F86C5}@media screen and (max-width: 1024px){[_nghost-%COMP%]:hover   .ww-background[_ngcontent-%COMP%], .ww-contextmenu-opened[_nghost-%COMP%]   .ww-background[_ngcontent-%COMP%]{opacity:0}}.ww-background[_ngcontent-%COMP%]{width:100%;height:100%;top:0;left:0;position:absolute;background-color:#6f86c5;opacity:0}.ww-flex[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;position:relative;z-index:2}.ww-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-left[_ngcontent-%COMP%]{width:calc(100% - 63px)}.ww-directory-more[_ngcontent-%COMP%]{width:16px;height:24px}.ww-directory-more[_ngcontent-%COMP%]   app-icon-button[_ngcontent-%COMP%]{width:100%;height:100%}.ww-directory-more[_ngcontent-%COMP%]   app-icon-button[_ngcontent-%COMP%]     app-icon{transform:rotate(-90deg)}.ww-directory-more[_ngcontent-%COMP%]   app-icon-button.ww-opened[_ngcontent-%COMP%]     app-icon{transform:rotate(0)}.ww-type-icon[_ngcontent-%COMP%]{margin-left:5px}.ww-type-icon[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{width:20px;height:20px}.ww-name[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:300;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:#fff;margin-left:5px;width:calc(100% - 55px)}.ww-mobile[_ngcontent-%COMP%]{visibility:hidden}@media screen and (max-width: 1024px){.ww-mobile[_ngcontent-%COMP%]{visibility:visible}}.ww-mobile[_ngcontent-%COMP%]   app-icon-button[_ngcontent-%COMP%]{width:24px;height:24px}.ww-mobile[_ngcontent-%COMP%]   app-icon-button[_ngcontent-%COMP%] + app-icon-button[_ngcontent-%COMP%]{margin-left:5px}@media screen and (max-width: 1024px){app-hierarchy-context-menu[_ngcontent-%COMP%]{width:calc(100% - 40px);bottom:20px;left:50%;transform:translate(-50%)}}.ww-light-theme   [_nghost-%COMP%]   .ww-name[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   app-icon[tk-name=directory][_ngcontent-%COMP%]     path{fill:#313335}.ww-light-theme   [_nghost-%COMP%]   app-icon[tk-name=article][_ngcontent-%COMP%]     path{fill:#313335}.ww-light-theme   [_nghost-%COMP%]:hover   .ww-background[_ngcontent-%COMP%], .ww-light-theme   .ww-contextmenu-opened[_nghost-%COMP%]   .ww-background[_ngcontent-%COMP%]{opacity:.5}.ww-light-theme   .ww-opened[_nghost-%COMP%]   .ww-background[_ngcontent-%COMP%]{background-color:#4e91d5;opacity:1}.ww-light-theme   .ww-opened[_nghost-%COMP%]   app-icon[tk-name=directory][_ngcontent-%COMP%]     path{fill:#fff}.ww-light-theme   .ww-opened[_nghost-%COMP%]   app-icon[tk-name=article][_ngcontent-%COMP%]     path{fill:#fff}.ww-light-theme   .ww-opened[_nghost-%COMP%]   .ww-name[_ngcontent-%COMP%]{color:#fff}.ww-light-theme   [_nghost-%COMP%]   .ww-background[_ngcontent-%COMP%]{background-color:#4e91d5}"]}),p})(),we=(()=>{class p extends N{constructor(t,u,S){super(t,u,S),this.elementRef=t,this.hierarchyService=u,this.subscriptionService=S,this.depth=0}get droppableEvent(){return{parentId:this.data.parentId,nextId:this.data.id}}get paddingLeft(){return 21*(this.depth+1)+10+"px"}ngOnInit(){this._subscribeDraggingHierarchy(),this._subscribeDraggingScope()}ngAfterViewInit(){this.hierarchyService.registerDroppableDropzone(this)}ngOnDestroy(){this.hierarchyService.unregisterDroppableDropzone(this)}checkDraggingHierarchyContained(t,u){if(this._draggingScope===this.directoryType){const S=this.element.getBoundingClientRect(),{x:q,y:K}=m.F$.getMouseOrTouchXY(t),W={x:q-u.width/2,y:K-u.height/2,width:u.width,height:u.height/2},oe=E.k.rectHorizontallyOverlapsRect(S,W)||E.k.rectHorizontallyOverlapsRect(W,S),he=E.k.rectVerticallyContainsRect(W,S);this.droppable=oe&&he}}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(e.SBq),e.Y36(i._),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-hierarchy-dropzone"]],hostVars:2,hostBindings:function(t,u){2&t&&e.Udp("padding-left",u.paddingLeft)},inputs:{data:"data",depth:"depth",directoryType:"directoryType"},features:[e._Bn([P.F]),e.qOj],decls:0,vars:0,template:function(t,u){},styles:["[_nghost-%COMP%]{box-sizing:border-box;padding:0;width:100%;height:2px;display:block;background-clip:content-box}.ww-droppable[_nghost-%COMP%]{background-color:#6f86c5}"]}),p})();function _e(p,L){if(1&p&&e._UZ(0,"app-hierarchy-dropzone",3),2&p){const t=e.oxw();e.Q6J("depth",t.depth)("data",t.data)("directoryType",t.directoryType)}}function $(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-hierarchy-item",1),e.NdJ("hierarchyDeleted",function(S){return e.CHM(t),e.oxw(2).onHierarchyDeleted(S)}),e.qZA()}if(2&p){const t=L.$implicit,u=e.oxw(2);e.Q6J("data",t)("depth",u.depth+1)("directoryType",u.directoryType)}}function G(p,L){if(1&p&&(e.TgZ(0,"div"),e.YNc(1,$,1,3,"app-hierarchy-item",4),e.qZA()),2&p){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.children)}}let ne=(()=>{class p{constructor(t,u){this.hierarchyService=t,this.subscriptionService=u,this.depth=0,this.hierarchyDeleted=new e.vpe}ngOnInit(){this._subscribeDraggingHierarchy()}_subscribeDraggingHierarchy(){const t=this.hierarchyService.draggingHierarchy$.subscribe(u=>this._draggingHierarchy=u);this.subscriptionService.store("_subscribeDraggingHierarchy",t)}get isDragging(){var t;return(null===(t=this._draggingHierarchy)||void 0===t?void 0:t.id)===this.data.id}onHierarchyDeleted(t){const u=this.data.children.findIndex(S=>S.id===t.id);-1!==u&&(this.data.children.splice(u,1),this.noChildren&&(this.data.opened=!1))}get noChildren(){return 0===(this.data.children||[]).length}get notRootHierarchy(){return!!this.data.parentId}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(i._),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-hierarchy-item"]],hostVars:2,hostBindings:function(t,u){2&t&&e.ekj("ww-dragging",u.isDragging)},inputs:{data:"data",depth:"depth",directoryType:"directoryType"},outputs:{hierarchyDeleted:"hierarchyDeleted"},features:[e._Bn([P.F])],decls:3,vars:5,consts:[[3,"depth","data","directoryType",4,"ngIf"],[3,"data","depth","directoryType","hierarchyDeleted"],[4,"ngIf"],[3,"depth","data","directoryType"],[3,"data","depth","directoryType","hierarchyDeleted",4,"ngFor","ngForOf"]],template:function(t,u){1&t&&(e.YNc(0,_e,1,3,"app-hierarchy-dropzone",0),e.TgZ(1,"app-current-hierarchy",1),e.NdJ("hierarchyDeleted",function(q){return u.hierarchyDeleted.emit(q)}),e.qZA(),e.YNc(2,G,2,1,"div",2)),2&t&&(e.Q6J("ngIf",u.notRootHierarchy),e.xp6(1),e.Q6J("data",u.data)("depth",u.depth)("directoryType",u.directoryType),e.xp6(1),e.Q6J("ngIf",u.data.opened))},directives:[v.O5,de,we,v.sg,p],styles:["[_nghost-%COMP%]{display:block}.ww-dragging[_nghost-%COMP%]{display:none}"]}),p})();function re(p,L){1&p&&e._UZ(0,"app-icon",4)}function te(p,L){1&p&&e._UZ(0,"app-icon",5)}let se=(()=>{class p{constructor(t,u){this.elementRef=t,this.hierarchyService=u}ngOnInit(){}ngAfterViewInit(){this._setDraggingHierarchyDOMRect()}ngOnDestroy(){this._unsetDraggingHierarchyDOMRect()}get element(){return this.elementRef.nativeElement}_setDraggingHierarchyDOMRect(){this.hierarchyService.draggingHierarchyDOMRect=this.element.getBoundingClientRect()}_unsetDraggingHierarchyDOMRect(){this.hierarchyService.draggingHierarchyDOMRect=void 0}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(e.SBq),e.Y36(i._))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-dragging-hierarchy"]],inputs:{data:"data"},features:[e._Bn([P.F])],decls:5,vars:3,consts:[[3,"ngSwitch"],["name","directory",4,"ngSwitchCase"],["name","article",4,"ngSwitchDefault"],[1,"ww-name"],["name","directory"],["name","article"]],template:function(t,u){1&t&&(e.ynx(0,0),e.YNc(1,re,1,0,"app-icon",1),e.YNc(2,te,1,0,"app-icon",2),e.BQk(),e.TgZ(3,"div",3),e._uU(4),e.qZA()),2&t&&(e.Q6J("ngSwitch",u.data.type),e.xp6(1),e.Q6J("ngSwitchCase","directory"),e.xp6(3),e.hij(" ",u.data.name,"\n"))},directives:[v.RF,v.n9,v.ED,R.o],styles:["[_nghost-%COMP%]{box-sizing:border-box;padding:0 15px;display:flex;align-items:center;flex-wrap:nowrap;position:fixed;pointer-events:none;background-color:#3f4143;box-shadow:0 3px 6px #00000080;width:200px;z-index:100;transform:translate(-50%,-50%)}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-name[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:300;line-height:35px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:#fff;margin-left:5px;width:calc(100% - 29px)}app-icon[_ngcontent-%COMP%]{width:20px;height:20px}.ww-light-theme   [_nghost-%COMP%]{background-color:#fff}.ww-light-theme   [_nghost-%COMP%]   .ww-name[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   app-icon[_ngcontent-%COMP%]     path{fill:#313335}"]}),p})();function ce(p,L){if(1&p&&e._UZ(0,"app-hierarchy-item",2),2&p){const t=L.$implicit;e.Q6J("data",t)("directoryType",t.directoryType)}}function ue(p,L){if(1&p&&e._UZ(0,"app-dragging-hierarchy",3),2&p){const t=e.oxw();e.Udp("left",t.draggingHierarchyLeft)("top",t.draggingHierarchyTop),e.Q6J("data",t.draggingHierarchy)}}let Ce=(()=>{class p{constructor(t,u,S,q,K,W,oe,he){this.changeDetectorRef=t,this.activatedRoute=u,this.toastService=S,this.eventListenerService=q,this.loadingCoverService=K,this.hierarchyService=W,this.hierarchyStoreService=oe,this.subscriptionService=he,this.hierarchies=[],this.opened=!1,this._projectId=null,this._setMouseMovingPosition=pe=>{this.hierarchyService.draggingMouseEvent=pe},this._updateHierarchyPositions=()=>{const pe=this.draggingHierarchy,Se=this._droppableEvent;if(pe&&Se){const et=o.findAndUpdateDropOriginHierarchy(this.hierarchies,pe,Se),tt=o.findAndUpdateDropTargetHierarchy(this.hierarchies,pe,Se),An=this.hierarchyStoreService.updateRepositionedHierarchies(tt,et),Pn=(0,l.D)(An).pipe((0,s.x)(()=>{this._stopDragging(),this.loadingCoverService.showLoading=!1})).subscribe({next:()=>{this._replaceExistingHierarchyChildren(tt,!0),this._replaceExistingHierarchyChildren(et)},error:Mn=>{console.error(Mn),this.toastService.open({message:"\ud56d\ubaa9\uc744 \uc62e\uae30\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_updateHierarchyPositions",Pn),this.loadingCoverService.showLoading=!0}else this._stopDragging()}}get draggingHierarchyLeft(){const{x:t}=m.F$.getMouseOrTouchXY(this._draggingMouseEvent);return(t||0)+"px"}get draggingHierarchyTop(){const{y:t}=m.F$.getMouseOrTouchXY(this._draggingMouseEvent);return(t||0)+"px"}get dragging(){return!!this.draggingHierarchy}ngOnInit(){this._checkBrowserWidth(),this._subscribeHierarchyDrawerOpened(),this._subscribeOpenedHierarchy(),this._subscribeActivatedRouteParams(),this._subscribeDraggingHierarchy(),this._subscribeDraggingPositions()}ngOnDestroy(){this.hierarchyService.hierarchyDrawerOpened=!1}onWindowResize(){this._checkBrowserWidth()}_subscribeHierarchyDrawerOpened(){const t=this.hierarchyService.hierarchyDrawerOpened$.subscribe(u=>this.opened=u);this.subscriptionService.store("_subscribeHierarchyDrawerOpened",t)}_subscribeOpenedHierarchy(){const t=this.hierarchyService.openedHierarchy$.subscribe(u=>{var S,q;(null===(S=this._openedHierarchy)||void 0===S?void 0:S.id)!==(null==u?void 0:u.id)&&(this._openedHierarchy=u,this._openHierarchyTree(null===(q=this._openedHierarchy)||void 0===q?void 0:q.id))});this.subscriptionService.store("_subscribeOpenedHierarchy",t)}_openHierarchyTree(t){if(t){const u=o.findHierarchyById(this.hierarchies,t);u&&(u.opened=!0,this._openHierarchyTree(u.parentId))}}_subscribeActivatedRouteParams(){const t=this.activatedRoute.paramMap.subscribe(u=>{this._projectId=u.get("id"),this._projectId&&this._getHierarchies()});this.subscriptionService.store("_subscribeActivatedRouteParams",t)}_getHierarchies(){const t=this.hierarchyStoreService.getAllByProjectId(this._projectId),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{var q;this.hierarchies=S,this._openHierarchyTree(null===(q=this._openedHierarchy)||void 0===q?void 0:q.id)},error:S=>{console.error(S),this.toastService.open({message:"\ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getHierarchies",u),this.loadingCoverService.showLoading=!0}_subscribeDraggingHierarchy(){const t=this.hierarchyService.draggingHierarchy$.subscribe(u=>{this.draggingHierarchy=u,this.draggingHierarchy?(this._addWindowDraggingEvent(),this._addWindowDragEndEvent()):(this._removeWindowDraggingEvent(),this._removeWindowDragEndEvent())});this.subscriptionService.store("_subscribeDraggingHierarchy",t)}_subscribeDraggingPositions(){const t=(0,a.a)([this.hierarchyService.draggingMouseEvent$,this.hierarchyService.draggingHierarchyDOMRect$]).subscribe(u=>{u[0]&&u[1]&&(this._draggingMouseEvent=u[0],this.changeDetectorRef.detectChanges(),this._handleDraggingPositionChange(u[0],u[1]))});this.subscriptionService.store("_subscribeDraggingPositions",t)}_addWindowDraggingEvent(){this.eventListenerService.addEvent(window,"mousemove",this._setMouseMovingPosition),this.eventListenerService.addEvent(window,"touchmove",this._setMouseMovingPosition)}_addWindowDragEndEvent(){this.eventListenerService.addEvent(window,"mouseup",this._updateHierarchyPositions),this.eventListenerService.addEvent(window,"touchend",this._updateHierarchyPositions)}_replaceExistingHierarchyChildren(t,u=!1){if(t){const S=o.findHierarchyById(this.hierarchies,t.id);S&&(S.children=t.children||[],S.opened=!!u||S.opened)}}_stopDragging(){this.hierarchyService.draggingMouseEvent=void 0,this.hierarchyService.draggingHierarchy=void 0}_removeWindowDraggingEvent(){this.eventListenerService.removeEvent(window,"mousemove",this._setMouseMovingPosition),this.eventListenerService.removeEvent(window,"touchmove",this._setMouseMovingPosition)}_removeWindowDragEndEvent(){this.eventListenerService.removeEvent(window,"mouseup",this._updateHierarchyPositions),this.eventListenerService.removeEvent(window,"touchend",this._updateHierarchyPositions)}_handleDraggingPositionChange(t,u){var S;const q=this.hierarchyService.checkDroppableDropzones(t,u),K=this.hierarchyService.checkDroppableHierarchy(t,u);this._droppableEvent=null===(S=q||K)||void 0===S?void 0:S.droppableEvent,this.changeDetectorRef.detectChanges()}_checkBrowserWidth(){window.innerWidth>1024&&(this.hierarchyService.hierarchyDrawerOpened=!1)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(e.sBO),e.Y36(B.gz),e.Y36(O.k),e.Y36(h.F),e.Y36(c.x),e.Y36(i._),e.Y36(d.F),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-hierarchies"]],hostVars:4,hostBindings:function(t,u){1&t&&e.NdJ("resize",function(){return u.onWindowResize()},!1,e.Jf7),2&t&&e.ekj("ww-opened",u.opened)("ww-dragging",u.dragging)},features:[e._Bn([P.F,h.F])],decls:2,vars:2,consts:[[3,"data","directoryType",4,"ngFor","ngForOf"],[3,"data","left","top",4,"ngIf"],[3,"data","directoryType"],[3,"data"]],template:function(t,u){1&t&&(e.YNc(0,ce,1,2,"app-hierarchy-item",0),e.YNc(1,ue,1,5,"app-dragging-hierarchy",1)),2&t&&(e.Q6J("ngForOf",u.hierarchies),e.xp6(1),e.Q6J("ngIf",u.draggingHierarchy))},directives:[v.sg,v.O5,ne,se],styles:["[_nghost-%COMP%]{box-sizing:border-box;padding:10px 0;height:100%;display:block;background-color:#3f4143;box-shadow:0 3px 6px #00000029;transition:left .15s}.ww-dragging[_nghost-%COMP%]     app-current-hierarchy{pointer-events:none}@media screen and (max-width: 1024px){[_nghost-%COMP%]{left:-410px}.ww-opened[_nghost-%COMP%]{left:0}}.ww-light-theme   [_nghost-%COMP%]{background-color:#fff}"]}),p})(),Oe=(()=>{class p extends w.D{constructor(t,u,S,q,K,W,oe,he){super(t,u,S,q,K,W),this.activatedRoute=t,this.toastService=u,this.loadingCoverService=S,this.projectSettingsService=q,this.projectSettingsStoreService=K,this.subscriptionService=W,this.router=oe,this.headerService=he}get notoSans(){var t;return"NotoSans"===(null===(t=this._appliedSettings)||void 0===t?void 0:t.contentFont)}get notoSerif(){var t;return"NotoSerif"===(null===(t=this._appliedSettings)||void 0===t?void 0:t.contentFont)}get nanumGothic(){var t;return"NanumGothic"===(null===(t=this._appliedSettings)||void 0===t?void 0:t.contentFont)}get nanumMyeongjo(){var t;return"NanumMyeongjo"===(null===(t=this._appliedSettings)||void 0===t?void 0:t.contentFont)}onWindowBeforeUnload(t){m.F$.neutralize(t),t.returnValue=!0}onWindowResize(){this._checkBrowserWidth()}ngOnInit(){super.ngOnInit(),this._checkBrowserWidth(),this._showHeaderActions(),this._subscribeBackClick(),this._subscribeActivatedRouteParamMap()}_checkBrowserWidth(){const t=window.innerWidth>1024;this.headerService.showMenu=!t}_showHeaderActions(){this.headerService.showBack=!0,this.headerService.actions=[{name:"settings",click:()=>this._navigateToProjectSettings()}]}_subscribeBackClick(){const t=this.headerService.subscribeBackClick(()=>{this._navigateToProjects()});this.subscriptionService.store("_subscribeBackClick",t)}_navigateToProjects(){this.router.navigate(["/writer/projects"]).catch(t=>{console.error(t),this.toastService.open({message:"\ud398\uc774\uc9c0\ub97c \uc774\ub3d9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error})})}_navigateToProjectSettings(){this.router.navigate(["/writer/project",this._projectId,"settings"]).catch(t=>{console.error(t),this.toastService.open({message:"\ud398\uc774\uc9c0\ub97c \uc774\ub3d9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error})})}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(B.gz),e.Y36(O.k),e.Y36(c.x),e.Y36(n.Z),e.Y36(r.e),e.Y36(P.F),e.Y36(B.F0),e.Y36(f.r))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-project"]],hostVars:8,hostBindings:function(t,u){1&t&&e.NdJ("beforeunload",function(q){return u.onWindowBeforeUnload(q)},!1,e.Jf7)("resize",function(){return u.onWindowResize()},!1,e.Jf7),2&t&&e.ekj("noto-sans",u.notoSans)("noto-serif",u.notoSerif)("nanum-gothic",u.nanumGothic)("nanum-myeongjo",u.nanumMyeongjo)},features:[e._Bn([P.F]),e.qOj],decls:3,vars:0,consts:[[1,"ww-content"]],template:function(t,u){1&t&&(e._UZ(0,"app-hierarchies"),e.TgZ(1,"div",0),e._UZ(2,"router-outlet"),e.qZA())},directives:[Ce,B.lC],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;align-items:flex-start;flex-wrap:wrap;position:relative}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}app-hierarchies[_ngcontent-%COMP%]{position:relative;width:400px;z-index:80}@media screen and (max-width: 1024px){app-hierarchies[_ngcontent-%COMP%]{position:absolute;top:0;max-width:400px;width:100%}}.ww-content[_ngcontent-%COMP%]{width:calc(100% - 400px);height:100%}@media screen and (max-width: 1024px){.ww-content[_ngcontent-%COMP%]{width:100%}}"]}),p})(),ge=(()=>{class p{constructor(t,u,S){this.toastService=t,this.projectSettingsService=u,this.subscriptionService=S}set hierarchy(t){this._hierarchy&&this.hasChanges&&this._saveChangesAutomatically(),this._hierarchy=t,this._onHierarchyChange()}get contentWidth(){var t;return`${(null===(t=this._settings)||void 0===t?void 0:t.contentWidth)||0}px`}get hasChanges(){throw new Error("'hasChanges' getter should be overridden")}ngOnInit(){this._subscribeProjectSettings()}ngOnDestroy(){this.hasChanges&&this._saveChangesAutomatically()}onSaveClick(){this._saveChangesManually()}onWindowKeydown(t){(m.F$.isCommand(t,[m.f$.ctrl],m.D$.KeyS)||m.F$.isCommand(t,[m.f$.meta],m.D$.KeyS))&&(m.F$.neutralize(t),this._saveChangesManually())}_subscribeProjectSettings(){const t=this.projectSettingsService.settings$.subscribe(u=>this._settings=u);this.subscriptionService.store("_subscribeProjectSettings",t)}_onHierarchyChange(){throw new Error("'_onHierarchyChange()' method should be overridden")}_saveChangesAutomatically(){this._saveChanges(()=>{this.toastService.open({message:"\uc790\ub3d9 \uc800\uc7a5 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"})},t=>{console.error(t),this.toastService.open({message:"\uc790\ub3d9 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"})})}_saveChangesManually(){this._saveChanges(()=>{this._onManuallySaved(),this.toastService.open({message:"\uc800\uc7a5 \ub418\uc5c8\uc2b5\ub2c8\ub2e4"})},t=>{console.error(t),this.toastService.open({message:"\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"})})}_onManuallySaved(){throw new Error("'_onManuallySaved()' method should be overridden")}_saveChanges(t,u){throw new Error("'_saveChanges()' method should be overridden")}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(O.k),e.Y36(n.Z),e.Y36(P.F))},p.\u0275dir=e.lG2({type:p,selectors:[["","appDocumentContainer",""]],hostBindings:function(t,u){1&t&&e.NdJ("keydown",function(q){return u.onWindowKeydown(q)},!1,e.Jf7)},inputs:{hierarchy:"hierarchy"}}),p})();var Ne=y(9971),me=y.n(Ne);class ve{constructor(L,t){this._active=!1,this._disabled=!1,this.name=L,this.clickHandler=t}get active(){return this._active}set active(L){this._active=L}get disabled(){return this._disabled}set disabled(L){this._disabled=L}}let nt=(()=>{class p{constructor(){this.disabled=!1}ngOnInit(){}get active(){return this.data.active}get actionDisabled(){return this.disabled||this.data.disabled}onHostClick(){this.data.clickHandler(this.data)}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-document-header-action"]],hostVars:4,hostBindings:function(t,u){1&t&&e.NdJ("click",function(){return u.onHostClick()}),2&t&&e.ekj("ww-active",u.active)("ww-disabled",u.actionDisabled)},inputs:{data:"data",disabled:"disabled"},decls:1,vars:1,consts:[[3,"name"]],template:function(t,u){1&t&&e._UZ(0,"app-icon",0),2&t&&e.Q6J("name",u.data.name)},directives:[R.o],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;width:30px;height:30px;border-radius:5px;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}[_nghost-%COMP%]:hover{background-color:#fff3}[_nghost-%COMP%]:active{background-color:#e6e6e633}.ww-active[_nghost-%COMP%]{background-color:#fff}.ww-active[_nghost-%COMP%]   app-icon[_ngcontent-%COMP%]     path{fill:#090c0f}.ww-disabled[_nghost-%COMP%]{pointer-events:none;background-color:transparent;opacity:.5}.ww-disabled[_nghost-%COMP%]   app-icon[_ngcontent-%COMP%]     path{fill:#bbb}app-icon[_ngcontent-%COMP%]{width:24px;height:24px}app-icon[_ngcontent-%COMP%]     path{fill:#bbb}"]}),p})();var xe=y(7489),rt=y(4194);function it(p,L){1&p&&e._UZ(0,"div",5)}function ot(p,L){if(1&p&&e._UZ(0,"app-document-header-action",6),2&p){const t=L.$implicit,u=e.oxw(2);e.Q6J("data",t)("disabled",u.disabled)}}function at(p,L){if(1&p&&(e.ynx(0),e.YNc(1,it,1,0,"div",3),e.YNc(2,ot,1,2,"app-document-header-action",4),e.BQk()),2&p){const t=L.$implicit,u=L.index;e.xp6(1),e.Q6J("ngIf",0!==u),e.xp6(1),e.Q6J("ngForOf",t)}}function lt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().save.emit()}),e._uU(1," \uc800\uc7a5\n"),e.qZA()}}let Pe=(()=>{class p{constructor(){this.actions=[],this.disabled=!1,this.hasChanges=!1,this.save=new e.vpe}ngOnInit(){}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-document-header"]],hostVars:2,hostBindings:function(t,u){2&t&&e.ekj("ww-savable",u.hasChanges)},inputs:{actions:"actions",disabled:"disabled",hasChanges:"hasChanges"},outputs:{save:"save"},decls:3,vars:2,consts:[[1,"ww-flex"],[4,"ngFor","ngForOf"],["appFlatButton","","color","wild-blue-yonder",3,"click",4,"ngIf"],["class","ww-divider",4,"ngIf"],[3,"data","disabled",4,"ngFor","ngForOf"],[1,"ww-divider"],[3,"data","disabled"],["appFlatButton","","color","wild-blue-yonder",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"div",0),e.YNc(1,at,3,2,"ng-container",1),e.qZA(),e.YNc(2,lt,2,0,"button",2)),2&t&&(e.xp6(1),e.Q6J("ngForOf",u.actions),e.xp6(1),e.Q6J("ngIf",u.hasChanges))},directives:[v.sg,v.O5,nt,_.z],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;height:60px;background-color:#5e5f60;box-shadow:0 3px 6px #00000029;position:relative;z-index:60}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-flex[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:nowrap;box-sizing:border-box;padding:0 15px;width:100%;height:100%;overflow:auto}.ww-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-divider[_ngcontent-%COMP%]{width:1px;height:30px;background-color:#bbb;margin:0 10px}app-document-header-action[_ngcontent-%COMP%] + app-document-header-action[_ngcontent-%COMP%]{margin-left:10px}button[_ngcontent-%COMP%]{width:100px;margin:0 10px}.ww-savable[_nghost-%COMP%]   .ww-flex[_ngcontent-%COMP%]{width:calc(100% - 120px)}.ww-light-theme   [_nghost-%COMP%]{background-color:#fff}"]}),p})();const st=["content"],ct=["container"];function ut(p,L){if(1&p){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-document-header",1),e.NdJ("save",function(){return e.CHM(t),e.oxw().onSaveClick()}),e.qZA(),e.TgZ(2,"div",2,3),e._UZ(4,"div",4,5),e.qZA(),e.BQk()}if(2&p){const t=e.oxw();e.xp6(1),e.Q6J("actions",t.actions)("disabled",t.disabled)("hasChanges",t.hasChanges),e.xp6(3),e.Udp("max-width",t.contentWidth)}}let ft=(()=>{class p extends ge{constructor(t,u,S,q,K,W,oe){super(t,u,S),this.toastService=t,this.projectSettingsService=u,this.subscriptionService=S,this.renderer=q,this.changeDetectorRef=K,this.loadingCoverService=W,this.manuscriptStoreService=oe,this.actions=[],this.disabled=!0,this._formatSize1=new ve("format-size-1",()=>this._setFontSize("small")),this._formatSize2=new ve("format-size-2",()=>this._setFontSize()),this._formatSize3=new ve("format-size-3",()=>this._setFontSize("large")),this._formatSize4=new ve("format-size-4",()=>this._setFontSize("huge")),this._alignLeft=new ve("format-align-left",()=>this._setAlign()),this._alignCenter=new ve("format-align-center",()=>this._setAlign("center")),this._alignRight=new ve("format-align-right",()=>this._setAlign("right")),this._alignJustify=new ve("format-align-justify",()=>this._setAlign("justify")),this._formatBold=new ve("format-bold",()=>this._toggleFormatStyle("bold")),this._formatItalic=new ve("format-italic",()=>this._toggleFormatStyle("italic")),this._formatUnderline=new ve("format-underline",()=>this._toggleFormatStyle("underline")),this._formatStrike=new ve("format-strike",()=>this._toggleFormatStyle("strike")),this._formatIncreaseIndent=new ve("format-indent-increase",()=>this._increaseIndent()),this._formatDecreaseIndent=new ve("format-indent-decrease",()=>this._decreaseIndent()),this._handleEditorChangeEvent=()=>{const he=this._quill.getSelection();if(he){this.disabled=!1;const pe=this._quill.getFormat(he),Se=D.i.toInteger(pe.indent);this._formatSize1.active="small"===pe.size,this._formatSize2.active="normal"===pe.size||!pe.size,this._formatSize3.active="large"===pe.size,this._formatSize4.active="huge"===pe.size,this._alignLeft.active="left"===pe.align||!pe.align,this._alignCenter.active="center"===pe.align,this._alignRight.active="right"===pe.align,this._alignJustify.active="justify"===pe.align,this._formatBold.active=pe.bold,this._formatItalic.active=pe.italic,this._formatUnderline.active=pe.underline,this._formatStrike.active=pe.strike,this._formatIncreaseIndent.disabled=Se>=5,this._formatDecreaseIndent.disabled=Se<=0}else this.disabled=!0}}get hasChanges(){var t;return!!this._quill&&!(0,xe.isEqual)(null===(t=this._quill)||void 0===t?void 0:t.getContents(),this._origin)}ngOnInit(){super.ngOnInit(),this._buildDocumentActions()}ngOnDestroy(){this._offEditorChangeEvent(),super.ngOnDestroy()}_onHierarchyChange(){this._getManuscript()}_onManuallySaved(){this._origin=this._quill.getContents()}_saveChanges(t,u){this.manuscript.content=this._quill.getContents();const S=this.manuscriptStoreService.updateManuscript(this.manuscript),q=(0,l.D)(S).subscribe({next:()=>t(),error:K=>u(K)});this.subscriptionService.store("_saveChanges",q)}_buildDocumentActions(){this.actions=[[this._formatSize1,this._formatSize2,this._formatSize3,this._formatSize4],[this._alignLeft,this._alignCenter,this._alignRight,this._alignJustify],[this._formatBold,this._formatItalic,this._formatUnderline,this._formatStrike],[this._formatIncreaseIndent,this._formatDecreaseIndent]]}_getManuscript(){const t=this.manuscriptStoreService.getManuscriptByHierarchy(this._hierarchy),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{this.manuscript=S,this.changeDetectorRef.detectChanges(),this._initQuill(),this._onEditorChangeEvent()},error:S=>{console.error(S),this.toastService.open({message:"\uc6d0\uace0\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getManuscript",u),this.loadingCoverService.showLoading=!0}_initQuill(){this._quill=new(me())(this.contentRef.nativeElement,{placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",scrollingContainer:this.containerRef.nativeElement,formats:["bold","italic","font","size","strike","underline","indent","align"]}),this.manuscript.content&&(this._quill.setContents(this.manuscript.content),this._origin=this._quill.getContents())}_onEditorChangeEvent(){this._quill.on("editor-change",this._handleEditorChangeEvent)}_offEditorChangeEvent(){this._quill.off("editor-change",this._handleEditorChangeEvent)}_setFontSize(t){this._quill.format("size",t)}_setAlign(t){this._quill.format("align",t)}_toggleFormatStyle(t){const u=this._quill.getFormat();u&&this._quill.format(t,!u[t])}_increaseIndent(){const t=this._getCurrentIndent();t<5&&this._quill.format("indent",t+1)}_decreaseIndent(){const t=this._getCurrentIndent();t>0&&this._quill.format("indent",t-1)}_getCurrentIndent(){let t=0;const u=this._quill.getFormat();return u&&(t=D.i.toInteger(u.indent)),t}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(O.k),e.Y36(n.Z),e.Y36(P.F),e.Y36(e.Qsj),e.Y36(e.sBO),e.Y36(c.x),e.Y36(rt.j))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-manuscript"]],viewQuery:function(t,u){if(1&t&&(e.Gf(st,5),e.Gf(ct,5)),2&t){let S;e.iGM(S=e.CRH())&&(u.contentRef=S.first),e.iGM(S=e.CRH())&&(u.containerRef=S.first)}},features:[e._Bn([P.F]),e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"actions","disabled","hasChanges","save"],[1,"ww-body"],["container",""],["spellcheck","false",1,"ww-content"],["content",""]],template:function(t,u){1&t&&e.YNc(0,ut,6,5,"ng-container",0),2&t&&e.Q6J("ngIf",u.manuscript)},directives:[v.O5,Pe],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}.ww-body[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow:auto}.ww-content[_ngcontent-%COMP%]{box-sizing:border-box;padding:30px 0;width:calc(100% - 20px);margin:0 auto;min-height:100%;color:#fff}.ql-clipboard[_ngcontent-%COMP%]{display:none}.ww-light-theme   [_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{color:#313335}"]}),p})();const qe="ajfoi12johnvi";let Me=(()=>{class p{constructor(){}setToLocal(t,u){const S=JSON.stringify(u);localStorage.setItem(t,S)}getFromLocal(t){const u=localStorage.getItem(t);if(u)return JSON.parse(u)}setToSession(t,u){const S=JSON.stringify(u);sessionStorage.setItem(t,S)}getFromSession(t){const u=sessionStorage.getItem(t);if(u)return JSON.parse(u)}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),Be=(()=>{class p extends ge{constructor(t,u,S,q){super(t,u,S),this.toastService=t,this.projectSettingsService=u,this.subscriptionService=S,this.storageService=q,this.view="left",this.actions=[],this._viewLeft=new ve("view-left",()=>this._setSplitView("left")),this._viewRight=new ve("view-right",()=>this._setSplitView("right")),this._viewBoth=new ve("view-both",()=>this._setSplitView("both"))}get showLeft(){return"left"===this.view||"both"===this.view}get showRight(){return"right"===this.view||"both"===this.view}ngOnInit(){super.ngOnInit();const t=this.storageService.getFromSession(qe);this._setSplitView(t||"left"),this._checkBrowserWidth()}onWindowResize(){this._checkBrowserWidth()}_checkBrowserWidth(){const u=window.innerWidth>1024?"pc":"mobile";u!==this._lastViewPort&&(this._buildDocumentActions(),this._setSplitViewByBrowserWidth()),this._lastViewPort=u}_buildDocumentActions(){this.actions=window.innerWidth>1024?[[this._viewLeft,this._viewRight,this._viewBoth]]:[[this._viewLeft,this._viewRight]]}_setSplitViewByBrowserWidth(){window.innerWidth<=1024&&"both"===this.view&&this._setSplitView("left")}_setSplitView(t){this.view=t,this._viewLeft.active="left"===this.view,this._viewRight.active="right"===this.view,this._viewBoth.active="both"===this.view,this.storageService.setToSession(qe,t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(O.k),e.Y36(n.Z),e.Y36(P.F),e.Y36(Me))},p.\u0275dir=e.lG2({type:p,selectors:[["","appSplitViewDocumentContainer",""]],hostVars:1,hostBindings:function(t,u){1&t&&e.NdJ("resize",function(){return u.onWindowResize()},!1,e.Jf7),2&t&&e.uIk("ww-view",u.view)},features:[e.qOj]}),p})();var je=y(3713),be=y(2382);let De=(()=>{class p{constructor(){this.contentChange=new e.vpe}ngOnInit(){}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-text-editor"]],inputs:{header:"header",name:"name",label:"label",content:"content"},outputs:{contentChange:"contentChange"},decls:7,vars:4,consts:[[1,"ww-flex","ww-header"],[1,"ww-flex","ww-name"],[1,"ww-flex","ww-label"],["placeholder","\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.","spellcheck","false",3,"ngModel","ngModelChange"]],template:function(t,u){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._uU(5),e.qZA(),e.TgZ(6,"textarea",3),e.NdJ("ngModelChange",function(q){return u.contentChange.emit(q)}),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",u.header,"\n"),e.xp6(2),e.hij(" ",u.name,"\n"),e.xp6(2),e.hij(" ",u.label,"\n"),e.xp6(1),e.Q6J("ngModel",u.content))},directives:[be.Fj,be.JJ,be.On],styles:['[_nghost-%COMP%]{display:block;overflow:auto}.ww-flex[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;box-sizing:border-box;padding:0 20px}.ww-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-header[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:20px;font-weight:400;color:#fff;height:70px}.ww-name[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:18px;font-weight:400;color:#fff;height:60px}.ww-label[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:400;color:#fff;height:40px}textarea[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px 20px;width:100%;height:calc(100% - 170px);font-size:14px;font-weight:400;line-height:1.8em;color:#fff;resize:none;display:block}textarea[_ngcontent-%COMP%]::placeholder{font-size:14px;font-weight:300;line-height:1.8em;color:#ffffff80}.ww-light-theme   [_nghost-%COMP%]   .ww-header[_ngcontent-%COMP%], .ww-light-theme   [_nghost-%COMP%]   .ww-name[_ngcontent-%COMP%], .ww-light-theme   [_nghost-%COMP%]   .ww-label[_ngcontent-%COMP%]{color:#4e91d5}.ww-light-theme   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{font-size:14px;font-weight:300;line-height:1.8em;color:#31333580}.noto-sans   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif}.noto-serif   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:"Noto Serif KR",serif}.nanum-gothic   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:Nanum Gothic,sans-serif}.nanum-myeongjo   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:Nanum Myeongjo,serif}']}),p})();var Fe=y(91),ht=y(1332),dt=y(9148);function pt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(2).onOptionClicked(q)}),e._uU(1),e.qZA()}if(2&p){const t=L.$implicit,u=e.oxw(2);e.ekj("ww-selected",u.selectedAction===t),e.xp6(1),e.hij(" ",t.label," ")}}function gt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"div",5,6),e.NdJ("autoClose",function(){return e.CHM(t),e.oxw().opened=!1}),e.YNc(2,pt,2,3,"div",7),e.qZA()}if(2&p){const t=e.MAs(1),u=e.oxw(),S=e.MAs(1),q=e.MAs(2);e.Q6J("closeOnScroll",!0)("closerButton",S)("closerContainer",t)("positionContainer",q)("width",190),e.xp6(2),e.Q6J("ngForOf",u.options)}}class Ae extends Fe.B{constructor(L,t,u){super(L,t),this.editable=!1,this.editable=u}}let vt=(()=>{class p{constructor(){this.options=[],this.selectedActionChange=new e.vpe,this.opened=!1}ngOnInit(){}onOptionClicked(t){this.selectedAction!==t&&this.selectedActionChange.emit(t),this.opened=!1}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-relation-view-actions"]],inputs:{options:"options",selectedAction:"selectedAction"},outputs:{selectedActionChange:"selectedActionChange"},decls:7,vars:4,consts:[[1,"ww-flex",3,"click"],["closerButton","","positionContainer",""],[1,"ww-label"],["color","white","name","chevron-down"],["appAutoCloser","","appAutoPositioner","","class","ww-options","horizontalBindPosition","inside","horizontalPriority","left","verticalBindPosition","outside","verticalPriority","bottom",3,"closeOnScroll","closerButton","closerContainer","positionContainer","width","autoClose",4,"ngIf"],["appAutoCloser","","appAutoPositioner","","horizontalBindPosition","inside","horizontalPriority","left","verticalBindPosition","outside","verticalPriority","bottom",1,"ww-options",3,"closeOnScroll","closerButton","closerContainer","positionContainer","width","autoClose"],["closerContainer",""],["class","ww-option",3,"ww-selected","click",4,"ngFor","ngForOf"],[1,"ww-option",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(){return u.opened=!u.opened}),e.TgZ(3,"div",2),e._uU(4),e.qZA(),e._UZ(5,"app-icon-button",3),e.qZA(),e.YNc(6,gt,3,6,"div",4)),2&t&&(e.xp6(4),e.hij(" ",null==u.selectedAction?null:u.selectedAction.label," "),e.xp6(1),e.ekj("ww-opened",u.opened),e.xp6(1),e.Q6J("ngIf",u.opened))},directives:[Z.r,v.O5,ht.X,dt.$,v.sg],styles:["[_nghost-%COMP%]{display:block}.ww-flex[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;cursor:pointer;-webkit-user-select:none;user-select:none}.ww-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-label[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:20px;font-weight:400;color:#fff}app-icon-button[_ngcontent-%COMP%]{width:24px;height:24px;margin-left:10px}app-icon-button.ww-opened[_ngcontent-%COMP%]{transform:rotate(180deg)}.ww-options[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px 0;position:fixed;box-shadow:0 3px 6px #00000080;background-color:#313335;transform:translateY(10px)}.ww-option[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;box-sizing:border-box;padding:15px;font-size:14px;font-weight:400;cursor:pointer;-webkit-user-select:none;user-select:none;color:#fff}.ww-option[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-option[_ngcontent-%COMP%]:hover{background-color:#66696c}.ww-option[_ngcontent-%COMP%]:active{background-color:#737579}.ww-option.ww-selected[_ngcontent-%COMP%]{background-color:#6f86c5}.ww-light-theme   [_nghost-%COMP%]   .ww-label[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   .ww-options[_ngcontent-%COMP%]{background-color:#fff}.ww-light-theme   [_nghost-%COMP%]   .ww-option[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   .ww-option[_ngcontent-%COMP%]:not(.ww-selected):hover{background-color:#f2f2f2}.ww-light-theme   [_nghost-%COMP%]   .ww-option[_ngcontent-%COMP%]:not(.ww-selected):active{background-color:#e6e6e6}.ww-light-theme   [_nghost-%COMP%]   .ww-option.ww-selected[_ngcontent-%COMP%]{color:#fff;background-color:#4e91d5}"]}),p})();var yt=y(3084);class Ze{static getTargetLabel(L){switch(L){case"character":return"\uc778\ubb3c";case"place":return"\uc7a5\uc18c";case"episode":return"\uc0ac\uac74"}}static getTargetInvalidMessage(L){switch(L){case"character":return"\uc778\ubb3c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694";case"place":return"\uc7a5\uc18c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694";case"episode":return"\uc0ac\uac74\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"}}}var ye=y(5861),mt=y(9105),ke=y(8710),_t=y(4464),bt=y(2219),Ue=y(5863),ze=y(9017),Ye=y(5521),Je=y(2392),Ve=y(6403),Qe=y(853);let $e=(()=>{class p{constructor(t,u,S,q,K,W,oe,he,pe){this.dbService=t,this.hierarchyStoreService=u,this.characterStoreService=S,this.placeStoreService=q,this.episodeStoreService=K,this.characterByCharacterRelationStoreService=W,this.characterByPlaceRelationStoreService=oe,this.episodeByCharacterRelationStoreService=he,this.episodeByPlaceRelationStoreService=pe}getAllCharactersByProjectId(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u._getSortedHierarchiesByProjectId(t,"character")).map(function(){var K=(0,ye.Z)(function*(W){return yield u.characterStoreService.getCharacterByHierarchy(W)});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getAllPlacesByProjectId(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u._getSortedHierarchiesByProjectId(t,"place")).map(function(){var K=(0,ye.Z)(function*(W){return yield u.placeStoreService.getPlaceByHierarchy(W)});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getCharacterByCharacterRelationById(t){var u=this;return(0,ye.Z)(function*(){const S=yield u.characterByCharacterRelationStoreService.getRelationById(t);return S.from=yield u.characterStoreService.getCharacterById(S.fromCharacterId),S.to=yield u.characterStoreService.getCharacterById(S.toCharacterId),S})()}getCharacterByPlaceRelationById(t){var u=this;return(0,ye.Z)(function*(){const S=yield u.characterByPlaceRelationStoreService.getRelationById(t);return S.character=yield u.characterStoreService.getCharacterById(S.characterId),S.place=yield u.placeStoreService.getPlaceById(S.placeId),S})()}getEpisodeByCharacterRelationById(t){var u=this;return(0,ye.Z)(function*(){const S=yield u.episodeByCharacterRelationStoreService.getRelationById(t);return S.character=yield u.characterStoreService.getCharacterById(S.characterId),S.episode=yield u.episodeStoreService.getEpisodeById(S.episodeId),S})()}getEpisodeByPlaceRelationById(t){var u=this;return(0,ye.Z)(function*(){const S=yield u.episodeByPlaceRelationStoreService.getRelationById(t);return S.episode=yield u.episodeStoreService.getEpisodeById(S.episodeId),S.place=yield u.placeStoreService.getPlaceById(S.placeId),S})()}getCharacterByCharacterRelationsByFromCharacter(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.characterByCharacterRelationStoreService.getRelationsByFromCharacter(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.from=yield u.characterStoreService.getCharacterById(W.fromCharacterId),W.to=yield u.characterStoreService.getCharacterById(W.toCharacterId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getCharacterByPlaceRelationsByCharacter(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.characterByPlaceRelationStoreService.getRelationsByCharacter(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.character=yield u.characterStoreService.getCharacterById(W.characterId),W.place=yield u.placeStoreService.getPlaceById(W.placeId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getCharacterByPlaceRelationsByPlace(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.characterByPlaceRelationStoreService.getRelationsByPlace(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.character=yield u.characterStoreService.getCharacterById(W.characterId),W.place=yield u.placeStoreService.getPlaceById(W.placeId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getEpisodeByCharacterRelationsByEpisode(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.episodeByCharacterRelationStoreService.getRelationsByEpisode(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.character=yield u.characterStoreService.getCharacterById(W.characterId),W.episode=yield u.episodeStoreService.getEpisodeById(W.episodeId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getEpisodeByPlaceRelationsByEpisode(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.episodeByPlaceRelationStoreService.getRelationsByEpisode(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.episode=yield u.episodeStoreService.getEpisodeById(W.episodeId),W.place=yield u.placeStoreService.getPlaceById(W.placeId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getEpisodeByCharacterRelationsByCharacter(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.episodeByCharacterRelationStoreService.getRelationsByCharacter(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.character=yield u.characterStoreService.getCharacterById(W.characterId),W.episode=yield u.episodeStoreService.getEpisodeById(W.episodeId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}getEpisodeByPlaceRelationsByPlace(t){var u=this;return(0,ye.Z)(function*(){const q=(yield u.episodeByPlaceRelationStoreService.getRelationsByPlace(t)).map(function(){var K=(0,ye.Z)(function*(W){return W.episode=yield u.episodeStoreService.getEpisodeById(W.episodeId),W.place=yield u.placeStoreService.getPlaceById(W.placeId),W});return function(W){return K.apply(this,arguments)}}());return yield Promise.all(q)})()}deleteRelation(t,u,S){var q=this;return(0,ye.Z)(function*(){let K,W=q.dbService.db.transaction([q.characterByCharacterRelationStoreService.storeName,q.characterByPlaceRelationStoreService.storeName,q.episodeByCharacterRelationStoreService.storeName,q.episodeByPlaceRelationStoreService.storeName],"readwrite");if("character"===t&&"character"===u)K=ke.A.deleteWithTransaction(W,q.characterByCharacterRelationStoreService.storeName,S.id);else if("character"===t&&"place"===u)K=ke.A.deleteWithTransaction(W,q.characterByPlaceRelationStoreService.storeName,S.id);else if("episode"===t&&"character"===u)K=ke.A.deleteWithTransaction(W,q.episodeByCharacterRelationStoreService.storeName,S.id);else{if("episode"!==t||"place"!==u)throw new Error("Invalid relation");K=ke.A.deleteWithTransaction(W,q.episodeByPlaceRelationStoreService.storeName,S.id)}yield(0,_t.n)(K)})()}_getSortedHierarchiesByProjectId(t,u){var S=this;return(0,ye.Z)(function*(){const q=yield S.hierarchyStoreService.getAllByProjectIdAndType(t,u),K=mt.o.sortMethodWithOrderByColumn({property:"name",order:"asc",type:"string"});return q.sort(K),q})()}}return p.\u0275fac=function(t){return new(t||p)(e.LFG(bt.M),e.LFG(d.F),e.LFG(je.L),e.LFG(Ue.d),e.LFG(ze.q),e.LFG(Ye.a),e.LFG(Je.U),e.LFG(Ve.U),e.LFG(Qe.w))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();var wt=y(8402),Ct=y(9125),Ot=y(4377);let We=(()=>{class p{constructor(t,u,S,q,K,W,oe,he,pe,Se){this.modalRef=t,this.data=u,this.toastService=S,this.loadingCoverService=q,this.relationJointStoreService=K,this.characterByCharacterRelationStoreService=W,this.characterByPlaceRelationStoreService=oe,this.episodeByCharacterRelationStoreService=he,this.episodeByPlaceRelationStoreService=pe,this.subscriptionService=Se,this.options=[],this.target=new be.NI("",be.kI.required),this.relation=new be.NI("",yt.g.textRequired),this.memo=new be.NI(""),this.formGroup=new be.cw({target:this.target,relation:this.relation,memo:this.memo}),this._characters=[],this._places=[]}get valid(){return this.formGroup.markAllAsTouched(),this.formGroup.valid}get isCharacterByCharacter(){return"character"===this.data.from&&"character"===this.data.to}get isCharacterByPlace(){return"character"===this.data.from&&"place"===this.data.to}get isEpisodeByCharacter(){return"episode"===this.data.from&&"character"===this.data.to}get isEpisodeByPlace(){return"episode"===this.data.from&&"place"===this.data.to}get targetModelId(){if(this.isCharacterByCharacter)return this.data.relation.toCharacterId;if(this.isCharacterByPlace)return this.data.relation.placeId;if(this.isEpisodeByCharacter)return this.data.relation.characterId;if(this.isEpisodeByPlace)return this.data.relation.placeId;throw new Error(`Invalid relation type from: '${this.data.from}' to: '${this.data.to}'`)}ngOnInit(){this._setStaticMessages(),this._subscribeTargetValueChanges(),this._getOptions()}close(t){this.modalRef.close(t)}onSubmit(){this.valid?this._onFormValidSubmit():this._onFormInvalidSubmit()}_setStaticMessages(){this.targetLabel=Ze.getTargetLabel(this.data.to),this._targetInvalidMessage=Ze.getTargetInvalidMessage(this.data.to)}_getOptions(){switch(this.data.to){case"character":this._getAllCharacters();break;case"place":this._getAllPlaces();break;default:console.error(`Invalid relation type to '${this.data.to}'`),this.toastService.open({message:"\uad00\uacc4 \uc815\ubcf4 \uc624\ub958\ub85c \uc778\ud574 \uc124\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error}),this.close()}}_getAllCharacters(){const t=this.relationJointStoreService.getAllCharactersByProjectId(this.data.projectId),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{this._characters=S,this._createOptions(S),this._prefillFormValues()},error:S=>{console.error(S),this.toastService.open({message:"\uc778\ubb3c \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getAllCharacters",u),this.loadingCoverService.showLoading=!0}_getAllPlaces(){const t=this.relationJointStoreService.getAllPlacesByProjectId(this.data.projectId),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{this._places=S,this._createOptions(S),this._prefillFormValues()},error:S=>{console.error(S),this.toastService.open({message:"\uc7a5\uc18c \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getAllPlaces",u),this.loadingCoverService.showLoading=!0}_createOptions(t){this.options=t.filter(u=>u.id!==this.data.fromModel.id).map(u=>new Fe.B(u.name,u.id))}_prefillFormValues(){var t,u;if("edit"===this.data.mode)try{this.formGroup.setValue({target:this.targetModelId||"",relation:(null===(t=this.data.relation)||void 0===t?void 0:t.relation)||"",memo:(null===(u=this.data.relation)||void 0===u?void 0:u.memo)||""})}catch(S){console.error(S),this.toastService.open({message:"\uad00\uacc4 \uc815\ubcf4 \uc624\ub958\ub85c \uc778\ud574 \uc218\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error}),this.close()}}_subscribeTargetValueChanges(){const t=this.target.valueChanges.subscribe(()=>{this._onTargetValueChange()});this.subscriptionService.store("_subscribeTargetValueChanges",t)}_onTargetValueChange(){switch(this.data.to){case"character":this._setTargetModel(this._characters);break;case"place":this._setTargetModel(this._places)}}_setTargetModel(t){this._targetModel=t.find(u=>u.id===this.target.value)}_onFormValidSubmit(){"create"===this.data.mode?this._createRelation():this._updateRelation()}_createRelation(){this.isCharacterByCharacter?this._createCharacterByCharacterRelation():this.isCharacterByPlace?this._createCharacterByPlaceRelation():this.isEpisodeByCharacter?this._createEpisodeByCharacterRelation():this.isEpisodeByPlace?this._createEpisodeByPlaceRelation():this._handleInvalidRelationTypeError()}_createCharacterByCharacterRelation(){const K=this.characterByCharacterRelationStoreService.addRelation(this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),W=(0,l.D)(K).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:oe=>this._handleCreateRelationSuccess(oe),error:oe=>this._handleCreateRelationError(oe)});this.subscriptionService.store("_createCharacterByCharacterRelation",W),this.loadingCoverService.showLoading=!0}_createCharacterByPlaceRelation(){const K=this.characterByPlaceRelationStoreService.addRelation(this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),W=(0,l.D)(K).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:oe=>this._handleCreateRelationSuccess(oe),error:oe=>this._handleCreateRelationError(oe)});this.subscriptionService.store("_createCharacterByPlaceRelation",W),this.loadingCoverService.showLoading=!0}_createEpisodeByCharacterRelation(){const K=this.episodeByCharacterRelationStoreService.addRelation(this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),W=(0,l.D)(K).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:oe=>this._handleCreateRelationSuccess(oe),error:oe=>this._handleCreateRelationError(oe)});this.subscriptionService.store("_createEpisodeByCharacterRelation",W),this.loadingCoverService.showLoading=!0}_createEpisodeByPlaceRelation(){const K=this.episodeByPlaceRelationStoreService.addRelation(this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),W=(0,l.D)(K).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:oe=>this._handleCreateRelationSuccess(oe),error:oe=>this._handleCreateRelationError(oe)});this.subscriptionService.store("_createEpisodeByPlaceRelation",W),this.loadingCoverService.showLoading=!0}_handleCreateRelationSuccess(t){this.toastService.open({message:"\uad00\uacc4\uac00 \uc124\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}),this._getSavedRelationById(t.id)}_handleCreateRelationError(t){console.error(t),this.toastService.open({message:"\uad00\uacc4\ub97c \uc124\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}_updateRelation(){this.isCharacterByCharacter?this._updateCharacterByCharacterRelation():this.isCharacterByPlace?this._updateCharacterByPlaceRelation():this.isEpisodeByCharacter?this._updateEpisodeByCharacterRelation():this.isEpisodeByPlace?this._updateEpisodeByPlaceRelation():this._handleInvalidRelationTypeError()}_updateCharacterByCharacterRelation(){const W=this.characterByCharacterRelationStoreService.updateRelation(this.data.relation,this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),oe=(0,l.D)(W).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:he=>this._handleUpdateRelationSuccess(he),error:he=>this._handleUpdateRelationError(he)});this.subscriptionService.store("_updateCharacterByCharacterRelation",oe),this.loadingCoverService.showLoading=!0}_updateCharacterByPlaceRelation(){const W=this.characterByPlaceRelationStoreService.updateRelation(this.data.relation,this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),oe=(0,l.D)(W).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:he=>this._handleUpdateRelationSuccess(he),error:he=>this._handleUpdateRelationError(he)});this.subscriptionService.store("_updateCharacterByPlaceRelation",oe),this.loadingCoverService.showLoading=!0}_updateEpisodeByCharacterRelation(){const W=this.episodeByCharacterRelationStoreService.updateRelation(this.data.relation,this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),oe=(0,l.D)(W).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:he=>this._handleUpdateRelationSuccess(he),error:he=>this._handleUpdateRelationError(he)});this.subscriptionService.store("_updateEpisodeByCharacterRelation",oe),this.loadingCoverService.showLoading=!0}_updateEpisodeByPlaceRelation(){const W=this.episodeByPlaceRelationStoreService.updateRelation(this.data.relation,this.data.fromModel,this._targetModel,this.relation.value,this.memo.value),oe=(0,l.D)(W).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:he=>this._handleUpdateRelationSuccess(he),error:he=>this._handleUpdateRelationError(he)});this.subscriptionService.store("_updateEpisodeByPlaceRelation",oe),this.loadingCoverService.showLoading=!0}_handleUpdateRelationSuccess(t){this.toastService.open({message:"\uad00\uacc4\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4"}),this._getSavedRelationById(t.id)}_handleUpdateRelationError(t){console.error(t),this.toastService.open({message:"\uad00\uacc4\ub97c \uc218\uc815\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}_handleInvalidRelationTypeError(){console.error(`Invalid relation type from: '${this.data.from}' to: '${this.data.to}'`),this.toastService.open({message:"\uad00\uacc4\ub97c \uc124\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",type:O.p.error})}_onFormInvalidSubmit(){this.target.invalid&&this.toastService.open({message:"\ub300\uc0c1\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694",type:O.p.error}),this.relation.invalid&&this.toastService.open({message:"\uad00\uacc4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",type:O.p.error})}_getSavedRelationById(t){this.isCharacterByCharacter?this._getCharacterByCharacterRelationById(t):this.isCharacterByPlace?this._getCharacterByPlaceRelationById(t):this.isEpisodeByCharacter?this._getEpisodeByCharacterRelationById(t):this.isEpisodeByPlace?this._getEpisodeByPlaceRelationById(t):(console.error(`Invalid relation type from: '${this.data.from}' to: '${this.data.to}'`),this.toastService.open({message:"\uc218\uc815\ub41c \uad00\uacc4 \uc124\uc815\uc744 \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",type:O.p.error}))}_getCharacterByCharacterRelationById(t){const u=this.relationJointStoreService.getCharacterByCharacterRelationById(t),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:q=>this.close(q),error:q=>this._handleGetRelationError(q)});this.subscriptionService.store("_getCharacterByCharacterRelationById",S),this.loadingCoverService.showLoading=!0}_getCharacterByPlaceRelationById(t){const u=this.relationJointStoreService.getCharacterByPlaceRelationById(t),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:q=>this.close(q),error:q=>this._handleGetRelationError(q)});this.subscriptionService.store("_getCharacterByPlaceRelationById",S),this.loadingCoverService.showLoading=!0}_getEpisodeByCharacterRelationById(t){const u=this.relationJointStoreService.getEpisodeByCharacterRelationById(t),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:q=>this.close(q),error:q=>this._handleGetRelationError(q)});this.subscriptionService.store("_getEpisodeByCharacterRelationById",S),this.loadingCoverService.showLoading=!0}_getEpisodeByPlaceRelationById(t){const u=this.relationJointStoreService.getEpisodeByPlaceRelationById(t),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:q=>this.close(q),error:q=>this._handleGetRelationError(q)});this.subscriptionService.store("_getEpisodeByPlaceRelationById",S),this.loadingCoverService.showLoading=!0}_handleGetRelationError(t){console.error(t),this.toastService.open({message:"\uc218\uc815\ub41c \uad00\uacc4 \uc124\uc815\uc744 \uac00\uc838\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv),e.Y36(C.xJ),e.Y36(O.k),e.Y36(c.x),e.Y36($e),e.Y36(Ye.a),e.Y36(Je.U),e.Y36(Ve.U),e.Y36(Qe.w),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-relation-modal"]],features:[e._Bn([P.F])],decls:21,vars:3,consts:[[3,"close"],[3,"formGroup","ngSubmit"],["formControlName","target","placeholder","",3,"options"],["appInput","","formControlName","relation"],["appInput","","formControlName","memo"],["hidden",""],["appFlatButton","",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2," \uad00\uacc4 \uc124\uc815 "),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"form",1),e.NdJ("ngSubmit",function(){return u.onSubmit()}),e.TgZ(5,"app-form-field"),e.TgZ(6,"label"),e._uU(7),e.qZA(),e._UZ(8,"app-select",2),e.qZA(),e.TgZ(9,"app-form-field"),e.TgZ(10,"label"),e._uU(11," \uad00\uacc4 "),e.qZA(),e._UZ(12,"input",3),e.qZA(),e.TgZ(13,"app-form-field"),e.TgZ(14,"label"),e._uU(15," \uba54\ubaa8 "),e.qZA(),e._UZ(16,"textarea",4),e.qZA(),e._UZ(17,"button",5),e.qZA(),e.qZA(),e.TgZ(18,"app-modal-actions"),e.TgZ(19,"button",6),e.NdJ("click",function(){return u.onSubmit()}),e._uU(20," \uc800\uc7a5 "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("formGroup",u.formGroup),e.xp6(3),e.hij(" ",u.targetLabel," "),e.xp6(1),e.Q6J("options",u.options))},directives:[x.O,M.R,b.E,be._Y,be.JL,be.sg,wt.h,Ct.H,be.JJ,be.u,Ot.V,be.Fj,g.I,_.z],styles:["form[_ngcontent-%COMP%]{box-sizing:border-box;padding-top:10px;display:block}app-form-field[_ngcontent-%COMP%] + app-form-field[_ngcontent-%COMP%]{margin-top:10px}textarea[_ngcontent-%COMP%]{box-sizing:border-box;padding:10px;display:block;resize:none;height:100px}"]}),p})(),xt=(()=>{class p{constructor(t){this.modalRef=t}ngOnInit(){}close(t){this.modalRef.close(t)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(C.Rv))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-delete-relation-modal"]],decls:9,vars:0,consts:[[3,"close"],["appAutoFocus","","appFlatButton","","color","chestnut",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"app-modal-container"),e.TgZ(1,"app-modal-header",0),e.NdJ("close",function(){return u.close()}),e._uU(2," \uad00\uacc4 \uc0ad\uc81c "),e.qZA(),e.TgZ(3,"app-modal-content"),e.TgZ(4,"p"),e._uU(5," \uad00\uacc4\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? "),e.qZA(),e.qZA(),e.TgZ(6,"app-modal-actions"),e.TgZ(7,"button",1),e.NdJ("click",function(){return u.close(!0)}),e._uU(8," \uc0ad\uc81c "),e.qZA(),e.qZA(),e.qZA())},directives:[x.O,M.R,b.E,g.I,k.h,_.z],styles:[""]}),p})();function St(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"app-icon-button",5),e.NdJ("click",function(S){return e.CHM(t),e.oxw().onEditClick(S)}),e.qZA(),e.TgZ(2,"app-icon-button",6),e.NdJ("click",function(S){return e.CHM(t),e.oxw().onDeleteClick(S)}),e.qZA(),e.qZA()}}let Et=(()=>{class p{constructor(){this.readOnly=!1,this.edit=new e.vpe,this.delete=new e.vpe}ngOnInit(){}onEditClick(t){m.F$.neutralize(t),this.edit.emit()}onDeleteClick(t){m.F$.neutralize(t),this.delete.emit()}}return p.\u0275fac=function(t){return new(t||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-relation-item"]],inputs:{name:"name",relation:"relation",readOnly:"readOnly"},outputs:{edit:"edit",delete:"delete"},decls:6,vars:3,consts:[[1,"ww-left"],[1,"ww-name"],[1,"ww-relation"],["class","ww-flex",4,"ngIf"],[1,"ww-flex"],["color","white","name","edit",3,"click"],["color","white","name","delete",3,"click"]],template:function(t,u){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,St,3,0,"div",3)),2&t&&(e.xp6(2),e.hij(" ",u.name," "),e.xp6(2),e.hij(" ",u.relation," "),e.xp6(1),e.Q6J("ngIf",!u.readOnly))},directives:[v.O5,Z.r],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;box-sizing:border-box;padding:0 10px;height:70px;border-radius:5px;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}[_nghost-%COMP%]:hover{background-color:#8b8b8b80}[_nghost-%COMP%]:active{background-color:#8b8b8bb3}.ww-left[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:400}.ww-name[_ngcontent-%COMP%]{color:#fff}.ww-relation[_ngcontent-%COMP%]{color:#ffffff80;margin-top:5px}.ww-flex[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.ww-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}app-icon-button[_ngcontent-%COMP%] + app-icon-button[_ngcontent-%COMP%]{margin-left:20px}.ww-light-theme   [_nghost-%COMP%]:hover{background-color:#ffffff80}.ww-light-theme   [_nghost-%COMP%]:active{background-color:#ffffffb3}.ww-light-theme   [_nghost-%COMP%]   .ww-name[_ngcontent-%COMP%]{color:#313335}.ww-light-theme   [_nghost-%COMP%]   .ww-relation[_ngcontent-%COMP%]{color:#31333580}"]}),p})();function Tt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-icon-button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().openCreateRelationModal()}),e.qZA()}}function At(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",9),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.to.hierarchyId)})("delete",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openDeleteRelationModal(q)})("edit",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openUpdateRelationModal(q)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.to.name)("relation",t.relation)}}function Pt(p,L){if(1&p&&(e.ynx(0),e.YNc(1,At,1,2,"app-relation-item",8),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.characterByCharacterRelations)}}function Mt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",9),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.place.hierarchyId)})("delete",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openDeleteRelationModal(q)})("edit",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openUpdateRelationModal(q)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.place.name)("relation",t.relation)}}function kt(p,L){if(1&p&&(e.ynx(0),e.YNc(1,Mt,1,2,"app-relation-item",8),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.characterByPlaceRelations)}}function Rt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",11),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.episode.hierarchyId)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.episode.name)("readOnly",!0)("relation",t.relation)}}function Nt(p,L){if(1&p&&(e.ynx(0),e.YNc(1,Rt,1,3,"app-relation-item",10),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.episodeByCharacterRelations)}}function Bt(p,L){if(1&p&&(e.ynx(0),e.ynx(1,6),e.YNc(2,Pt,2,1,"ng-container",7),e.YNc(3,kt,2,1,"ng-container",7),e.YNc(4,Nt,2,1,"ng-container",7),e.BQk(),e.BQk()),2&p){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.selectedAction?null:t.selectedAction.value),e.xp6(1),e.Q6J("ngSwitchCase","character"),e.xp6(1),e.Q6J("ngSwitchCase","place"),e.xp6(1),e.Q6J("ngSwitchCase","episode")}}function Dt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",11),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.character.hierarchyId)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.character.name)("readOnly",!0)("relation",t.relation)}}function It(p,L){if(1&p&&(e.ynx(0),e.YNc(1,Dt,1,3,"app-relation-item",10),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.characterByPlaceRelations)}}function Lt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",11),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.episode.hierarchyId)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.episode.name)("readOnly",!0)("relation",t.relation)}}function Ht(p,L){if(1&p&&(e.ynx(0),e.YNc(1,Lt,1,3,"app-relation-item",10),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.episodeByPlaceRelations)}}function qt(p,L){if(1&p&&(e.ynx(0),e.ynx(1,6),e.YNc(2,It,2,1,"ng-container",7),e.YNc(3,Ht,2,1,"ng-container",7),e.BQk(),e.BQk()),2&p){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.selectedAction?null:t.selectedAction.value),e.xp6(1),e.Q6J("ngSwitchCase","character"),e.xp6(1),e.Q6J("ngSwitchCase","episode")}}function jt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",9),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.character.hierarchyId)})("delete",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openDeleteRelationModal(q)})("edit",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openUpdateRelationModal(q)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.character.name)("relation",t.relation)}}function Ft(p,L){if(1&p&&(e.ynx(0),e.YNc(1,jt,1,2,"app-relation-item",8),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.episodeByCharacterRelations)}}function Zt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-relation-item",9),e.NdJ("click",function(){const q=e.CHM(t).$implicit;return e.oxw(4).navigateWith(q.place.hierarchyId)})("delete",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openDeleteRelationModal(q)})("edit",function(){const q=e.CHM(t).$implicit;return e.oxw(4).openUpdateRelationModal(q)}),e.qZA()}if(2&p){const t=L.$implicit;e.Q6J("name",t.place.name)("relation",t.relation)}}function Ut(p,L){if(1&p&&(e.ynx(0),e.YNc(1,Zt,1,2,"app-relation-item",8),e.BQk()),2&p){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.episodeByPlaceRelations)}}function zt(p,L){if(1&p&&(e.ynx(0),e.ynx(1,6),e.YNc(2,Ft,2,1,"ng-container",7),e.YNc(3,Ut,2,1,"ng-container",7),e.BQk(),e.BQk()),2&p){const t=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",null==t.selectedAction?null:t.selectedAction.value),e.xp6(1),e.Q6J("ngSwitchCase","character"),e.xp6(1),e.Q6J("ngSwitchCase","place")}}function Yt(p,L){if(1&p&&(e.TgZ(0,"div",5),e.ynx(1,6),e.YNc(2,Bt,5,4,"ng-container",7),e.YNc(3,qt,4,3,"ng-container",7),e.YNc(4,zt,4,3,"ng-container",7),e.BQk(),e.qZA()),2&p){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","character"),e.xp6(1),e.Q6J("ngSwitchCase","place"),e.xp6(1),e.Q6J("ngSwitchCase","episode")}}let Ie=(()=>{class p{constructor(t,u,S,q,K,W,oe,he,pe,Se){this.router=t,this.changeDetectorRef=u,this.activatedRoute=S,this.toastService=q,this.modalService=K,this.loadingCoverService=W,this.hierarchyService=oe,this.hierarchyStoreService=he,this.relationJointStoreService=pe,this.subscriptionService=Se,this.actions=[],this.loading=!1,this._relations=[]}get characterByCharacterRelations(){return this._relations}get characterByPlaceRelations(){return this._relations}get episodeByCharacterRelations(){return this._relations}get episodeByPlaceRelations(){return this._relations}get character(){return this._character}set character(t){this._character=t,this.type="character",this._buildCharacterViewActions(),this._setInitialValue(),this._getRelations()}get place(){return this._place}set place(t){this._place=t,this.type="place",this._buildPlaceViewActions(),this._setInitialValue(),this._getRelations()}get episode(){return this._episode}set episode(t){this._episode=t,this.type="episode",this._buildEpisodeViewActions(),this._setInitialValue(),this._getRelations()}ngOnInit(){this._subscribeActivatedRouteParamMap(),this._subscribeHierarchyChanged()}onSelectedActionChange(t){this.selectedAction=t,this._getRelations()}openCreateRelationModal(){this.modalService.open(We,{data:{from:this.type,to:this.selectedAction.value,fromModel:this._character||this._place||this._episode,projectId:this._projectId,mode:"create"},closeOnNavigating:!0,onClose:t=>{t&&this._relations.push(t)}})}openUpdateRelationModal(t){this.modalService.open(We,{data:{relation:t,from:this.type,to:this.selectedAction.value,fromModel:this._character||this._place||this._episode,projectId:this._projectId,mode:"edit"},closeOnNavigating:!0,onClose:u=>{u&&this._replaceRelation(u)}})}openDeleteRelationModal(t){this.modalService.open(xt,{closeOnNavigating:!0,onClose:u=>{u&&this._deleteRelation(t)}})}navigateWith(t){this.router.navigate(["/writer/project",this._projectId,t]).catch(u=>{console.error(u),this.toastService.open({message:"\ubb38\uc11c\ub97c \uc5f4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:O.p.error})})}_subscribeHierarchyChanged(){const t=this.hierarchyService.subscribeHierarchyChanged(()=>{this._getRelations()});this.subscriptionService.store("_subscribeHierarchyChanged",t)}_replaceRelation(t){const u=this._relations.findIndex(S=>S.id===t.id);-1!==u&&this._relations.splice(u,1,t)}_subscribeActivatedRouteParamMap(){const t=this.activatedRoute.parent.paramMap.subscribe(u=>{const S=u.get("id");S&&(this._projectId=S)});this.subscriptionService.store("_subscribeActivatedRouteParamMap",t)}_buildCharacterViewActions(){this.actions=[new Ae("\uc778\ubb3c \uad00\uacc4 \uc124\uc815","character",!0),new Ae("\uc7a5\uc18c \uad00\uacc4 \uc124\uc815","place",!0),new Ae("\uc0ac\uac74 \uad00\uacc4 \uc870\ud68c","episode",!1)]}_buildPlaceViewActions(){this.actions=[new Ae("\uc778\ubb3c \uad00\uacc4 \uc870\ud68c","character",!1),new Ae("\uc0ac\uac74 \uad00\uacc4 \uc870\ud68c","episode",!1)]}_buildEpisodeViewActions(){this.actions=[new Ae("\uc778\ubb3c \uad00\uacc4 \uc124\uc815","character",!0),new Ae("\uc7a5\uc18c \uad00\uacc4 \uc124\uc815","place",!0)]}_setInitialValue(){this.changeDetectorRef.detectChanges(),this.selectedAction=this.actions[0]}_getRelations(){switch(this.type){case"character":this._getCharacterTypeRelations();break;case"place":this._getPlaceTypeRelations();break;case"episode":this._getEpisodeTypeRelations()}}_getCharacterTypeRelations(){switch(this.selectedAction.value){case"character":this._getCharacterByCharacterRelationsByFromCharacter();break;case"place":this._getCharacterByPlaceRelationsByCharacter();break;case"episode":this._getEpisodeByCharacterRelationsByCharacter()}}_getPlaceTypeRelations(){switch(this.selectedAction.value){case"character":this._getCharacterByPlaceRelationsByPlace();break;case"episode":this._getEpisodeByPlaceRelationsByPlace()}}_getEpisodeTypeRelations(){switch(this.selectedAction.value){case"character":this._getEpisodeByCharacterRelationsByEpisode();break;case"place":this._getEpisodeByPlaceRelationsByEpisode()}}_getCharacterByCharacterRelationsByFromCharacter(){const t=this.relationJointStoreService.getCharacterByCharacterRelationsByFromCharacter(this._character),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getCharacterByCharacterRelationsByFromCharacter",u),this._startGetRelationsLoading()}_getCharacterByPlaceRelationsByCharacter(){const t=this.relationJointStoreService.getCharacterByPlaceRelationsByCharacter(this._character),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getCharacterByPlaceRelationsByCharacter",u),this._startGetRelationsLoading()}_getEpisodeByCharacterRelationsByCharacter(){const t=this.relationJointStoreService.getEpisodeByCharacterRelationsByCharacter(this._character),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getEpisodeByCharacterRelationsByCharacter",u),this._startGetRelationsLoading()}_getCharacterByPlaceRelationsByPlace(){const t=this.relationJointStoreService.getCharacterByPlaceRelationsByPlace(this._place),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getCharacterByPlaceRelationsByPlace",u),this._startGetRelationsLoading()}_getEpisodeByPlaceRelationsByPlace(){const t=this.relationJointStoreService.getEpisodeByPlaceRelationsByPlace(this._place),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getEpisodeByPlaceRelationsByPlace",u),this._startGetRelationsLoading()}_getEpisodeByCharacterRelationsByEpisode(){const t=this.relationJointStoreService.getEpisodeByCharacterRelationsByEpisode(this._episode),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getEpisodeByCharacterRelationsByEpisode",u),this._startGetRelationsLoading()}_getEpisodeByPlaceRelationsByEpisode(){const t=this.relationJointStoreService.getEpisodeByPlaceRelationsByEpisode(this._episode),u=(0,l.D)(t).pipe((0,s.x)(()=>this._stopGetRelationsLoading())).subscribe({next:S=>this._relations=S,error:S=>this._handleGetRelationsError(S)});this.subscriptionService.store("_getEpisodeByPlaceRelationsByEpisode",u),this._startGetRelationsLoading()}_startGetRelationsLoading(){this.loadingCoverService.showLoading=!0,this.loading=!0}_stopGetRelationsLoading(){this.loadingCoverService.showLoading=!1,this.loading=!1}_handleGetRelationsError(t){console.error(t),this.toastService.open({message:"\uad00\uacc4 \uc124\uc815\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}_deleteRelation(t){const u=this.relationJointStoreService.deleteRelation(this.type,this.selectedAction.value,t),S=(0,l.D)(u).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:()=>{this._removeRelationFromList(t),this.toastService.open({message:"\uad00\uacc4\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4"})},error:q=>{console.error(q),this.toastService.open({message:"\uad00\uacc4\ub97c \uc0ad\uc81c\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_deleteRelation",S),this.loadingCoverService.showLoading=!0}_removeRelationFromList(t){this._relations=this._relations.filter(u=>u.id!==t.id)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(B.F0),e.Y36(e.sBO),e.Y36(B.gz),e.Y36(O.k),e.Y36(Y.Z),e.Y36(c.x),e.Y36(i._),e.Y36(d.F),e.Y36($e),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-relation-view"]],inputs:{character:"character",place:"place",episode:"episode"},features:[e._Bn([P.F])],decls:4,vars:4,consts:[[1,"ww-header"],[3,"options","selectedAction","selectedActionChange"],["color","white","name","add",3,"click",4,"ngIf"],["class","ww-content",4,"ngIf"],["color","white","name","add",3,"click"],[1,"ww-content"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"name","relation","click","delete","edit",4,"ngFor","ngForOf"],[3,"name","relation","click","delete","edit"],[3,"name","readOnly","relation","click",4,"ngFor","ngForOf"],[3,"name","readOnly","relation","click"]],template:function(t,u){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"app-relation-view-actions",1),e.NdJ("selectedActionChange",function(q){return u.onSelectedActionChange(q)}),e.qZA(),e.YNc(2,Tt,1,0,"app-icon-button",2),e.qZA(),e.YNc(3,Yt,5,4,"div",3)),2&t&&(e.xp6(1),e.Q6J("options",u.actions)("selectedAction",u.selectedAction),e.xp6(1),e.Q6J("ngIf",null==u.selectedAction?null:u.selectedAction.editable),e.xp6(1),e.Q6J("ngIf",!u.loading))},directives:[vt,v.O5,Z.r,v.RF,v.n9,v.sg,Et],styles:["[_nghost-%COMP%]{display:block;background-color:#5a5c5f}.ww-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;box-sizing:border-box;padding:0 20px;height:70px}.ww-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-content[_ngcontent-%COMP%]{box-sizing:border-box;padding:0 10px;height:calc(100% - 70px);overflow:auto}app-icon-button[_ngcontent-%COMP%]{width:24px;height:24px}.ww-light-theme   [_nghost-%COMP%]{background-color:#f2f2f2}"]}),p})();function Jt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-text-editor",5),e.NdJ("contentChange",function(S){return e.CHM(t),e.oxw(2).character.content=S}),e.qZA()}if(2&p){const t=e.oxw(2);e.Udp("max-width",t.contentWidth),e.Q6J("content",t.character.content)("name",t.character.name)}}function Vt(p,L){if(1&p&&e._UZ(0,"app-relation-view",6),2&p){const t=e.oxw(2);e.Udp("max-width",t.contentWidth),e.Q6J("character",t.character)}}function Qt(p,L){if(1&p){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-document-header",1),e.NdJ("save",function(){return e.CHM(t),e.oxw().onSaveClick()}),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,Jt,1,4,"app-text-editor",3),e.YNc(4,Vt,1,3,"app-relation-view",4),e.qZA(),e.BQk()}if(2&p){const t=e.oxw();e.xp6(1),e.Q6J("actions",t.actions)("hasChanges",t.hasChanges),e.xp6(2),e.Q6J("ngIf",t.showLeft),e.xp6(1),e.Q6J("ngIf",t.showRight)}}let $t=(()=>{class p extends Be{constructor(t,u,S,q,K,W,oe){super(t,S,q,u),this.toastService=t,this.storageService=u,this.projectSettingsService=S,this.subscriptionService=q,this.changeDetectorRef=K,this.loadingCoverService=W,this.characterStoreService=oe}get hasChanges(){return!(0,xe.isEqual)(this.character,this._origin)}_onHierarchyChange(){this._getCharacter()}_onManuallySaved(){this._origin=(0,xe.cloneDeep)(this.character)}_saveChanges(t,u){const S=this.characterStoreService.updateCharacter(this.character),q=(0,l.D)(S).subscribe({next:()=>t(),error:K=>u(K)});this.subscriptionService.store("_saveChanges",q)}_getCharacter(){const t=this.characterStoreService.getCharacterByHierarchy(this._hierarchy),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{this._origin=(0,xe.cloneDeep)(S),this.character=S,this.changeDetectorRef.detectChanges()},error:S=>{console.error(S),this.toastService.open({message:"\uc778\ubb3c\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getCharacter",u),this.loadingCoverService.showLoading=!0}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(O.k),e.Y36(Me),e.Y36(n.Z),e.Y36(P.F),e.Y36(e.sBO),e.Y36(c.x),e.Y36(je.L))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-character"]],features:[e._Bn([P.F]),e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"actions","hasChanges","save"],[1,"ww-body"],["class","ww-content","header","\uc778\ubb3c \uc124\uc815","label","\ud2b9\uc9d5 \ubc0f \ubb18\uc0ac",3,"content","name","max-width","contentChange",4,"ngIf"],["class","ww-content",3,"character","max-width",4,"ngIf"],["header","\uc778\ubb3c \uc124\uc815","label","\ud2b9\uc9d5 \ubc0f \ubb18\uc0ac",1,"ww-content",3,"content","name","contentChange"],[1,"ww-content",3,"character"]],template:function(t,u){1&t&&e.YNc(0,Qt,5,4,"ng-container",0),2&t&&e.Q6J("ngIf",u.character)},directives:[v.O5,Pe,De,Ie],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}[ww-view=both][_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{width:50%;max-width:none!important}[_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{width:100%;margin:0 auto}.ww-body[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:calc(100% - 60px)}.ww-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-content[_ngcontent-%COMP%]{height:100%}",""]}),p})();function Wt(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-text-editor",5),e.NdJ("contentChange",function(S){return e.CHM(t),e.oxw(2).place.content=S}),e.qZA()}if(2&p){const t=e.oxw(2);e.Udp("max-width",t.contentWidth),e.Q6J("content",t.place.content)("name",t.place.name)}}function Gt(p,L){if(1&p&&e._UZ(0,"app-relation-view",6),2&p){const t=e.oxw(2);e.Udp("max-width",t.contentWidth),e.Q6J("place",t.place)}}function Kt(p,L){if(1&p){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-document-header",1),e.NdJ("save",function(){return e.CHM(t),e.oxw().onSaveClick()}),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,Wt,1,4,"app-text-editor",3),e.YNc(4,Gt,1,3,"app-relation-view",4),e.qZA(),e.BQk()}if(2&p){const t=e.oxw();e.xp6(1),e.Q6J("actions",t.actions)("hasChanges",t.hasChanges),e.xp6(2),e.Q6J("ngIf",t.showLeft),e.xp6(1),e.Q6J("ngIf",t.showRight)}}let Xt=(()=>{class p extends Be{constructor(t,u,S,q,K,W,oe){super(t,S,q,u),this.toastService=t,this.storageService=u,this.projectSettingsService=S,this.subscriptionService=q,this.changeDetectorRef=K,this.loadingCoverService=W,this.placeStoreService=oe}get hasChanges(){return!(0,xe.isEqual)(this.place,this._origin)}_onHierarchyChange(){this._getPlace()}_onManuallySaved(){this._origin=(0,xe.cloneDeep)(this.place)}_saveChanges(t,u){const S=this.placeStoreService.updatePlace(this.place),q=(0,l.D)(S).subscribe({next:()=>t(),error:K=>u(K)});this.subscriptionService.store("_saveChanges",q)}_getPlace(){const t=this.placeStoreService.getPlaceByHierarchy(this._hierarchy),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{this._origin=(0,xe.cloneDeep)(S),this.place=S,this.changeDetectorRef.detectChanges()},error:S=>{console.error(S),this.toastService.open({message:"\uc7a5\uc18c\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getPlace",u),this.loadingCoverService.showLoading=!0}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(O.k),e.Y36(Me),e.Y36(n.Z),e.Y36(P.F),e.Y36(e.sBO),e.Y36(c.x),e.Y36(Ue.d))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-place"]],features:[e._Bn([P.F]),e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"actions","hasChanges","save"],[1,"ww-body"],["class","ww-content","header","\uc7a5\uc18c \uc124\uc815","label","\ud2b9\uc9d5 \ubc0f \ubb18\uc0ac",3,"content","name","max-width","contentChange",4,"ngIf"],["class","ww-content",3,"place","max-width",4,"ngIf"],["header","\uc7a5\uc18c \uc124\uc815","label","\ud2b9\uc9d5 \ubc0f \ubb18\uc0ac",1,"ww-content",3,"content","name","contentChange"],[1,"ww-content",3,"place"]],template:function(t,u){1&t&&e.YNc(0,Kt,5,4,"ng-container",0),2&t&&e.Q6J("ngIf",u.place)},directives:[v.O5,Pe,De,Ie],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}[ww-view=both][_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{width:50%;max-width:none!important}[_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{width:100%;margin:0 auto}.ww-body[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:calc(100% - 60px)}.ww-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-content[_ngcontent-%COMP%]{height:100%}",""]}),p})();function en(p,L){if(1&p){const t=e.EpF();e.TgZ(0,"app-text-editor",5),e.NdJ("contentChange",function(S){return e.CHM(t),e.oxw(2).episode.content=S}),e.qZA()}if(2&p){const t=e.oxw(2);e.Udp("max-width",t.contentWidth),e.Q6J("content",t.episode.content)("name",t.episode.name)}}function tn(p,L){if(1&p&&e._UZ(0,"app-relation-view",6),2&p){const t=e.oxw(2);e.Udp("max-width",t.contentWidth),e.Q6J("episode",t.episode)}}function nn(p,L){if(1&p){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-document-header",1),e.NdJ("save",function(){return e.CHM(t),e.oxw().onSaveClick()}),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,en,1,4,"app-text-editor",3),e.YNc(4,tn,1,3,"app-relation-view",4),e.qZA(),e.BQk()}if(2&p){const t=e.oxw();e.xp6(1),e.Q6J("actions",t.actions)("hasChanges",t.hasChanges),e.xp6(2),e.Q6J("ngIf",t.showLeft),e.xp6(1),e.Q6J("ngIf",t.showRight)}}let rn=(()=>{class p extends Be{constructor(t,u,S,q,K,W,oe){super(t,S,q,u),this.toastService=t,this.storageService=u,this.projectSettingsService=S,this.subscriptionService=q,this.changeDetectorRef=K,this.loadingCoverService=W,this.episodeStoreService=oe}get hasChanges(){return!(0,xe.isEqual)(this.episode,this._origin)}_onHierarchyChange(){this._getEpisode()}_onManuallySaved(){this._origin=(0,xe.cloneDeep)(this.episode)}_saveChanges(t,u){const S=this.episodeStoreService.updateEpisode(this.episode),q=(0,l.D)(S).subscribe({next:()=>t(),error:K=>u(K)});this.subscriptionService.store("_saveChanges",q)}_getEpisode(){const t=this.episodeStoreService.getEpisodeByHierarchy(this._hierarchy),u=(0,l.D)(t).pipe((0,s.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:S=>{this._origin=(0,xe.cloneDeep)(S),this.episode=S,this.changeDetectorRef.detectChanges()},error:S=>{console.error(S),this.toastService.open({message:"\uc0ac\uac74\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getEpisode",u),this.loadingCoverService.showLoading=!0}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(O.k),e.Y36(Me),e.Y36(n.Z),e.Y36(P.F),e.Y36(e.sBO),e.Y36(c.x),e.Y36(ze.q))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-episode"]],features:[e._Bn([P.F]),e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"actions","hasChanges","save"],[1,"ww-body"],["class","ww-content","header","\uc0ac\uac74 \uc124\uc815","label","\ud2b9\uc9d5 \ubc0f \ubb18\uc0ac",3,"content","name","max-width","contentChange",4,"ngIf"],["class","ww-content",3,"episode","max-width",4,"ngIf"],["header","\uc0ac\uac74 \uc124\uc815","label","\ud2b9\uc9d5 \ubc0f \ubb18\uc0ac",1,"ww-content",3,"content","name","contentChange"],[1,"ww-content",3,"episode"]],template:function(t,u){1&t&&e.YNc(0,nn,5,4,"ng-container",0),2&t&&e.Q6J("ngIf",u.episode)},directives:[v.O5,Pe,De,Ie],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}[ww-view=both][_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{width:50%;max-width:none!important}[_nghost-%COMP%]   .ww-content[_ngcontent-%COMP%]{width:100%;margin:0 auto}.ww-body[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;height:calc(100% - 60px)}.ww-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-content[_ngcontent-%COMP%]{height:100%}",""]}),p})();function on(p,L){if(1&p&&e._UZ(0,"app-manuscript",3),2&p){const t=e.oxw(2);e.Q6J("hierarchy",t.openedHierarchy)}}function an(p,L){if(1&p&&e._UZ(0,"app-character",3),2&p){const t=e.oxw(2);e.Q6J("hierarchy",t.openedHierarchy)}}function ln(p,L){if(1&p&&e._UZ(0,"app-place",3),2&p){const t=e.oxw(2);e.Q6J("hierarchy",t.openedHierarchy)}}function sn(p,L){if(1&p&&e._UZ(0,"app-episode",3),2&p){const t=e.oxw(2);e.Q6J("hierarchy",t.openedHierarchy)}}function cn(p,L){if(1&p&&(e.ynx(0),e.ynx(1,1),e.YNc(2,on,1,1,"app-manuscript",2),e.YNc(3,an,1,1,"app-character",2),e.YNc(4,ln,1,1,"app-place",2),e.YNc(5,sn,1,1,"app-episode",2),e.BQk(),e.BQk()),2&p){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.type),e.xp6(1),e.Q6J("ngSwitchCase","manuscript"),e.xp6(1),e.Q6J("ngSwitchCase","character"),e.xp6(1),e.Q6J("ngSwitchCase","place"),e.xp6(1),e.Q6J("ngSwitchCase","episode")}}const un=[{path:":id",component:Oe,children:[{path:":id",component:(()=>{class p{constructor(t,u,S,q,K,W){this.location=t,this.activatedRoute=u,this.toastService=S,this.hierarchyService=q,this.hierarchyStoreService=K,this.subscriptionService=W}get hasOpenedHierarchy(){return!!this.openedHierarchy}get type(){var t;return null===(t=this.openedHierarchy)||void 0===t?void 0:t.type}ngOnInit(){this._subscribeActivatedRouteParamMap()}ngOnDestroy(){this.hierarchyService.closeDocumentHierarchy(),this.openedHierarchy=void 0}_subscribeActivatedRouteParamMap(){const t=this.activatedRoute.paramMap.subscribe(u=>{const S=u.get("id");S&&this._getHierarchy(S)});this.subscriptionService.store("_subscribeActivatedRouteParamMap",t)}_getHierarchy(t){const u=this.hierarchyStoreService.getHierarchyById(t),S=(0,l.D)(u).subscribe({next:q=>{this.hierarchyService.openDocumentHierarchy(q),this.openedHierarchy=q},error:q=>{console.error(q),this.location.back(),this.toastService.open({message:"\ubb38\uc11c\ub97c \uc5ec\ub294 \ub3c4\uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4",type:O.p.error})}});this.subscriptionService.store("_getHierarchy",S)}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(v.Ye),e.Y36(B.gz),e.Y36(O.k),e.Y36(i._),e.Y36(d.F),e.Y36(P.F))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-document"]],features:[e._Bn([P.F])],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngSwitch"],[3,"hierarchy",4,"ngSwitchCase"],[3,"hierarchy"]],template:function(t,u){1&t&&e.YNc(0,cn,6,5,"ng-container",0),2&t&&e.Q6J("ngIf",u.hasOpenedHierarchy)},directives:[v.O5,v.RF,v.n9,ft,$t,Xt,rn],styles:[""]}),p})()}]}];let fn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[B.Bz.forChild(un)],B.Bz]}),p})();var Ge=y(8976),Ke=y(7094),Te=y(6728),Ee=y(4566),Xe=y(4245),Le=y(7980);let hn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Ee.n,Xe.k,Le.N]]}),p})();var Re=y(886);let dn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Ee.n,Re.E]]}),p})(),pn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Le.N,Ee.n]]}),p})(),gn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Ee.n,Re.E]]}),p})(),vn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Le.N,Ee.n]]}),p})(),yn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Re.E,Ee.n]]}),p})(),mn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Ge.v,Ke.Q,hn,dn,pn,gn,vn,yn]]}),p})();var _n=y(1936),bn=y(3457),wn=y(4825),Cn=y(9616);let On=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Ee.n,Xe.k,wn.g,Cn.A,be.u5,be.UX]]}),p})(),xn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Te.z,Ee.n,Re.E]]}),p})(),Sn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,Ke.Q,be.u5,Ge.v,_n.p,bn.T,On,Ee.n,xn]]}),p})();var En=y(7971);let Tn=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[[v.ez,fn,mn,Sn,En.l]]}),p})()},9971:function(He){"undefined"!=typeof self&&self,He.exports=function(z){var y={};function v(B){if(y[B])return y[B].exports;var P=y[B]={i:B,l:!1,exports:{}};return z[B].call(P.exports,P,P.exports,v),P.l=!0,P.exports}return v.m=z,v.c=y,v.d=function(B,P,O){v.o(B,P)||Object.defineProperty(B,P,{configurable:!1,enumerable:!0,get:O})},v.n=function(B){var P=B&&B.__esModule?function(){return B.default}:function(){return B};return v.d(P,"a",P),P},v.o=function(B,P){return Object.prototype.hasOwnProperty.call(B,P)},v.p="",v(v.s=109)}([function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=v(17),P=v(18),O=v(19),w=v(45),m=v(46),e=v(47),c=v(48),n=v(49),r=v(12),f=v(32),l=v(33),s=v(31),a=v(1);y.default={Scope:a.Scope,create:a.create,find:a.find,query:a.query,register:a.register,Container:B.default,Format:P.default,Leaf:O.default,Embed:c.default,Scroll:w.default,Block:e.default,Inline:m.default,Text:n.default,Attributor:{Attribute:r.default,Class:f.default,Style:l.default,Store:s.default}}},function(z,y,v){"use strict";var s,B=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var h in o)o.hasOwnProperty(h)&&(a[h]=o[h])},function(a,o){function h(){this.constructor=a}s(a,o),a.prototype=null===o?Object.create(o):(h.prototype=o.prototype,new h)});Object.defineProperty(y,"__esModule",{value:!0});var P=function(s){function a(o){var h=this;return(h=s.call(this,o="[Parchment] "+o)||this).message=o,h.name=h.constructor.name,h}return B(a,s),a}(Error);y.ParchmentError=P;var c,O={},w={},m={},e={};function f(s,a){var o;if(void 0===a&&(a=c.ANY),"string"==typeof s)o=e[s]||O[s];else if(s instanceof Text||s.nodeType===Node.TEXT_NODE)o=e.text;else if("number"==typeof s)s&c.LEVEL&c.BLOCK?o=e.block:s&c.LEVEL&c.INLINE&&(o=e.inline);else if(s instanceof HTMLElement){var h=(s.getAttribute("class")||"").split(/\s+/);for(var i in h)if(o=w[h[i]])break;o=o||m[s.tagName]}return null==o?null:a&c.LEVEL&o.scope&&a&c.TYPE&o.scope?o:null}y.DATA_KEY="__blot",function(s){s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY"}(c=y.Scope||(y.Scope={})),y.create=function(s,a){var o=f(s);if(null==o)throw new P("Unable to create "+s+" blot");var h=o,i=s instanceof Node||s.nodeType===Node.TEXT_NODE?s:h.create(a);return new h(i,a)},y.find=function r(s,a){return void 0===a&&(a=!1),null==s?null:null!=s[y.DATA_KEY]?s[y.DATA_KEY].blot:a?r(s.parentNode,a):null},y.query=f,y.register=function l(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(s.length>1)return s.map(function(i){return l(i)});var o=s[0];if("string"!=typeof o.blotName&&"string"!=typeof o.attrName)throw new P("Invalid definition");if("abstract"===o.blotName)throw new P("Cannot register abstract class");return e[o.blotName||o.attrName]=o,"string"==typeof o.keyName?O[o.keyName]=o:(null!=o.className&&(w[o.className]=o),null!=o.tagName&&(o.tagName=Array.isArray(o.tagName)?o.tagName.map(function(i){return i.toUpperCase()}):o.tagName.toUpperCase(),(Array.isArray(o.tagName)?o.tagName:[o.tagName]).forEach(function(i){(null==m[i]||null==o.className)&&(m[i]=o)}))),o}},function(z,y,v){var B=v(51),P=v(11),O=v(3),w=v(20),m=String.fromCharCode(0),e=function(c){this.ops=Array.isArray(c)?c:null!=c&&Array.isArray(c.ops)?c.ops:[]};e.prototype.insert=function(c,n){var r={};return 0===c.length?this:(r.insert=c,null!=n&&"object"==typeof n&&Object.keys(n).length>0&&(r.attributes=n),this.push(r))},e.prototype.delete=function(c){return c<=0?this:this.push({delete:c})},e.prototype.retain=function(c,n){if(c<=0)return this;var r={retain:c};return null!=n&&"object"==typeof n&&Object.keys(n).length>0&&(r.attributes=n),this.push(r)},e.prototype.push=function(c){var n=this.ops.length,r=this.ops[n-1];if(c=O(!0,{},c),"object"==typeof r){if("number"==typeof c.delete&&"number"==typeof r.delete)return this.ops[n-1]={delete:r.delete+c.delete},this;if("number"==typeof r.delete&&null!=c.insert&&"object"!=typeof(r=this.ops[(n-=1)-1]))return this.ops.unshift(c),this;if(P(c.attributes,r.attributes)){if("string"==typeof c.insert&&"string"==typeof r.insert)return this.ops[n-1]={insert:r.insert+c.insert},"object"==typeof c.attributes&&(this.ops[n-1].attributes=c.attributes),this;if("number"==typeof c.retain&&"number"==typeof r.retain)return this.ops[n-1]={retain:r.retain+c.retain},"object"==typeof c.attributes&&(this.ops[n-1].attributes=c.attributes),this}}return n===this.ops.length?this.ops.push(c):this.ops.splice(n,0,c),this},e.prototype.chop=function(){var c=this.ops[this.ops.length-1];return c&&c.retain&&!c.attributes&&this.ops.pop(),this},e.prototype.filter=function(c){return this.ops.filter(c)},e.prototype.forEach=function(c){this.ops.forEach(c)},e.prototype.map=function(c){return this.ops.map(c)},e.prototype.partition=function(c){var n=[],r=[];return this.forEach(function(f){(c(f)?n:r).push(f)}),[n,r]},e.prototype.reduce=function(c,n){return this.ops.reduce(c,n)},e.prototype.changeLength=function(){return this.reduce(function(c,n){return n.insert?c+w.length(n):n.delete?c-n.delete:c},0)},e.prototype.length=function(){return this.reduce(function(c,n){return c+w.length(n)},0)},e.prototype.slice=function(c,n){c=c||0,"number"!=typeof n&&(n=1/0);for(var r=[],f=w.iterator(this.ops),l=0;l<n&&f.hasNext();){var s;l<c?s=f.next(c-l):(s=f.next(n-l),r.push(s)),l+=w.length(s)}return new e(r)},e.prototype.compose=function(c){var n=w.iterator(this.ops),r=w.iterator(c.ops),f=[],l=r.peek();if(null!=l&&"number"==typeof l.retain&&null==l.attributes){for(var s=l.retain;"insert"===n.peekType()&&n.peekLength()<=s;)s-=n.peekLength(),f.push(n.next());l.retain-s>0&&r.next(l.retain-s)}for(var a=new e(f);n.hasNext()||r.hasNext();)if("insert"===r.peekType())a.push(r.next());else if("delete"===n.peekType())a.push(n.next());else{var o=Math.min(n.peekLength(),r.peekLength()),h=n.next(o),i=r.next(o);if("number"==typeof i.retain){var d={};"number"==typeof h.retain?d.retain=o:d.insert=h.insert;var T=w.attributes.compose(h.attributes,i.attributes,"number"==typeof h.retain);if(T&&(d.attributes=T),a.push(d),!r.hasNext()&&P(a.ops[a.ops.length-1],d)){var C=new e(n.rest());return a.concat(C).chop()}}else"number"==typeof i.delete&&"number"==typeof h.retain&&a.push(i)}return a.chop()},e.prototype.concat=function(c){var n=new e(this.ops.slice());return c.ops.length>0&&(n.push(c.ops[0]),n.ops=n.ops.concat(c.ops.slice(1))),n},e.prototype.diff=function(c,n){if(this.ops===c.ops)return new e;var r=[this,c].map(function(o){return o.map(function(h){if(null!=h.insert)return"string"==typeof h.insert?h.insert:m;throw new Error("diff() called "+(o===c?"on":"with")+" non-document")}).join("")}),f=new e,l=B(r[0],r[1],n),s=w.iterator(this.ops),a=w.iterator(c.ops);return l.forEach(function(o){for(var h=o[1].length;h>0;){var i=0;switch(o[0]){case B.INSERT:i=Math.min(a.peekLength(),h),f.push(a.next(i));break;case B.DELETE:i=Math.min(h,s.peekLength()),s.next(i),f.delete(i);break;case B.EQUAL:i=Math.min(s.peekLength(),a.peekLength(),h);var d=s.next(i),T=a.next(i);P(d.insert,T.insert)?f.retain(i,w.attributes.diff(d.attributes,T.attributes)):f.push(T).delete(i)}h-=i}}),f.chop()},e.prototype.eachLine=function(c,n){n=n||"\n";for(var r=w.iterator(this.ops),f=new e,l=0;r.hasNext();){if("insert"!==r.peekType())return;var s=r.peek(),a=w.length(s)-r.peekLength(),o="string"==typeof s.insert?s.insert.indexOf(n,a)-a:-1;if(o<0)f.push(r.next());else if(o>0)f.push(r.next(o));else{if(!1===c(f,r.next(1).attributes||{},l))return;l+=1,f=new e}}f.length()>0&&c(f,{},l)},e.prototype.transform=function(c,n){if(n=!!n,"number"==typeof c)return this.transformPosition(c,n);for(var r=w.iterator(this.ops),f=w.iterator(c.ops),l=new e;r.hasNext()||f.hasNext();)if("insert"!==r.peekType()||!n&&"insert"===f.peekType())if("insert"===f.peekType())l.push(f.next());else{var s=Math.min(r.peekLength(),f.peekLength()),a=r.next(s),o=f.next(s);if(a.delete)continue;o.delete?l.push(o):l.retain(s,w.attributes.transform(a.attributes,o.attributes,n))}else l.retain(w.length(r.next()));return l.chop()},e.prototype.transformPosition=function(c,n){n=!!n;for(var r=w.iterator(this.ops),f=0;r.hasNext()&&f<=c;){var l=r.peekLength(),s=r.peekType();r.next(),"delete"!==s?("insert"===s&&(f<c||!n)&&(c+=l),f+=l):c-=Math.min(l,c-f)}return c},z.exports=e},function(z,y){"use strict";var v=Object.prototype.hasOwnProperty,B=Object.prototype.toString,P=Object.defineProperty,O=Object.getOwnPropertyDescriptor,w=function(r){return"function"==typeof Array.isArray?Array.isArray(r):"[object Array]"===B.call(r)},m=function(r){if(!r||"[object Object]"!==B.call(r))return!1;var s,f=v.call(r,"constructor"),l=r.constructor&&r.constructor.prototype&&v.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!f&&!l)return!1;for(s in r);return void 0===s||v.call(r,s)},e=function(r,f){P&&"__proto__"===f.name?P(r,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):r[f.name]=f.newValue},c=function(r,f){if("__proto__"===f){if(!v.call(r,f))return;if(O)return O(r,f).value}return r[f]};z.exports=function n(){var r,f,l,s,a,o,h=arguments[0],i=1,d=arguments.length,T=!1;for("boolean"==typeof h&&(T=h,h=arguments[1]||{},i=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});i<d;++i)if(null!=(r=arguments[i]))for(f in r)l=c(h,f),h!==(s=c(r,f))&&(T&&s&&(m(s)||(a=w(s)))?(a?(a=!1,o=l&&w(l)?l:[]):o=l&&m(l)?l:{},e(h,{name:f,newValue:n(T,o,s)})):void 0!==s&&e(h,{name:f,newValue:s}));return h}},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.BlockEmbed=y.bubbleFormats=void 0;var B=function(){function g(_,A){for(var k=0;k<A.length;k++){var H=A[k];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(_,H.key,H)}}return function(_,A,k){return A&&g(_.prototype,A),k&&g(_,k),_}}(),P=function g(_,A,k){null===_&&(_=Function.prototype);var H=Object.getOwnPropertyDescriptor(_,A);if(void 0===H){var U=Object.getPrototypeOf(_);return null===U?void 0:g(U,A,k)}if("value"in H)return H.value;var J=H.get;return void 0===J?void 0:J.call(k)},w=h(v(3)),e=h(v(2)),n=h(v(0)),f=h(v(16)),s=h(v(6)),o=h(v(7));function h(g){return g&&g.__esModule?g:{default:g}}function i(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}function d(g,_){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?g:_}function T(g,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);g.prototype=Object.create(_&&_.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(g,_):g.__proto__=_)}var x=function(g){function _(){return i(this,_),d(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return T(_,g),B(_,[{key:"attach",value:function(){P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"attach",this).call(this),this.attributes=new n.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new e.default).insert(this.value(),(0,w.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(k,H){var U=n.default.query(k,n.default.Scope.BLOCK_ATTRIBUTE);null!=U&&this.attributes.attribute(U,H)}},{key:"formatAt",value:function(k,H,U,J){this.format(U,J)}},{key:"insertAt",value:function(k,H,U){if("string"==typeof H&&H.endsWith("\n")){var J=n.default.create(M.blotName);this.parent.insertBefore(J,0===k?this:this.next),J.insertAt(0,H.slice(0,-1))}else P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,k,H,U)}}]),_}(n.default.Embed);x.scope=n.default.Scope.BLOCK_BLOT;var M=function(g){function _(A){i(this,_);var k=d(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A));return k.cache={},k}return T(_,g),B(_,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(n.default.Leaf).reduce(function(k,H){return 0===H.length()?k:k.insert(H.value(),b(H))},new e.default).insert("\n",b(this))),this.cache.delta}},{key:"deleteAt",value:function(k,H){P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,k,H),this.cache={}}},{key:"formatAt",value:function(k,H,U,J){H<=0||(n.default.query(U,n.default.Scope.BLOCK)?k+H===this.length()&&this.format(U,J):P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,k,Math.min(H,this.length()-k-1),U,J),this.cache={})}},{key:"insertAt",value:function(k,H,U){if(null!=U)return P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,k,H,U);if(0!==H.length){var J=H.split("\n"),ee=J.shift();ee.length>0&&(k<this.length()-1||null==this.children.tail?P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,Math.min(k,this.length()-1),ee):this.children.tail.insertAt(this.children.tail.length(),ee),this.cache={});var F=this;J.reduce(function(D,E){return(F=F.split(D,!0)).insertAt(0,E),E.length},k+ee.length)}}},{key:"insertBefore",value:function(k,H){var U=this.children.head;P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,k,H),U instanceof f.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(k,H){P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"moveChildren",this).call(this,k,H),this.cache={}}},{key:"optimize",value:function(k){P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,k),this.cache={}}},{key:"path",value:function(k){return P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,k,!0)}},{key:"removeChild",value:function(k){P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"removeChild",this).call(this,k),this.cache={}}},{key:"split",value:function(k){var H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(H&&(0===k||k>=this.length()-1)){var U=this.clone();return 0===k?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}var J=P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"split",this).call(this,k,H);return this.cache={},J}}]),_}(n.default.Block);function b(g){var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==g||("function"==typeof g.formats&&(_=(0,w.default)(_,g.formats())),null==g.parent||"scroll"==g.parent.blotName||g.parent.statics.scope!==g.statics.scope)?_:b(g.parent,_)}M.blotName="block",M.tagName="P",M.defaultChild="break",M.allowedChildren=[s.default,n.default.Embed,o.default],y.bubbleFormats=b,y.BlockEmbed=x,y.default=M},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.overload=y.expandConfig=void 0;var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},P=function(D,E){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function(D,E){var N=[],I=!0,Y=!1,Z=void 0;try{for(var j,R=D[Symbol.iterator]();!(I=(j=R.next()).done)&&(N.push(j.value),!E||N.length!==E);I=!0);}catch(V){Y=!0,Z=V}finally{try{!I&&R.return&&R.return()}finally{if(Y)throw Z}}return N}(D,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")},O=function(){function F(D,E){for(var N=0;N<E.length;N++){var I=E[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(D,I.key,I)}}return function(D,E,N){return E&&F(D.prototype,E),N&&F(D,N),D}}();v(50);var m=b(v(2)),c=b(v(14)),r=b(v(8)),l=b(v(9)),a=b(v(0)),o=v(15),h=b(o),d=b(v(3)),C=b(v(10)),M=b(v(34));function b(F){return F&&F.__esModule?F:{default:F}}function g(F,D,E){return D in F?Object.defineProperty(F,D,{value:E,enumerable:!0,configurable:!0,writable:!0}):F[D]=E,F}function _(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")}var A=(0,C.default)("quill"),k=function(){function F(D){var E=this,N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_(this,F),this.options=H(D,N),this.container=this.options.container,null==this.container)return A.error("Invalid Quill container",D);this.options.debug&&F.debug(this.options.debug);var I=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new r.default,this.scroll=a.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new c.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(r.default.events.EDITOR_CHANGE,function(Z){Z===r.default.events.TEXT_CHANGE&&E.root.classList.toggle("ql-blank",E.editor.isBlank())}),this.emitter.on(r.default.events.SCROLL_UPDATE,function(Z,R){var j=E.selection.lastRange,V=j&&0===j.length?j.index:void 0;U.call(E,function(){return E.editor.update(null,R,V)},Z)});var Y=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+I+"<p><br></p></div>");this.setContents(Y),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return O(F,null,[{key:"debug",value:function(E){!0===E&&(E="log"),C.default.level(E)}},{key:"find",value:function(E){return E.__quill||a.default.find(E)}},{key:"import",value:function(E){return null==this.imports[E]&&A.error("Cannot import "+E+". Are you sure it was registered?"),this.imports[E]}},{key:"register",value:function(E,N){var I=this,Y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof E){var Z=E.attrName||E.blotName;"string"==typeof Z?this.register("formats/"+Z,E,N):Object.keys(E).forEach(function(R){I.register(R,E[R],N)})}else null!=this.imports[E]&&!Y&&A.warn("Overwriting "+E+" with",N),this.imports[E]=N,(E.startsWith("blots/")||E.startsWith("formats/"))&&"abstract"!==N.blotName?a.default.register(N):E.startsWith("modules")&&"function"==typeof N.register&&N.register()}}]),O(F,[{key:"addContainer",value:function(E){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof E){var I=E;(E=document.createElement("div")).classList.add(I)}return this.container.insertBefore(E,N),E}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(E,N,I){var Y=this,Z=J(E,N,I),R=P(Z,4);return U.call(this,function(){return Y.editor.deleteText(E,N)},I=R[3],E=R[0],-1*(N=R[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(E),this.container.classList.toggle("ql-disabled",!E)}},{key:"focus",value:function(){var E=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=E,this.scrollIntoView()}},{key:"format",value:function(E,N){var I=this;return U.call(this,function(){var Z=I.getSelection(!0),R=new m.default;if(null==Z)return R;if(a.default.query(E,a.default.Scope.BLOCK))R=I.editor.formatLine(Z.index,Z.length,g({},E,N));else{if(0===Z.length)return I.selection.format(E,N),R;R=I.editor.formatText(Z.index,Z.length,g({},E,N))}return I.setSelection(Z,r.default.sources.SILENT),R},arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.default.sources.API)}},{key:"formatLine",value:function(E,N,I,Y,Z){var j,R=this,V=J(E,N,I,Y,Z),Q=P(V,4);return N=Q[1],j=Q[2],U.call(this,function(){return R.editor.formatLine(E,N,j)},Z=Q[3],E=Q[0],0)}},{key:"formatText",value:function(E,N,I,Y,Z){var j,R=this,V=J(E,N,I,Y,Z),Q=P(V,4);return N=Q[1],j=Q[2],U.call(this,function(){return R.editor.formatText(E,N,j)},Z=Q[3],E=Q[0],0)}},{key:"getBounds",value:function(E){var I=void 0;I="number"==typeof E?this.selection.getBounds(E,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(E.index,E.length);var Y=this.container.getBoundingClientRect();return{bottom:I.bottom-Y.top,height:I.height,left:I.left-Y.left,right:I.right-Y.left,top:I.top-Y.top,width:I.width}}},{key:"getContents",value:function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-E,I=J(E,N),Y=P(I,2);return this.editor.getContents(E=Y[0],N=Y[1])}},{key:"getFormat",value:function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof E?this.editor.getFormat(E,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(E.index,E.length)}},{key:"getIndex",value:function(E){return E.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(E){return this.scroll.leaf(E)}},{key:"getLine",value:function(E){return this.scroll.line(E)}},{key:"getLines",value:function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof E?this.scroll.lines(E.index,E.length):this.scroll.lines(E,N)}},{key:"getModule",value:function(E){return this.theme.modules[E]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-E,I=J(E,N),Y=P(I,2);return this.editor.getText(E=Y[0],N=Y[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(E,N,I){var Y=this;return U.call(this,function(){return Y.editor.insertEmbed(E,N,I)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.sources.API,E)}},{key:"insertText",value:function(E,N,I,Y,Z){var j,R=this,V=J(E,0,I,Y,Z),Q=P(V,4);return j=Q[2],U.call(this,function(){return R.editor.insertText(E,N,j)},Z=Q[3],E=Q[0],N.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(E,N,I){this.clipboard.dangerouslyPasteHTML(E,N,I)}},{key:"removeFormat",value:function(E,N,I){var Y=this,Z=J(E,N,I),R=P(Z,4);return N=R[1],U.call(this,function(){return Y.editor.removeFormat(E,N)},I=R[3],E=R[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(E){var N=this;return U.call(this,function(){E=new m.default(E);var Y=N.getLength(),Z=N.editor.deleteText(0,Y),R=N.editor.applyDelta(E),j=R.ops[R.ops.length-1];return null!=j&&"string"==typeof j.insert&&"\n"===j.insert[j.insert.length-1]&&(N.editor.deleteText(N.getLength()-1,1),R.delete(1)),Z.compose(R)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.sources.API)}},{key:"setSelection",value:function(E,N,I){if(null==E)this.selection.setRange(null,N||F.sources.API);else{var Y=J(E,N,I),Z=P(Y,4);I=Z[3],this.selection.setRange(new o.Range(E=Z[0],N=Z[1]),I),I!==r.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(E){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.sources.API,I=(new m.default).insert(E);return this.setContents(I,N)}},{key:"update",value:function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.sources.USER,N=this.scroll.update(E);return this.selection.update(E),N}},{key:"updateContents",value:function(E){var N=this,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.sources.API;return U.call(this,function(){return E=new m.default(E),N.editor.applyDelta(E,I)},I,!0)}}]),F}();function H(F,D){if((D=(0,d.default)(!0,{container:F,modules:{clipboard:!0,keyboard:!0,history:!0}},D)).theme&&D.theme!==k.DEFAULTS.theme){if(D.theme=k.import("themes/"+D.theme),null==D.theme)throw new Error("Invalid theme "+D.theme+". Did you register it?")}else D.theme=M.default;var E=(0,d.default)(!0,{},D.theme.DEFAULTS);[E,D].forEach(function(Y){Y.modules=Y.modules||{},Object.keys(Y.modules).forEach(function(Z){!0===Y.modules[Z]&&(Y.modules[Z]={})})});var I=Object.keys(E.modules).concat(Object.keys(D.modules)).reduce(function(Y,Z){var R=k.import("modules/"+Z);return null==R?A.error("Cannot load "+Z+" module. Are you sure you registered it?"):Y[Z]=R.DEFAULTS||{},Y},{});return null!=D.modules&&D.modules.toolbar&&D.modules.toolbar.constructor!==Object&&(D.modules.toolbar={container:D.modules.toolbar}),D=(0,d.default)(!0,{},k.DEFAULTS,{modules:I},E,D),["bounds","container","scrollingContainer"].forEach(function(Y){"string"==typeof D[Y]&&(D[Y]=document.querySelector(D[Y]))}),D.modules=Object.keys(D.modules).reduce(function(Y,Z){return D.modules[Z]&&(Y[Z]=D.modules[Z]),Y},{}),D}function U(F,D,E,N){if(this.options.strict&&!this.isEnabled()&&D===r.default.sources.USER)return new m.default;var I=null==E?null:this.getSelection(),Y=this.editor.delta,Z=F();if(null!=I&&(!0===E&&(E=I.index),null==N?I=ee(I,Z,D):0!==N&&(I=ee(I,E,N,D)),this.setSelection(I,r.default.sources.SILENT)),Z.length()>0){var R,V,j=[r.default.events.TEXT_CHANGE,Z,Y,D];(R=this.emitter).emit.apply(R,[r.default.events.EDITOR_CHANGE].concat(j)),D!==r.default.sources.SILENT&&(V=this.emitter).emit.apply(V,j)}return Z}function J(F,D,E,N,I){var Y={};return"number"==typeof F.index&&"number"==typeof F.length?"number"!=typeof D?(I=N,N=E,E=D,D=F.length,F=F.index):(D=F.length,F=F.index):"number"!=typeof D&&(I=N,N=E,E=D,D=0),"object"===(void 0===E?"undefined":B(E))?(Y=E,I=N):"string"==typeof E&&(null!=N?Y[E]=N:I=E),[F,D,Y,I=I||r.default.sources.API]}function ee(F,D,E,N){if(null==F)return null;var I=void 0,Y=void 0;if(D instanceof m.default){var Z=[F.index,F.index+F.length].map(function(Q){return D.transformPosition(Q,N!==r.default.sources.USER)}),R=P(Z,2);I=R[0],Y=R[1]}else{var j=[F.index,F.index+F.length].map(function(Q){return Q<D||Q===D&&N===r.default.sources.USER?Q:E>=0?Q+E:Math.max(D,Q+E)}),V=P(j,2);I=V[0],Y=V[1]}return new o.Range(I,Y-I)}k.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},k.events=r.default.events,k.sources=r.default.sources,k.version="1.3.7",k.imports={delta:m.default,parchment:a.default,"core/module":l.default,"core/theme":M.default},y.expandConfig=H,y.overload=J,y.default=k},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function s(a,o){for(var h=0;h<o.length;h++){var i=o[h];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,o,h){return o&&s(a.prototype,o),h&&s(a,h),a}}(),P=function s(a,o,h){null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(void 0===i){var d=Object.getPrototypeOf(a);return null===d?void 0:s(d,o,h)}if("value"in i)return i.value;var T=i.get;return void 0===T?void 0:T.call(h)},w=c(v(7)),e=c(v(0));function c(s){return s&&s.__esModule?s:{default:s}}function n(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function r(s,a){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?s:a}var l=function(s){function a(){return n(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(s,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(s,a):s.__proto__=a)}(a,s),B(a,[{key:"formatAt",value:function(h,i,d,T){if(a.compare(this.statics.blotName,d)<0&&e.default.query(d,e.default.Scope.BLOT)){var C=this.isolate(h,i);T&&C.wrap(d,T)}else P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"formatAt",this).call(this,h,i,d,T)}},{key:"optimize",value:function(h){if(P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"optimize",this).call(this,h),this.parent instanceof a&&a.compare(this.statics.blotName,this.parent.statics.blotName)>0){var i=this.parent.isolate(this.offset(),this.length());this.moveChildren(i),i.wrap(this)}}}],[{key:"compare",value:function(h,i){var d=a.order.indexOf(h),T=a.order.indexOf(i);return d>=0||T>=0?d-T:h===i?0:h<i?-1:1}}]),a}(e.default.Inline);l.allowedChildren=[l,e.default.Embed,w.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],y.default=l},function(z,y,v){"use strict";function w(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function m(n,r){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?n:r}Object.defineProperty(y,"__esModule",{value:!0});var n,c=function(n){function r(){return w(this,r),m(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r)}(r,n),r}((n=v(0),n&&n.__esModule?n:{default:n}).default.Text);y.default=c},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function o(h,i){for(var d=0;d<i.length;d++){var T=i[d];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(h,T.key,T)}}return function(h,i,d){return i&&o(h.prototype,i),d&&o(h,d),h}}(),P=function o(h,i,d){null===h&&(h=Function.prototype);var T=Object.getOwnPropertyDescriptor(h,i);if(void 0===T){var C=Object.getPrototypeOf(h);return null===C?void 0:o(C,i,d)}if("value"in T)return T.value;var x=T.get;return void 0===x?void 0:x.call(d)},w=c(v(54));function c(o){return o&&o.__esModule?o:{default:o}}var l=(0,c(v(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(o){document.addEventListener(o,function(){for(var h=arguments.length,i=Array(h),d=0;d<h;d++)i[d]=arguments[d];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(T){var C;T.__quill&&T.__quill.emitter&&(C=T.__quill.emitter).handleDOM.apply(C,i)})})});var a=function(o){function h(){!function(o,h){if(!(o instanceof h))throw new TypeError("Cannot call a class as a function")}(this,h);var i=function(o,h){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||"object"!=typeof h&&"function"!=typeof h?o:h}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this));return i.listeners={},i.on("error",l.error),i}return function(o,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);o.prototype=Object.create(h&&h.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(o,h):o.__proto__=h)}(h,o),B(h,[{key:"emit",value:function(){l.log.apply(l,arguments),P(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(d){for(var T=arguments.length,C=Array(T>1?T-1:0),x=1;x<T;x++)C[x-1]=arguments[x];(this.listeners[d.type]||[]).forEach(function(M){var b=M.node,g=M.handler;(d.target===b||b.contains(d.target))&&g.apply(void 0,[d].concat(C))})}},{key:"listenDOM",value:function(d,T,C){this.listeners[d]||(this.listeners[d]=[]),this.listeners[d].push({node:T,handler:C})}}]),h}(w.default);a.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},a.sources={API:"api",SILENT:"silent",USER:"user"},y.default=a},function(z,y,v){"use strict";function B(O,w){if(!(O instanceof w))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(y,"__esModule",{value:!0});var P=function O(w){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(this,O),this.quill=w,this.options=m};P.DEFAULTS={},y.default=P},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=["error","warn","log","info"],P="warn";function O(m){if(B.indexOf(m)<=B.indexOf(P)){for(var e,c=arguments.length,n=Array(c>1?c-1:0),r=1;r<c;r++)n[r-1]=arguments[r];(e=console)[m].apply(e,n)}}function w(m){return B.reduce(function(e,c){return e[c]=O.bind(console,c,m),e},{})}O.level=w.level=function(m){P=m},y.default=w},function(z,y,v){var B=Array.prototype.slice,P=v(52),O=v(53),w=z.exports=function(n,r,f){return f||(f={}),n===r||(n instanceof Date&&r instanceof Date?n.getTime()===r.getTime():!n||!r||"object"!=typeof n&&"object"!=typeof r?f.strict?n===r:n==r:function(n,r,f){var l,s;if(m(n)||m(r)||n.prototype!==r.prototype)return!1;if(O(n))return!!O(r)&&(n=B.call(n),r=B.call(r),w(n,r,f));if(e(n)){if(!e(r)||n.length!==r.length)return!1;for(l=0;l<n.length;l++)if(n[l]!==r[l])return!1;return!0}try{var a=P(n),o=P(r)}catch(h){return!1}if(a.length!=o.length)return!1;for(a.sort(),o.sort(),l=a.length-1;l>=0;l--)if(a[l]!=o[l])return!1;for(l=a.length-1;l>=0;l--)if(!w(n[s=a[l]],r[s],f))return!1;return typeof n==typeof r}(n,r,f))};function m(n){return null==n}function e(n){return!(!n||"object"!=typeof n||"number"!=typeof n.length||"function"!=typeof n.copy||"function"!=typeof n.slice||n.length>0&&"number"!=typeof n[0])}},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=v(1),P=function(){function O(w,m,e){void 0===e&&(e={}),this.attrName=w,this.keyName=m,this.scope=null!=e.scope?e.scope&B.Scope.LEVEL|B.Scope.TYPE&B.Scope.ATTRIBUTE:B.Scope.ATTRIBUTE,null!=e.whitelist&&(this.whitelist=e.whitelist)}return O.keys=function(w){return[].map.call(w.attributes,function(m){return m.name})},O.prototype.add=function(w,m){return!!this.canAdd(w,m)&&(w.setAttribute(this.keyName,m),!0)},O.prototype.canAdd=function(w,m){return null!=B.query(w,B.Scope.BLOT&(this.scope|B.Scope.TYPE))&&(null==this.whitelist||("string"==typeof m?this.whitelist.indexOf(m.replace(/["']/g,""))>-1:this.whitelist.indexOf(m)>-1))},O.prototype.remove=function(w){w.removeAttribute(this.keyName)},O.prototype.value=function(w){var m=w.getAttribute(this.keyName);return this.canAdd(w,m)&&m?m:""},O}();y.default=P},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.Code=void 0;var B=function(M,b){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function(M,b){var g=[],_=!0,A=!1,k=void 0;try{for(var U,H=M[Symbol.iterator]();!(_=(U=H.next()).done)&&(g.push(U.value),!b||g.length!==b);_=!0);}catch(J){A=!0,k=J}finally{try{!_&&H.return&&H.return()}finally{if(A)throw k}}return g}(M,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function x(M,b){for(var g=0;g<b.length;g++){var _=b[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}return function(M,b,g){return b&&x(M.prototype,b),g&&x(M,g),M}}(),O=function x(M,b,g){null===M&&(M=Function.prototype);var _=Object.getOwnPropertyDescriptor(M,b);if(void 0===_){var A=Object.getPrototypeOf(M);return null===A?void 0:x(A,b,g)}if("value"in _)return _.value;var k=_.get;return void 0===k?void 0:k.call(g)},m=o(v(2)),c=o(v(0)),r=o(v(4)),l=o(v(6)),a=o(v(7));function o(x){return x&&x.__esModule?x:{default:x}}function h(x,M){if(!(x instanceof M))throw new TypeError("Cannot call a class as a function")}function i(x,M){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?x:M}function d(x,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function, not "+typeof M);x.prototype=Object.create(M&&M.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(x,M):x.__proto__=M)}var T=function(x){function M(){return h(this,M),i(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return d(M,x),M}(l.default);T.blotName="code",T.tagName="CODE";var C=function(x){function M(){return h(this,M),i(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return d(M,x),P(M,[{key:"delta",value:function(){var g=this,_=this.domNode.textContent;return _.endsWith("\n")&&(_=_.slice(0,-1)),_.split("\n").reduce(function(A,k){return A.insert(k).insert("\n",g.formats())},new m.default)}},{key:"format",value:function(g,_){if(g!==this.statics.blotName||!_){var A=this.descendant(a.default,this.length()-1),H=B(A,1)[0];null!=H&&H.deleteAt(H.length()-1,1),O(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,g,_)}}},{key:"formatAt",value:function(g,_,A,k){if(0!==_&&null!=c.default.query(A,c.default.Scope.BLOCK)&&(A!==this.statics.blotName||k!==this.statics.formats(this.domNode))){var H=this.newlineIndex(g);if(!(H<0||H>=g+_)){var U=this.newlineIndex(g,!0)+1,J=H-U+1,ee=this.isolate(U,J),F=ee.next;ee.format(A,k),F instanceof M&&F.formatAt(0,g-U+_-J,A,k)}}}},{key:"insertAt",value:function(g,_,A){if(null==A){var k=this.descendant(a.default,g),H=B(k,2);H[0].insertAt(H[1],_)}}},{key:"length",value:function(){var g=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?g:g+1}},{key:"newlineIndex",value:function(g){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,g).lastIndexOf("\n");var A=this.domNode.textContent.slice(g).indexOf("\n");return A>-1?g+A:-1}},{key:"optimize",value:function(g){this.domNode.textContent.endsWith("\n")||this.appendChild(c.default.create("text","\n")),O(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"optimize",this).call(this,g);var _=this.next;null!=_&&_.prev===this&&_.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===_.statics.formats(_.domNode)&&(_.optimize(g),_.moveChildren(this),_.remove())}},{key:"replace",value:function(g){O(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replace",this).call(this,g),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(_){var A=c.default.find(_);null==A?_.parentNode.removeChild(_):A instanceof c.default.Embed?A.remove():A.unwrap()})}}],[{key:"create",value:function(g){var _=O(M.__proto__||Object.getPrototypeOf(M),"create",this).call(this,g);return _.setAttribute("spellcheck",!1),_}},{key:"formats",value:function(){return!0}}]),M}(r.default);C.blotName="code-block",C.tagName="PRE",C.TAB="  ",y.Code=T,y.default=C},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},P=function(D,E){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return function(D,E){var N=[],I=!0,Y=!1,Z=void 0;try{for(var j,R=D[Symbol.iterator]();!(I=(j=R.next()).done)&&(N.push(j.value),!E||N.length!==E);I=!0);}catch(V){Y=!0,Z=V}finally{try{!I&&R.return&&R.return()}finally{if(Y)throw Z}}return N}(D,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")},O=function(){function F(D,E){for(var N=0;N<E.length;N++){var I=E[N];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(D,I.key,I)}}return function(D,E,N){return E&&F(D.prototype,E),N&&F(D,N),D}}(),m=_(v(2)),c=_(v(20)),r=_(v(0)),l=_(v(13)),a=_(v(24)),o=v(4),h=_(o),d=_(v(16)),C=_(v(21)),M=_(v(11)),g=_(v(3));function _(F){return F&&F.__esModule?F:{default:F}}var H=/^[ -~]*$/,U=function(){function F(D){(function(F,D){if(!(F instanceof D))throw new TypeError("Cannot call a class as a function")})(this,F),this.scroll=D,this.delta=this.getDelta()}return O(F,[{key:"applyDelta",value:function(E){var N=this,I=!1;this.scroll.update();var Y=this.scroll.length();return this.scroll.batchStart(),(E=function(F){return F.reduce(function(D,E){if(1===E.insert){var N=(0,C.default)(E.attributes);return delete N.image,D.insert({image:E.attributes.image},N)}if(null!=E.attributes&&(!0===E.attributes.list||!0===E.attributes.bullet)&&((E=(0,C.default)(E)).attributes.list?E.attributes.list="ordered":(E.attributes.list="bullet",delete E.attributes.bullet)),"string"==typeof E.insert){var I=E.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return D.insert(I,E.attributes)}return D.push(E)},new m.default)}(E)).reduce(function(Z,R){var j=R.retain||R.delete||R.insert.length||1,V=R.attributes||{};if(null!=R.insert){if("string"==typeof R.insert){var Q=R.insert;Q.endsWith("\n")&&I&&(I=!1,Q=Q.slice(0,-1)),Z>=Y&&!Q.endsWith("\n")&&(I=!0),N.scroll.insertAt(Z,Q);var X=N.scroll.line(Z),ie=P(X,2),ae=ie[0],le=ie[1],fe=(0,g.default)({},(0,o.bubbleFormats)(ae));if(ae instanceof h.default){var de=ae.descendant(r.default.Leaf,le),we=P(de,1);fe=(0,g.default)(fe,(0,o.bubbleFormats)(we[0]))}V=c.default.attributes.diff(fe,V)||{}}else if("object"===B(R.insert)){var $=Object.keys(R.insert)[0];if(null==$)return Z;N.scroll.insertAt(Z,$,R.insert[$])}Y+=j}return Object.keys(V).forEach(function(G){N.scroll.formatAt(Z,j,G,V[G])}),Z+j},0),E.reduce(function(Z,R){return"number"==typeof R.delete?(N.scroll.deleteAt(Z,R.delete),Z):Z+(R.retain||R.insert.length||1)},0),this.scroll.batchEnd(),this.update(E)}},{key:"deleteText",value:function(E,N){return this.scroll.deleteAt(E,N),this.update((new m.default).retain(E).delete(N))}},{key:"formatLine",value:function(E,N){var I=this,Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(Y).forEach(function(Z){if(null==I.scroll.whitelist||I.scroll.whitelist[Z]){var R=I.scroll.lines(E,Math.max(N,1)),j=N;R.forEach(function(V){var Q=V.length();if(V instanceof l.default){var X=E-V.offset(I.scroll),ie=V.newlineIndex(X+j)-X+1;V.formatAt(X,ie,Z,Y[Z])}else V.format(Z,Y[Z]);j-=Q})}}),this.scroll.optimize(),this.update((new m.default).retain(E).retain(N,(0,C.default)(Y)))}},{key:"formatText",value:function(E,N){var I=this,Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(Y).forEach(function(Z){I.scroll.formatAt(E,N,Z,Y[Z])}),this.update((new m.default).retain(E).retain(N,(0,C.default)(Y)))}},{key:"getContents",value:function(E,N){return this.delta.slice(E,E+N)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(E,N){return E.concat(N.delta())},new m.default)}},{key:"getFormat",value:function(E){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,I=[],Y=[];0===N?this.scroll.path(E).forEach(function(R){var V=P(R,1)[0];V instanceof h.default?I.push(V):V instanceof r.default.Leaf&&Y.push(V)}):(I=this.scroll.lines(E,N),Y=this.scroll.descendants(r.default.Leaf,E,N));var Z=[I,Y].map(function(R){if(0===R.length)return{};for(var j=(0,o.bubbleFormats)(R.shift());Object.keys(j).length>0;){var V=R.shift();if(null==V)return j;j=J((0,o.bubbleFormats)(V),j)}return j});return g.default.apply(g.default,Z)}},{key:"getText",value:function(E,N){return this.getContents(E,N).filter(function(I){return"string"==typeof I.insert}).map(function(I){return I.insert}).join("")}},{key:"insertEmbed",value:function(E,N,I){return this.scroll.insertAt(E,N,I),this.update((new m.default).retain(E).insert(function(F,D,E){return D in F?Object.defineProperty(F,D,{value:E,enumerable:!0,configurable:!0,writable:!0}):F[D]=E,F}({},N,I)))}},{key:"insertText",value:function(E,N){var I=this,Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return N=N.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(E,N),Object.keys(Y).forEach(function(Z){I.scroll.formatAt(E,N.length,Z,Y[Z])}),this.update((new m.default).retain(E).insert(N,(0,C.default)(Y)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var E=this.scroll.children.head;return!(E.statics.blotName!==h.default.blotName||E.children.length>1)&&E.children.head instanceof d.default}},{key:"removeFormat",value:function(E,N){var I=this.getText(E,N),Y=this.scroll.line(E+N),Z=P(Y,2),R=Z[0],j=Z[1],V=0,Q=new m.default;null!=R&&(V=R instanceof l.default?R.newlineIndex(j)-j+1:R.length()-j,Q=R.delta().slice(j,j+V-1).insert("\n"));var ie=this.getContents(E,N+V).diff((new m.default).insert(I).concat(Q)),ae=(new m.default).retain(E).concat(ie);return this.applyDelta(ae)}},{key:"update",value:function(E){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,Y=this.delta;if(1===N.length&&"characterData"===N[0].type&&N[0].target.data.match(H)&&r.default.find(N[0].target)){var Z=r.default.find(N[0].target),R=(0,o.bubbleFormats)(Z),j=Z.offset(this.scroll),V=N[0].oldValue.replace(a.default.CONTENTS,""),Q=(new m.default).insert(V),X=(new m.default).insert(Z.value());E=(new m.default).retain(j).concat(Q.diff(X,I)).reduce(function(ae,le){return le.insert?ae.insert(le.insert,R):ae.push(le)},new m.default),this.delta=Y.compose(E)}else this.delta=this.getDelta(),(!E||!(0,M.default)(Y.compose(E),this.delta))&&(E=Y.diff(this.delta,I));return E}}]),F}();function J(F,D){return Object.keys(D).reduce(function(E,N){return null==F[N]||(D[N]===F[N]?E[N]=D[N]:Array.isArray(D[N])?D[N].indexOf(F[N])<0&&(E[N]=D[N].concat([F[N]])):E[N]=[D[N],F[N]]),E},{})}y.default=U},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.Range=void 0;var B=function(M,b){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function(M,b){var g=[],_=!0,A=!1,k=void 0;try{for(var U,H=M[Symbol.iterator]();!(_=(U=H.next()).done)&&(g.push(U.value),!b||g.length!==b);_=!0);}catch(J){A=!0,k=J}finally{try{!_&&H.return&&H.return()}finally{if(A)throw k}}return g}(M,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function x(M,b){for(var g=0;g<b.length;g++){var _=b[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}return function(M,b,g){return b&&x(M.prototype,b),g&&x(M,g),M}}(),w=a(v(0)),e=a(v(21)),n=a(v(11)),f=a(v(8));function a(x){return x&&x.__esModule?x:{default:x}}function o(x){if(Array.isArray(x)){for(var M=0,b=Array(x.length);M<x.length;M++)b[M]=x[M];return b}return Array.from(x)}function h(x,M){if(!(x instanceof M))throw new TypeError("Cannot call a class as a function")}var i=(0,a(v(10)).default)("quill:selection"),d=function x(M){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,x),this.index=M,this.length=b},T=function(){function x(M,b){var g=this;h(this,x),this.emitter=b,this.scroll=M,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=w.default.create("cursor",this),this.lastRange=this.savedRange=new d(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){g.mouseDown||setTimeout(g.update.bind(g,f.default.sources.USER),1)}),this.emitter.on(f.default.events.EDITOR_CHANGE,function(_,A){_===f.default.events.TEXT_CHANGE&&A.length()>0&&g.update(f.default.sources.SILENT)}),this.emitter.on(f.default.events.SCROLL_BEFORE_UPDATE,function(){if(g.hasFocus()){var _=g.getNativeRange();null!=_&&_.start.node!==g.cursor.textNode&&g.emitter.once(f.default.events.SCROLL_UPDATE,function(){try{g.setNativeRange(_.start.node,_.start.offset,_.end.node,_.end.offset)}catch(A){}})}}),this.emitter.on(f.default.events.SCROLL_OPTIMIZE,function(_,A){if(A.range){var k=A.range;g.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)}}),this.update(f.default.sources.SILENT)}return P(x,[{key:"handleComposition",value:function(){var b=this;this.root.addEventListener("compositionstart",function(){b.composing=!0}),this.root.addEventListener("compositionend",function(){if(b.composing=!1,b.cursor.parent){var g=b.cursor.restore();if(!g)return;setTimeout(function(){b.setNativeRange(g.startNode,g.startOffset,g.endNode,g.endOffset)},1)}})}},{key:"handleDragging",value:function(){var b=this;this.emitter.listenDOM("mousedown",document.body,function(){b.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){b.mouseDown=!1,b.update(f.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(b,g){if(null==this.scroll.whitelist||this.scroll.whitelist[b]){this.scroll.update();var _=this.getNativeRange();if(null!=_&&_.native.collapsed&&!w.default.query(b,w.default.Scope.BLOCK)){if(_.start.node!==this.cursor.textNode){var A=w.default.find(_.start.node,!1);if(null==A)return;if(A instanceof w.default.Leaf){var k=A.split(_.start.offset);A.parent.insertBefore(this.cursor,k)}else A.insertBefore(this.cursor,_.start.node);this.cursor.attach()}this.cursor.format(b,g),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(b){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=this.scroll.length();b=Math.min(b,_-1),g=Math.min(b+g,_-1)-b;var A=void 0,k=this.scroll.leaf(b),H=B(k,2),U=H[0],J=H[1];if(null==U)return null;var ee=U.position(J,!0),F=B(ee,2);A=F[0],J=F[1];var D=document.createRange();if(g>0){D.setStart(A,J);var E=this.scroll.leaf(b+g),N=B(E,2);if(null==(U=N[0]))return null;var I=U.position(J=N[1],!0),Y=B(I,2);return D.setEnd(A=Y[0],J=Y[1]),D.getBoundingClientRect()}var Z="left",R=void 0;return A instanceof Text?(J<A.data.length?(D.setStart(A,J),D.setEnd(A,J+1)):(D.setStart(A,J-1),D.setEnd(A,J),Z="right"),R=D.getBoundingClientRect()):(R=U.domNode.getBoundingClientRect(),J>0&&(Z="right")),{bottom:R.top+R.height,height:R.height,left:R[Z],right:R[Z],top:R.top,width:0}}},{key:"getNativeRange",value:function(){var b=document.getSelection();if(null==b||b.rangeCount<=0)return null;var g=b.getRangeAt(0);if(null==g)return null;var _=this.normalizeNative(g);return i.info("getNativeRange",_),_}},{key:"getRange",value:function(){var b=this.getNativeRange();return null==b?[null,null]:[this.normalizedToRange(b),b]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(b){var g=this,_=[[b.start.node,b.start.offset]];b.native.collapsed||_.push([b.end.node,b.end.offset]);var A=_.map(function(U){var J=B(U,2),ee=J[0],F=J[1],D=w.default.find(ee,!0),E=D.offset(g.scroll);return 0===F?E:D instanceof w.default.Container?E+D.length():E+D.index(ee,F)}),k=Math.min(Math.max.apply(Math,o(A)),this.scroll.length()-1),H=Math.min.apply(Math,[k].concat(o(A)));return new d(H,k-H)}},{key:"normalizeNative",value:function(b){if(!C(this.root,b.startContainer)||!b.collapsed&&!C(this.root,b.endContainer))return null;var g={start:{node:b.startContainer,offset:b.startOffset},end:{node:b.endContainer,offset:b.endOffset},native:b};return[g.start,g.end].forEach(function(_){for(var A=_.node,k=_.offset;!(A instanceof Text)&&A.childNodes.length>0;)if(A.childNodes.length>k)A=A.childNodes[k],k=0;else{if(A.childNodes.length!==k)break;k=(A=A.lastChild)instanceof Text?A.data.length:A.childNodes.length+1}_.node=A,_.offset=k}),g}},{key:"rangeToNative",value:function(b){var g=this,_=b.collapsed?[b.index]:[b.index,b.index+b.length],A=[],k=this.scroll.length();return _.forEach(function(H,U){H=Math.min(k-1,H);var ee=g.scroll.leaf(H),F=B(ee,2),E=F[1],N=F[0].position(E,0!==U),I=B(N,2);A.push(I[0],E=I[1])}),A.length<2&&(A=A.concat(A)),A}},{key:"scrollIntoView",value:function(b){var g=this.lastRange;if(null!=g){var _=this.getBounds(g.index,g.length);if(null!=_){var A=this.scroll.length()-1,k=this.scroll.line(Math.min(g.index,A)),U=B(k,1)[0],J=U;if(g.length>0){var ee=this.scroll.line(Math.min(g.index+g.length,A));J=B(ee,1)[0]}if(null!=U&&null!=J){var D=b.getBoundingClientRect();_.top<D.top?b.scrollTop-=D.top-_.top:_.bottom>D.bottom&&(b.scrollTop+=_.bottom-D.bottom)}}}}},{key:"setNativeRange",value:function(b,g){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g,k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i.info("setNativeRange",b,g,_,A),null==b||null!=this.root.parentNode&&null!=b.parentNode&&null!=_.parentNode){var H=document.getSelection();if(null!=H)if(null!=b){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(null==U||k||b!==U.startContainer||g!==U.startOffset||_!==U.endContainer||A!==U.endOffset){"BR"==b.tagName&&(g=[].indexOf.call(b.parentNode.childNodes,b),b=b.parentNode),"BR"==_.tagName&&(A=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode);var J=document.createRange();J.setStart(b,g),J.setEnd(_,A),H.removeAllRanges(),H.addRange(J)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(b){var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.default.sources.API;if("string"==typeof g&&(_=g,g=!1),i.info("setRange",b),null!=b){var A=this.rangeToNative(b);this.setNativeRange.apply(this,o(A).concat([g]))}else this.setNativeRange(null);this.update(_)}},{key:"update",value:function(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.default.sources.USER,g=this.lastRange,_=this.getRange(),A=B(_,2),H=A[1];if(this.lastRange=A[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,n.default)(g,this.lastRange)){var U;!this.composing&&null!=H&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var ee,J=[f.default.events.SELECTION_CHANGE,(0,e.default)(this.lastRange),(0,e.default)(g),b];(U=this.emitter).emit.apply(U,[f.default.events.EDITOR_CHANGE].concat(J)),b!==f.default.sources.SILENT&&(ee=this.emitter).emit.apply(ee,J)}}}]),x}();function C(x,M){return M instanceof Text&&(M=M.parentNode),x.contains(M)}y.Range=d,y.default=T},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function f(l,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}return function(l,s,a){return s&&f(l.prototype,s),a&&f(l,a),l}}(),P=function f(l,s,a){null===l&&(l=Function.prototype);var o=Object.getOwnPropertyDescriptor(l,s);if(void 0===o){var h=Object.getPrototypeOf(l);return null===h?void 0:f(h,s,a)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(a)};function e(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function c(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?f:l}var f,r=function(f){function l(){return e(this,l),c(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return function(f,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}(l,f),B(l,[{key:"insertInto",value:function(a,o){0===a.children.length?P(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"insertInto",this).call(this,a,o):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),l}((f=v(0),f&&f.__esModule?f:{default:f}).default.Embed);r.blotName="break",r.tagName="BR",y.default=r},function(z,y,v){"use strict";var c,B=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var f in r)r.hasOwnProperty(f)&&(n[f]=r[f])},function(n,r){function f(){this.constructor=n}c(n,r),n.prototype=null===r?Object.create(r):(f.prototype=r.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(44),O=v(30),w=v(1),m=function(c){function n(r){var f=c.call(this,r)||this;return f.build(),f}return B(n,c),n.prototype.appendChild=function(r){this.insertBefore(r)},n.prototype.attach=function(){c.prototype.attach.call(this),this.children.forEach(function(r){r.attach()})},n.prototype.build=function(){var r=this;this.children=new P.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(f){try{var l=e(f);r.insertBefore(l,r.children.head||void 0)}catch(s){if(s instanceof w.ParchmentError)return;throw s}})},n.prototype.deleteAt=function(r,f){if(0===r&&f===this.length())return this.remove();this.children.forEachAt(r,f,function(l,s,a){l.deleteAt(s,a)})},n.prototype.descendant=function(r,f){var l=this.children.find(f),s=l[0],a=l[1];return null==r.blotName&&r(s)||null!=r.blotName&&s instanceof r?[s,a]:s instanceof n?s.descendant(r,a):[null,-1]},n.prototype.descendants=function(r,f,l){void 0===f&&(f=0),void 0===l&&(l=Number.MAX_VALUE);var s=[],a=l;return this.children.forEachAt(f,l,function(o,h,i){(null==r.blotName&&r(o)||null!=r.blotName&&o instanceof r)&&s.push(o),o instanceof n&&(s=s.concat(o.descendants(r,h,a))),a-=i}),s},n.prototype.detach=function(){this.children.forEach(function(r){r.detach()}),c.prototype.detach.call(this)},n.prototype.formatAt=function(r,f,l,s){this.children.forEachAt(r,f,function(a,o,h){a.formatAt(o,h,l,s)})},n.prototype.insertAt=function(r,f,l){var s=this.children.find(r),a=s[0];if(a)a.insertAt(s[1],f,l);else{var h=null==l?w.create("text",f):w.create(f,l);this.appendChild(h)}},n.prototype.insertBefore=function(r,f){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(l){return r instanceof l}))throw new w.ParchmentError("Cannot insert "+r.statics.blotName+" into "+this.statics.blotName);r.insertInto(this,f)},n.prototype.length=function(){return this.children.reduce(function(r,f){return r+f.length()},0)},n.prototype.moveChildren=function(r,f){this.children.forEach(function(l){r.insertBefore(l,f)})},n.prototype.optimize=function(r){if(c.prototype.optimize.call(this,r),0===this.children.length)if(null!=this.statics.defaultChild){var f=w.create(this.statics.defaultChild);this.appendChild(f),f.optimize(r)}else this.remove()},n.prototype.path=function(r,f){void 0===f&&(f=!1);var l=this.children.find(r,f),s=l[0],a=l[1],o=[[this,r]];return s instanceof n?o.concat(s.path(a,f)):(null!=s&&o.push([s,a]),o)},n.prototype.removeChild=function(r){this.children.remove(r)},n.prototype.replace=function(r){r instanceof n&&r.moveChildren(this),c.prototype.replace.call(this,r)},n.prototype.split=function(r,f){if(void 0===f&&(f=!1),!f){if(0===r)return this;if(r===this.length())return this.next}var l=this.clone();return this.parent.insertBefore(l,this.next),this.children.forEachAt(r,this.length(),function(s,a,o){s=s.split(a,f),l.appendChild(s)}),l},n.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},n.prototype.update=function(r,f){var l=this,s=[],a=[];r.forEach(function(o){o.target===l.domNode&&"childList"===o.type&&(s.push.apply(s,o.addedNodes),a.push.apply(a,o.removedNodes))}),a.forEach(function(o){if(!(null!=o.parentNode&&"IFRAME"!==o.tagName&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var h=w.find(o);null!=h&&(null==h.domNode.parentNode||h.domNode.parentNode===l.domNode)&&h.detach()}}),s.filter(function(o){return o.parentNode==l.domNode}).sort(function(o,h){return o===h?0:o.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(o){var h=null;null!=o.nextSibling&&(h=w.find(o.nextSibling));var i=e(o);(i.next!=h||null==i.next)&&(null!=i.parent&&i.parent.removeChild(l),l.insertBefore(i,h||void 0))})},n}(O.default);function e(c){var n=w.find(c);if(null==n)try{n=w.create(c)}catch(r){n=w.create(w.Scope.INLINE),[].slice.call(c.childNodes).forEach(function(f){n.domNode.appendChild(f)}),c.parentNode&&c.parentNode.replaceChild(n.domNode,c),n.attach()}return n}y.default=m},function(z,y,v){"use strict";var c,B=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var f in r)r.hasOwnProperty(f)&&(n[f]=r[f])},function(n,r){function f(){this.constructor=n}c(n,r),n.prototype=null===r?Object.create(r):(f.prototype=r.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(12),O=v(31),w=v(17),m=v(1),e=function(c){function n(r){var f=c.call(this,r)||this;return f.attributes=new O.default(f.domNode),f}return B(n,c),n.formats=function(r){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?r.tagName.toLowerCase():void 0)},n.prototype.format=function(r,f){var l=m.query(r);l instanceof P.default?this.attributes.attribute(l,f):f&&null!=l&&(r!==this.statics.blotName||this.formats()[r]!==f)&&this.replaceWith(r,f)},n.prototype.formats=function(){var r=this.attributes.values(),f=this.statics.formats(this.domNode);return null!=f&&(r[this.statics.blotName]=f),r},n.prototype.replaceWith=function(r,f){var l=c.prototype.replaceWith.call(this,r,f);return this.attributes.copy(l),l},n.prototype.update=function(r,f){var l=this;c.prototype.update.call(this,r,f),r.some(function(s){return s.target===l.domNode&&"attributes"===s.type})&&this.attributes.build()},n.prototype.wrap=function(r,f){var l=c.prototype.wrap.call(this,r,f);return l instanceof n&&l.statics.scope===this.statics.scope&&this.attributes.move(l),l},n}(w.default);y.default=e},function(z,y,v){"use strict";var m,B=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var n in c)c.hasOwnProperty(n)&&(e[n]=c[n])},function(e,c){function n(){this.constructor=e}m(e,c),e.prototype=null===c?Object.create(c):(n.prototype=c.prototype,new n)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(30),O=v(1),w=function(m){function e(){return null!==m&&m.apply(this,arguments)||this}return B(e,m),e.value=function(c){return!0},e.prototype.index=function(c,n){return this.domNode===c||this.domNode.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1},e.prototype.position=function(c,n){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return c>0&&(r+=1),[this.parent.domNode,r]},e.prototype.value=function(){var c;return(c={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,c},e.scope=O.Scope.INLINE_BLOT,e}(P.default);y.default=w},function(z,y,v){var B=v(11),P=v(3),O={attributes:{compose:function(m,e,c){"object"!=typeof m&&(m={}),"object"!=typeof e&&(e={});var n=P(!0,{},e);for(var r in c||(n=Object.keys(n).reduce(function(f,l){return null!=n[l]&&(f[l]=n[l]),f},{})),m)void 0!==m[r]&&void 0===e[r]&&(n[r]=m[r]);return Object.keys(n).length>0?n:void 0},diff:function(m,e){"object"!=typeof m&&(m={}),"object"!=typeof e&&(e={});var c=Object.keys(m).concat(Object.keys(e)).reduce(function(n,r){return B(m[r],e[r])||(n[r]=void 0===e[r]?null:e[r]),n},{});return Object.keys(c).length>0?c:void 0},transform:function(m,e,c){if("object"!=typeof m)return e;if("object"==typeof e){if(!c)return e;var n=Object.keys(e).reduce(function(r,f){return void 0===m[f]&&(r[f]=e[f]),r},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(m){return new w(m)},length:function(m){return"number"==typeof m.delete?m.delete:"number"==typeof m.retain?m.retain:"string"==typeof m.insert?m.insert.length:1}};function w(m){this.ops=m,this.index=0,this.offset=0}w.prototype.hasNext=function(){return this.peekLength()<1/0},w.prototype.next=function(m){m||(m=1/0);var e=this.ops[this.index];if(e){var c=this.offset,n=O.length(e);if(m>=n-c?(m=n-c,this.index+=1,this.offset=0):this.offset+=m,"number"==typeof e.delete)return{delete:m};var r={};return e.attributes&&(r.attributes=e.attributes),"number"==typeof e.retain?r.retain=m:r.insert="string"==typeof e.insert?e.insert.substr(c,m):e.insert,r}return{retain:1/0}},w.prototype.peek=function(){return this.ops[this.index]},w.prototype.peekLength=function(){return this.ops[this.index]?O.length(this.ops[this.index])-this.offset:1/0},w.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},w.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var m=this.offset,e=this.index,c=this.next(),n=this.ops.slice(this.index);return this.offset=m,this.index=e,[c].concat(n)}return[]},z.exports=O},function(z,y){var v=function(){"use strict";function B(l,s){return null!=s&&l instanceof s}var P,O,w;try{P=Map}catch(l){P=function(){}}try{O=Set}catch(l){O=function(){}}try{w=Promise}catch(l){w=function(){}}function m(l,s,a,o,h){"object"==typeof s&&(a=s.depth,o=s.prototype,h=s.includeNonEnumerable,s=s.circular);var i=[],d=[],T="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===a&&(a=1/0),function C(x,M){if(null===x)return null;if(0===M)return x;var b,g;if("object"!=typeof x)return x;if(B(x,P))b=new P;else if(B(x,O))b=new O;else if(B(x,w))b=new w(function(D,E){x.then(function(N){D(C(N,M-1))},function(N){E(C(N,M-1))})});else if(m.__isArray(x))b=[];else if(m.__isRegExp(x))b=new RegExp(x.source,f(x)),x.lastIndex&&(b.lastIndex=x.lastIndex);else if(m.__isDate(x))b=new Date(x.getTime());else{if(T&&Buffer.isBuffer(x))return b=Buffer.allocUnsafe?Buffer.allocUnsafe(x.length):new Buffer(x.length),x.copy(b),b;B(x,Error)?b=Object.create(x):void 0===o?(g=Object.getPrototypeOf(x),b=Object.create(g)):(b=Object.create(o),g=o)}if(s){var _=i.indexOf(x);if(-1!=_)return d[_];i.push(x),d.push(b)}for(var A in B(x,P)&&x.forEach(function(D,E){var N=C(E,M-1),I=C(D,M-1);b.set(N,I)}),B(x,O)&&x.forEach(function(D){var E=C(D,M-1);b.add(E)}),x){var k;g&&(k=Object.getOwnPropertyDescriptor(g,A)),(!k||null!=k.set)&&(b[A]=C(x[A],M-1))}if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(x);for(A=0;A<H.length;A++){var U=H[A];(J=Object.getOwnPropertyDescriptor(x,U))&&!J.enumerable&&!h||(b[U]=C(x[U],M-1),J.enumerable||Object.defineProperty(b,U,{enumerable:!1}))}}if(h){var ee=Object.getOwnPropertyNames(x);for(A=0;A<ee.length;A++){var J,F=ee[A];(J=Object.getOwnPropertyDescriptor(x,F))&&J.enumerable||(b[F]=C(x[F],M-1),Object.defineProperty(b,F,{enumerable:!1}))}}return b}(l,a)}function e(l){return Object.prototype.toString.call(l)}function f(l){var s="";return l.global&&(s+="g"),l.ignoreCase&&(s+="i"),l.multiline&&(s+="m"),s}return m.clonePrototype=function(s){if(null===s)return null;var a=function(){};return a.prototype=s,new a},m.__objToStr=e,m.__isDate=function(l){return"object"==typeof l&&"[object Date]"===e(l)},m.__isArray=function(l){return"object"==typeof l&&"[object Array]"===e(l)},m.__isRegExp=function(l){return"object"==typeof l&&"[object RegExp]"===e(l)},m.__getRegExpFlags=f,m}();"object"==typeof z&&z.exports&&(z.exports=v)},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(g,_){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return function(g,_){var A=[],k=!0,H=!1,U=void 0;try{for(var ee,J=g[Symbol.iterator]();!(k=(ee=J.next()).done)&&(A.push(ee.value),!_||A.length!==_);k=!0);}catch(F){H=!0,U=F}finally{try{!k&&J.return&&J.return()}finally{if(H)throw U}}return A}(g,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function b(g,_){for(var A=0;A<_.length;A++){var k=_[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,_,A){return _&&b(g.prototype,_),A&&b(g,A),g}}(),O=function b(g,_,A){null===g&&(g=Function.prototype);var k=Object.getOwnPropertyDescriptor(g,_);if(void 0===k){var H=Object.getPrototypeOf(g);return null===H?void 0:b(H,_,A)}if("value"in k)return k.value;var U=k.get;return void 0===U?void 0:U.call(A)},m=i(v(0)),c=i(v(8)),n=v(4),r=i(n),l=i(v(16)),a=i(v(13)),h=i(v(25));function i(b){return b&&b.__esModule?b:{default:b}}function x(b){return b instanceof r.default||b instanceof n.BlockEmbed}var M=function(b){function g(_,A){!function(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}(this,g);var k=function(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?b:g}(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,_));return k.emitter=A.emitter,Array.isArray(A.whitelist)&&(k.whitelist=A.whitelist.reduce(function(H,U){return H[U]=!0,H},{})),k.domNode.addEventListener("DOMNodeInserted",function(){}),k.optimize(),k.enable(),k}return function(b,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}(g,b),P(g,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(A,k){var H=this.line(A),U=B(H,2),J=U[0],ee=U[1],F=this.line(A+k),E=B(F,1)[0];if(O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"deleteAt",this).call(this,A,k),null!=E&&J!==E&&ee>0){if(J instanceof n.BlockEmbed||E instanceof n.BlockEmbed)return void this.optimize();if(J instanceof a.default){var N=J.newlineIndex(J.length(),!0);if(N>-1&&(J=J.split(N+1))===E)return void this.optimize()}else if(E instanceof a.default){var I=E.newlineIndex(0);I>-1&&E.split(I+1)}J.moveChildren(E,E.children.head instanceof l.default?null:E.children.head),J.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(A,k,H,U){null!=this.whitelist&&!this.whitelist[H]||(O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,A,k,H,U),this.optimize())}},{key:"insertAt",value:function(A,k,H){if(null==H||null==this.whitelist||this.whitelist[k]){if(A>=this.length())if(null==H||null==m.default.query(k,m.default.Scope.BLOCK)){var U=m.default.create(this.statics.defaultChild);this.appendChild(U),null==H&&k.endsWith("\n")&&(k=k.slice(0,-1)),U.insertAt(0,k,H)}else{var J=m.default.create(k,H);this.appendChild(J)}else O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertAt",this).call(this,A,k,H);this.optimize()}}},{key:"insertBefore",value:function(A,k){if(A.statics.scope===m.default.Scope.INLINE_BLOT){var H=m.default.create(this.statics.defaultChild);H.appendChild(A),A=H}O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertBefore",this).call(this,A,k)}},{key:"leaf",value:function(A){return this.path(A).pop()||[null,-1]}},{key:"line",value:function(A){return A===this.length()?this.line(A-1):this.descendant(x,A)}},{key:"lines",value:function(){return function U(J,ee,F){var D=[],E=F;return J.children.forEachAt(ee,F,function(N,I,Y){x(N)?D.push(N):N instanceof m.default.Container&&(D=D.concat(U(N,I,E))),E-=Y}),D}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,A,k),A.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,A,k))}},{key:"path",value:function(A){return O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"path",this).call(this,A).slice(1)}},{key:"update",value:function(A){if(!0!==this.batch){var k=c.default.sources.USER;"string"==typeof A&&(k=A),Array.isArray(A)||(A=this.observer.takeRecords()),A.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,k,A),O(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"update",this).call(this,A.concat([])),A.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,k,A)}}}]),g}(m.default.Scroll);M.blotName="scroll",M.className="ql-editor",M.tagName="DIV",M.defaultChild="block",M.allowedChildren=[r.default,n.BlockEmbed,h.default],y.default=M},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.SHORTKEY=y.default=void 0;var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},P=function(j,V){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return function(j,V){var Q=[],X=!0,ie=!1,ae=void 0;try{for(var fe,le=j[Symbol.iterator]();!(X=(fe=le.next()).done)&&(Q.push(fe.value),!V||Q.length!==V);X=!0);}catch(de){ie=!0,ae=de}finally{try{!X&&le.return&&le.return()}finally{if(ie)throw ae}}return Q}(j,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")},O=function(){function R(j,V){for(var Q=0;Q<V.length;Q++){var X=V[Q];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(j,X.key,X)}}return function(j,V,Q){return V&&R(j.prototype,V),Q&&R(j,Q),j}}(),m=b(v(21)),c=b(v(11)),r=b(v(3)),l=b(v(2)),a=b(v(20)),h=b(v(0)),d=b(v(5)),C=b(v(10)),M=b(v(9));function b(R){return R&&R.__esModule?R:{default:R}}function g(R,j,V){return j in R?Object.defineProperty(R,j,{value:V,enumerable:!0,configurable:!0,writable:!0}):R[j]=V,R}var H=(0,C.default)("quill:keyboard"),U=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=function(R){function j(V,Q){!function(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")}(this,j);var X=function(R,j){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?R:j}(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,V,Q));return X.bindings={},Object.keys(X.options.bindings).forEach(function(ie){"list autofill"===ie&&null!=V.scroll.whitelist&&!V.scroll.whitelist.list||X.options.bindings[ie]&&X.addBinding(X.options.bindings[ie])}),X.addBinding({key:j.keys.ENTER,shiftKey:null},N),X.addBinding({key:j.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(X.addBinding({key:j.keys.BACKSPACE},{collapsed:!0},F),X.addBinding({key:j.keys.DELETE},{collapsed:!0},D)):(X.addBinding({key:j.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},F),X.addBinding({key:j.keys.DELETE},{collapsed:!0,suffix:/^.?$/},D)),X.addBinding({key:j.keys.BACKSPACE},{collapsed:!1},E),X.addBinding({key:j.keys.DELETE},{collapsed:!1},E),X.addBinding({key:j.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},F),X.listen(),X}return function(R,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);R.prototype=Object.create(j&&j.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(R,j):R.__proto__=j)}(j,R),O(j,null,[{key:"match",value:function(Q,X){return X=Z(X),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(ie){return!!X[ie]!==Q[ie]&&null!==X[ie]})&&X.key===(Q.which||Q.keyCode)}}]),O(j,[{key:"addBinding",value:function(Q){var X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ie=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ae=Z(Q);if(null==ae||null==ae.key)return H.warn("Attempted to add invalid keyboard binding",ae);"function"==typeof X&&(X={handler:X}),"function"==typeof ie&&(ie={handler:ie}),ae=(0,r.default)(ae,X,ie),this.bindings[ae.key]=this.bindings[ae.key]||[],this.bindings[ae.key].push(ae)}},{key:"listen",value:function(){var Q=this;this.quill.root.addEventListener("keydown",function(X){if(!X.defaultPrevented){var ae=(Q.bindings[X.which||X.keyCode]||[]).filter(function(me){return j.match(X,me)});if(0!==ae.length){var le=Q.quill.getSelection();if(null!=le&&Q.quill.hasFocus()){var fe=Q.quill.getLine(le.index),de=P(fe,2),we=de[0],_e=de[1],$=Q.quill.getLeaf(le.index),G=P($,2),ne=G[0],re=G[1],te=0===le.length?[ne,re]:Q.quill.getLeaf(le.index+le.length),se=P(te,2),ce=se[0],ue=se[1],Ce=ne instanceof h.default.Text?ne.value().slice(0,re):"",Oe=ce instanceof h.default.Text?ce.value().slice(ue):"",ge={collapsed:0===le.length,empty:0===le.length&&we.length()<=1,format:Q.quill.getFormat(le),offset:_e,prefix:Ce,suffix:Oe};ae.some(function(me){if(null!=me.collapsed&&me.collapsed!==ge.collapsed||null!=me.empty&&me.empty!==ge.empty||null!=me.offset&&me.offset!==ge.offset)return!1;if(Array.isArray(me.format)){if(me.format.every(function(ve){return null==ge.format[ve]}))return!1}else if("object"===B(me.format)&&!Object.keys(me.format).every(function(ve){return!0===me.format[ve]?null!=ge.format[ve]:!1===me.format[ve]?null==ge.format[ve]:(0,c.default)(me.format[ve],ge.format[ve])}))return!1;return!(null!=me.prefix&&!me.prefix.test(ge.prefix)||null!=me.suffix&&!me.suffix.test(ge.suffix))&&!0!==me.handler.call(Q,le,ge)})&&X.preventDefault()}}}})}}]),j}(M.default);function ee(R,j){var V;return g(V={key:R,shiftKey:j,altKey:null},R===J.keys.LEFT?"prefix":"suffix",/^$/),g(V,"handler",function(ie){var ae=ie.index;R===J.keys.RIGHT&&(ae+=ie.length+1);var le=this.quill.getLeaf(ae);return!(P(le,1)[0]instanceof h.default.Embed&&(R===J.keys.LEFT?j?this.quill.setSelection(ie.index-1,ie.length+1,d.default.sources.USER):this.quill.setSelection(ie.index-1,d.default.sources.USER):j?this.quill.setSelection(ie.index,ie.length+1,d.default.sources.USER):this.quill.setSelection(ie.index+ie.length+1,d.default.sources.USER),1))}),V}function F(R,j){if(!(0===R.index||this.quill.getLength()<=1)){var V=this.quill.getLine(R.index),X=P(V,1)[0],ie={};if(0===j.offset){var ae=this.quill.getLine(R.index-1),fe=P(ae,1)[0];if(null!=fe&&fe.length()>1){var de=X.formats(),we=this.quill.getFormat(R.index-1,1);ie=a.default.attributes.diff(de,we)||{}}}var _e=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(j.prefix)?2:1;this.quill.deleteText(R.index-_e,_e,d.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(R.index-_e,_e,ie,d.default.sources.USER),this.quill.focus()}}function D(R,j){var V=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(j.suffix)?2:1;if(!(R.index>=this.quill.getLength()-V)){var Q={},X=0,ie=this.quill.getLine(R.index),le=P(ie,1)[0];if(j.offset>=le.length()-1){var fe=this.quill.getLine(R.index+1),we=P(fe,1)[0];if(we){var _e=le.formats(),$=this.quill.getFormat(R.index,1);Q=a.default.attributes.diff(_e,$)||{},X=we.length()}}this.quill.deleteText(R.index,V,d.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(R.index+X-1,V,Q,d.default.sources.USER)}}function E(R){var j=this.quill.getLines(R),V={};if(j.length>1){var Q=j[0].formats(),X=j[j.length-1].formats();V=a.default.attributes.diff(X,Q)||{}}this.quill.deleteText(R,d.default.sources.USER),Object.keys(V).length>0&&this.quill.formatLine(R.index,1,V,d.default.sources.USER),this.quill.setSelection(R.index,d.default.sources.SILENT),this.quill.focus()}function N(R,j){var V=this;R.length>0&&this.quill.scroll.deleteAt(R.index,R.length);var Q=Object.keys(j.format).reduce(function(X,ie){return h.default.query(ie,h.default.Scope.BLOCK)&&!Array.isArray(j.format[ie])&&(X[ie]=j.format[ie]),X},{});this.quill.insertText(R.index,"\n",Q,d.default.sources.USER),this.quill.setSelection(R.index+1,d.default.sources.SILENT),this.quill.focus(),Object.keys(j.format).forEach(function(X){null==Q[X]&&(Array.isArray(j.format[X])||"link"!==X&&V.quill.format(X,j.format[X],d.default.sources.USER))})}function I(R){return{key:J.keys.TAB,shiftKey:!R,format:{"code-block":!0},handler:function(V){var Q=h.default.query("code-block"),X=V.index,ie=V.length,ae=this.quill.scroll.descendant(Q,X),le=P(ae,2),fe=le[0],de=le[1];if(null!=fe){var we=this.quill.getIndex(fe),_e=fe.newlineIndex(de,!0)+1,$=fe.newlineIndex(we+de+ie),G=fe.domNode.textContent.slice(_e,$).split("\n");de=0,G.forEach(function(ne,re){R?(fe.insertAt(_e+de,Q.TAB),de+=Q.TAB.length,0===re?X+=Q.TAB.length:ie+=Q.TAB.length):ne.startsWith(Q.TAB)&&(fe.deleteAt(_e+de,Q.TAB.length),de-=Q.TAB.length,0===re?X-=Q.TAB.length:ie-=Q.TAB.length),de+=ne.length+1}),this.quill.update(d.default.sources.USER),this.quill.setSelection(X,ie,d.default.sources.SILENT)}}}}function Y(R){return{key:R[0].toUpperCase(),shortKey:!0,handler:function(V,Q){this.quill.format(R,!Q.format[R],d.default.sources.USER)}}}function Z(R){if("string"==typeof R||"number"==typeof R)return Z({key:R});if("object"===(void 0===R?"undefined":B(R))&&(R=(0,m.default)(R,!1)),"string"==typeof R.key)if(null!=J.keys[R.key.toUpperCase()])R.key=J.keys[R.key.toUpperCase()];else{if(1!==R.key.length)return null;R.key=R.key.toUpperCase().charCodeAt(0)}return R.shortKey&&(R[U]=R.shortKey,delete R.shortKey),R}J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:Y("bold"),italic:Y("italic"),underline:Y("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(j,V){if(V.collapsed&&0!==V.offset)return!0;this.quill.format("indent","+1",d.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(j,V){if(V.collapsed&&0!==V.offset)return!0;this.quill.format("indent","-1",d.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(j,V){null!=V.format.indent?this.quill.format("indent","-1",d.default.sources.USER):null!=V.format.list&&this.quill.format("list",!1,d.default.sources.USER)}},"indent code-block":I(!0),"outdent code-block":I(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(j){this.quill.deleteText(j.index-1,1,d.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(j){this.quill.history.cutoff();var V=(new l.default).retain(j.index).delete(j.length).insert("\t");this.quill.updateContents(V,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(j.index+1,d.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(j,V){this.quill.format("list",!1,d.default.sources.USER),V.format.indent&&this.quill.format("indent",!1,d.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(j){var V=this.quill.getLine(j.index),Q=P(V,2),X=Q[0],ie=Q[1],ae=(0,r.default)({},X.formats(),{list:"checked"}),le=(new l.default).retain(j.index).insert("\n",ae).retain(X.length()-ie-1).retain(1,{list:"unchecked"});this.quill.updateContents(le,d.default.sources.USER),this.quill.setSelection(j.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(j,V){var Q=this.quill.getLine(j.index),X=P(Q,2),ie=X[0],ae=X[1],le=(new l.default).retain(j.index).insert("\n",V.format).retain(ie.length()-ae-1).retain(1,{header:null});this.quill.updateContents(le,d.default.sources.USER),this.quill.setSelection(j.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(j,V){var Q=V.prefix.length,X=this.quill.getLine(j.index),ie=P(X,2),ae=ie[0],le=ie[1];if(le>Q)return!0;var fe=void 0;switch(V.prefix.trim()){case"[]":case"[ ]":fe="unchecked";break;case"[x]":fe="checked";break;case"-":case"*":fe="bullet";break;default:fe="ordered"}this.quill.insertText(j.index," ",d.default.sources.USER),this.quill.history.cutoff();var de=(new l.default).retain(j.index-le).delete(Q+1).retain(ae.length()-2-le).retain(1,{list:fe});this.quill.updateContents(de,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(j.index-Q,d.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(j){var V=this.quill.getLine(j.index),Q=P(V,2),X=Q[0],ie=Q[1],ae=(new l.default).retain(j.index+X.length()-ie-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ae,d.default.sources.USER)}},"embed left":ee(J.keys.LEFT,!1),"embed left shift":ee(J.keys.LEFT,!0),"embed right":ee(J.keys.RIGHT,!1),"embed right shift":ee(J.keys.RIGHT,!0)}},y.default=J,y.SHORTKEY=U},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(o,h){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return function(o,h){var i=[],d=!0,T=!1,C=void 0;try{for(var M,x=o[Symbol.iterator]();!(d=(M=x.next()).done)&&(i.push(M.value),!h||i.length!==h);d=!0);}catch(b){T=!0,C=b}finally{try{!d&&x.return&&x.return()}finally{if(T)throw C}}return i}(o,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function a(o,h,i){null===o&&(o=Function.prototype);var d=Object.getOwnPropertyDescriptor(o,h);if(void 0===d){var T=Object.getPrototypeOf(o);return null===T?void 0:a(T,h,i)}if("value"in d)return d.value;var C=d.get;return void 0===C?void 0:C.call(i)},O=function(){function a(o,h){for(var i=0;i<h.length;i++){var d=h[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}return function(o,h,i){return h&&a(o.prototype,h),i&&a(o,i),o}}(),m=n(v(0)),c=n(v(7));function n(a){return a&&a.__esModule?a:{default:a}}var s=function(a){function o(h,i){!function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var d=function(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?a:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,h));return d.selection=i,d.textNode=document.createTextNode(o.CONTENTS),d.domNode.appendChild(d.textNode),d._length=0,d}return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}(o,a),O(o,null,[{key:"value",value:function(){}}]),O(o,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(i,d){if(0!==this._length)return P(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"format",this).call(this,i,d);for(var T=this,C=0;null!=T&&T.statics.scope!==m.default.Scope.BLOCK_BLOT;)C+=T.offset(T.parent),T=T.parent;null!=T&&(this._length=o.CONTENTS.length,T.optimize(),T.formatAt(C,o.CONTENTS.length,i,d),this._length=0)}},{key:"index",value:function(i,d){return i===this.textNode?0:P(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"index",this).call(this,i,d)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){P(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var i=this.textNode,d=this.selection.getNativeRange(),T=void 0,C=void 0,x=void 0;if(null!=d&&d.start.node===i&&d.end.node===i){var M=[i,d.start.offset,d.end.offset];T=M[0],C=M[1],x=M[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==o.CONTENTS){var b=this.textNode.data.split(o.CONTENTS).join("");this.next instanceof c.default?(T=this.next.domNode,this.next.insertAt(0,b),this.textNode.data=o.CONTENTS):(this.textNode.data=b,this.parent.insertBefore(m.default.create(this.textNode),this),this.textNode=document.createTextNode(o.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=C){var g=[C,x].map(function(A){return Math.max(0,Math.min(T.data.length,A-1))}),_=B(g,2);return{startNode:T,startOffset:C=_[0],endNode:T,endOffset:x=_[1]}}}}},{key:"update",value:function(i,d){var T=this;if(i.some(function(x){return"characterData"===x.type&&x.target===T.textNode})){var C=this.restore();C&&(d.range=C)}}},{key:"value",value:function(){return""}}]),o}(m.default.Embed);s.blotName="cursor",s.className="ql-cursor",s.tagName="span",s.CONTENTS="\ufeff",y.default=s},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var P=m(v(0)),O=v(4),w=m(O);function m(f){return f&&f.__esModule?f:{default:f}}function e(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function c(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?f:l}var r=function(f){function l(){return e(this,l),c(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return function(f,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}(l,f),l}(P.default.Container);r.allowedChildren=[w.default,O.BlockEmbed,r],y.default=r},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ColorStyle=y.ColorClass=y.ColorAttributor=void 0;var s,B=function(){function s(a,o){for(var h=0;h<o.length;h++){var i=o[h];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,o,h){return o&&s(a.prototype,o),h&&s(a,h),a}}(),P=function s(a,o,h){null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(void 0===i){var d=Object.getPrototypeOf(a);return null===d?void 0:s(d,o,h)}if("value"in i)return i.value;var T=i.get;return void 0===T?void 0:T.call(h)},w=(s=v(0))&&s.__esModule?s:{default:s};function e(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function c(s,a){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?s:a}var r=function(s){function a(){return e(this,a),c(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(s,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(s,a):s.__proto__=a)}(a,s),B(a,[{key:"value",value:function(h){var i=P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"value",this).call(this,h);return i.startsWith("rgb(")?"#"+(i=i.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(d){return("00"+parseInt(d).toString(16)).slice(-2)}).join(""):i}}]),a}(w.default.Attributor.Style),f=new w.default.Attributor.Class("color","ql-color",{scope:w.default.Scope.INLINE}),l=new r("color","color",{scope:w.default.Scope.INLINE});y.ColorAttributor=r,y.ColorClass=f,y.ColorStyle=l},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.sanitize=y.default=void 0;var B=function(){function l(s,a){for(var o=0;o<a.length;o++){var h=a[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}return function(s,a,o){return a&&l(s.prototype,a),o&&l(s,o),s}}(),P=function l(s,a,o){null===s&&(s=Function.prototype);var h=Object.getOwnPropertyDescriptor(s,a);if(void 0===h){var i=Object.getPrototypeOf(s);return null===i?void 0:l(i,a,o)}if("value"in h)return h.value;var d=h.get;return void 0===d?void 0:d.call(o)};function e(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function c(l,s){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?l:s}var l,r=function(l){function s(){return e(this,s),c(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return function(l,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);l.prototype=Object.create(s&&s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(l,s):l.__proto__=s)}(s,l),B(s,[{key:"format",value:function(o,h){if(o!==this.statics.blotName||!h)return P(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"format",this).call(this,o,h);h=this.constructor.sanitize(h),this.domNode.setAttribute("href",h)}}],[{key:"create",value:function(o){var h=P(s.__proto__||Object.getPrototypeOf(s),"create",this).call(this,o);return o=this.sanitize(o),h.setAttribute("href",o),h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target","_blank"),h}},{key:"formats",value:function(o){return o.getAttribute("href")}},{key:"sanitize",value:function(o){return f(o,this.PROTOCOL_WHITELIST)?o:this.SANITIZED_URL}}]),s}((l=v(6),l&&l.__esModule?l:{default:l}).default);function f(l,s){var a=document.createElement("a");a.href=l;var o=a.href.slice(0,a.href.indexOf(":"));return s.indexOf(o)>-1}r.blotName="link",r.tagName="A",r.SANITIZED_URL="about:blank",r.PROTOCOL_WHITELIST=["http","https","mailto","tel"],y.default=r,y.sanitize=f},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},P=function(){function s(a,o){for(var h=0;h<o.length;h++){var i=o[h];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,o,h){return o&&s(a.prototype,o),h&&s(a,h),a}}(),w=c(v(23)),e=c(v(107));function c(s){return s&&s.__esModule?s:{default:s}}var r=0;function f(s,a){s.setAttribute(a,"true"!==s.getAttribute(a))}var l=function(){function s(a){var o=this;(function(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")})(this,s),this.select=a,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){o.togglePicker()}),this.label.addEventListener("keydown",function(h){switch(h.keyCode){case w.default.keys.ENTER:o.togglePicker();break;case w.default.keys.ESCAPE:o.escape(),h.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return P(s,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(o){var h=this,i=document.createElement("span");return i.tabIndex="0",i.setAttribute("role","button"),i.classList.add("ql-picker-item"),o.hasAttribute("value")&&i.setAttribute("data-value",o.getAttribute("value")),o.textContent&&i.setAttribute("data-label",o.textContent),i.addEventListener("click",function(){h.selectItem(i,!0)}),i.addEventListener("keydown",function(d){switch(d.keyCode){case w.default.keys.ENTER:h.selectItem(i,!0),d.preventDefault();break;case w.default.keys.ESCAPE:h.escape(),d.preventDefault()}}),i}},{key:"buildLabel",value:function(){var o=document.createElement("span");return o.classList.add("ql-picker-label"),o.innerHTML=e.default,o.tabIndex="0",o.setAttribute("role","button"),o.setAttribute("aria-expanded","false"),this.container.appendChild(o),o}},{key:"buildOptions",value:function(){var o=this,h=document.createElement("span");h.classList.add("ql-picker-options"),h.setAttribute("aria-hidden","true"),h.tabIndex="-1",h.id="ql-picker-options-"+r,r+=1,this.label.setAttribute("aria-controls",h.id),this.options=h,[].slice.call(this.select.options).forEach(function(i){var d=o.buildItem(i);h.appendChild(d),!0===i.selected&&o.selectItem(d)}),this.container.appendChild(h)}},{key:"buildPicker",value:function(){var o=this;[].slice.call(this.select.attributes).forEach(function(h){o.container.setAttribute(h.name,h.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var o=this;this.close(),setTimeout(function(){return o.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(o){var h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.container.querySelector(".ql-selected");if(o!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=o&&(o.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(o.parentNode.children,o),o.hasAttribute("data-value")?this.label.setAttribute("data-value",o.getAttribute("data-value")):this.label.removeAttribute("data-value"),o.hasAttribute("data-label")?this.label.setAttribute("data-label",o.getAttribute("data-label")):this.label.removeAttribute("data-label"),h))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":B(Event))){var d=document.createEvent("Event");d.initEvent("change",!0,!0),this.select.dispatchEvent(d)}this.close()}}},{key:"update",value:function(){var o=void 0;if(this.select.selectedIndex>-1){var h=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];o=this.select.options[this.select.selectedIndex],this.selectItem(h)}else this.selectItem(null);var i=null!=o&&o!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}}]),s}();y.default=l},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var P=H(v(0)),w=H(v(5)),m=v(4),e=H(m),n=H(v(16)),f=H(v(25)),s=H(v(24)),o=H(v(35)),i=H(v(6)),T=H(v(22)),x=H(v(7)),b=H(v(55)),_=H(v(42)),k=H(v(23));function H(U){return U&&U.__esModule?U:{default:U}}w.default.register({"blots/block":e.default,"blots/block/embed":m.BlockEmbed,"blots/break":n.default,"blots/container":f.default,"blots/cursor":s.default,"blots/embed":o.default,"blots/inline":i.default,"blots/scroll":T.default,"blots/text":x.default,"modules/clipboard":b.default,"modules/history":_.default,"modules/keyboard":k.default}),P.default.register(e.default,n.default,s.default,i.default,T.default,x.default),y.default=w.default},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=v(1),P=function(){function O(w){this.domNode=w,this.domNode[B.DATA_KEY]={blot:this}}return Object.defineProperty(O.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),O.create=function(w){if(null==this.tagName)throw new B.ParchmentError("Blot definition missing tagName");var m;return Array.isArray(this.tagName)?("string"==typeof w&&(w=w.toUpperCase(),parseInt(w).toString()===w&&(w=parseInt(w))),m="number"==typeof w?document.createElement(this.tagName[w-1]):this.tagName.indexOf(w)>-1?document.createElement(w):document.createElement(this.tagName[0])):m=document.createElement(this.tagName),this.className&&m.classList.add(this.className),m},O.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},O.prototype.clone=function(){var w=this.domNode.cloneNode(!1);return B.create(w)},O.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[B.DATA_KEY]},O.prototype.deleteAt=function(w,m){this.isolate(w,m).remove()},O.prototype.formatAt=function(w,m,e,c){var n=this.isolate(w,m);if(null!=B.query(e,B.Scope.BLOT)&&c)n.wrap(e,c);else if(null!=B.query(e,B.Scope.ATTRIBUTE)){var r=B.create(this.statics.scope);n.wrap(r),r.format(e,c)}},O.prototype.insertAt=function(w,m,e){var c=null==e?B.create("text",m):B.create(m,e),n=this.split(w);this.parent.insertBefore(c,n)},O.prototype.insertInto=function(w,m){void 0===m&&(m=null),null!=this.parent&&this.parent.children.remove(this);var e=null;w.children.insertBefore(this,m),null!=m&&(e=m.domNode),(this.domNode.parentNode!=w.domNode||this.domNode.nextSibling!=e)&&w.domNode.insertBefore(this.domNode,e),this.parent=w,this.attach()},O.prototype.isolate=function(w,m){var e=this.split(w);return e.split(m),e},O.prototype.length=function(){return 1},O.prototype.offset=function(w){return void 0===w&&(w=this.parent),null==this.parent||this==w?0:this.parent.children.offset(this)+this.parent.offset(w)},O.prototype.optimize=function(w){null!=this.domNode[B.DATA_KEY]&&delete this.domNode[B.DATA_KEY].mutations},O.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},O.prototype.replace=function(w){null!=w.parent&&(w.parent.insertBefore(this,w.next),w.remove())},O.prototype.replaceWith=function(w,m){var e="string"==typeof w?B.create(w,m):w;return e.replace(this),e},O.prototype.split=function(w,m){return 0===w?this:this.next},O.prototype.update=function(w,m){},O.prototype.wrap=function(w,m){var e="string"==typeof w?B.create(w,m):w;return null!=this.parent&&this.parent.insertBefore(e,this.next),e.appendChild(this),e},O.blotName="abstract",O}();y.default=P},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=v(12),P=v(32),O=v(33),w=v(1),m=function(){function e(c){this.attributes={},this.domNode=c,this.build()}return e.prototype.attribute=function(c,n){n?c.add(this.domNode,n)&&(null!=c.value(this.domNode)?this.attributes[c.attrName]=c:delete this.attributes[c.attrName]):(c.remove(this.domNode),delete this.attributes[c.attrName])},e.prototype.build=function(){var c=this;this.attributes={};var n=B.default.keys(this.domNode),r=P.default.keys(this.domNode),f=O.default.keys(this.domNode);n.concat(r).concat(f).forEach(function(l){var s=w.query(l,w.Scope.ATTRIBUTE);s instanceof B.default&&(c.attributes[s.attrName]=s)})},e.prototype.copy=function(c){var n=this;Object.keys(this.attributes).forEach(function(r){var f=n.attributes[r].value(n.domNode);c.format(r,f)})},e.prototype.move=function(c){var n=this;this.copy(c),Object.keys(this.attributes).forEach(function(r){n.attributes[r].remove(n.domNode)}),this.attributes={}},e.prototype.values=function(){var c=this;return Object.keys(this.attributes).reduce(function(n,r){return n[r]=c.attributes[r].value(c.domNode),n},{})},e}();y.default=m},function(z,y,v){"use strict";var m,B=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var n in c)c.hasOwnProperty(n)&&(e[n]=c[n])},function(e,c){function n(){this.constructor=e}m(e,c),e.prototype=null===c?Object.create(c):(n.prototype=c.prototype,new n)});function O(m,e){return(m.getAttribute("class")||"").split(/\s+/).filter(function(n){return 0===n.indexOf(e+"-")})}Object.defineProperty(y,"__esModule",{value:!0});var w=function(m){function e(){return null!==m&&m.apply(this,arguments)||this}return B(e,m),e.keys=function(c){return(c.getAttribute("class")||"").split(/\s+/).map(function(n){return n.split("-").slice(0,-1).join("-")})},e.prototype.add=function(c,n){return!!this.canAdd(c,n)&&(this.remove(c),c.classList.add(this.keyName+"-"+n),!0)},e.prototype.remove=function(c){O(c,this.keyName).forEach(function(r){c.classList.remove(r)}),0===c.classList.length&&c.removeAttribute("class")},e.prototype.value=function(c){var r=(O(c,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(c,r)?r:""},e}(v(12).default);y.default=w},function(z,y,v){"use strict";var m,B=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var n in c)c.hasOwnProperty(n)&&(e[n]=c[n])},function(e,c){function n(){this.constructor=e}m(e,c),e.prototype=null===c?Object.create(c):(n.prototype=c.prototype,new n)});function O(m){var e=m.split("-"),c=e.slice(1).map(function(n){return n[0].toUpperCase()+n.slice(1)}).join("");return e[0]+c}Object.defineProperty(y,"__esModule",{value:!0});var w=function(m){function e(){return null!==m&&m.apply(this,arguments)||this}return B(e,m),e.keys=function(c){return(c.getAttribute("style")||"").split(";").map(function(n){return n.split(":")[0].trim()})},e.prototype.add=function(c,n){return!!this.canAdd(c,n)&&(c.style[O(this.keyName)]=n,!0)},e.prototype.remove=function(c){c.style[O(this.keyName)]="",c.getAttribute("style")||c.removeAttribute("style")},e.prototype.value=function(c){var n=c.style[O(this.keyName)];return this.canAdd(c,n)?n:""},e}(v(12).default);y.default=w},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function w(m,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(m,n.key,n)}}return function(m,e,c){return e&&w(m.prototype,e),c&&w(m,c),m}}();var O=function(){function w(m,e){(function(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")})(this,w),this.quill=m,this.options=e,this.modules={}}return B(w,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(c){null==e.modules[c]&&e.addModule(c)})}},{key:"addModule",value:function(e){var c=this.quill.constructor.import("modules/"+e);return this.modules[e]=new c(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),w}();O.DEFAULTS={modules:{}},O.themes={default:O},y.default=O},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function a(o,h){for(var i=0;i<h.length;i++){var d=h[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}return function(o,h,i){return h&&a(o.prototype,h),i&&a(o,i),o}}(),P=function a(o,h,i){null===o&&(o=Function.prototype);var d=Object.getOwnPropertyDescriptor(o,h);if(void 0===d){var T=Object.getPrototypeOf(o);return null===T?void 0:a(T,h,i)}if("value"in d)return d.value;var C=d.get;return void 0===C?void 0:C.call(i)},w=c(v(0)),e=c(v(7));function c(a){return a&&a.__esModule?a:{default:a}}var l="\ufeff",s=function(a){function o(h){!function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o);var i=function(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?a:o}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,h));return i.contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable",!1),[].slice.call(i.domNode.childNodes).forEach(function(d){i.contentNode.appendChild(d)}),i.leftGuard=document.createTextNode(l),i.rightGuard=document.createTextNode(l),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}(o,a),B(o,[{key:"index",value:function(i,d){return i===this.leftGuard?0:i===this.rightGuard?1:P(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"index",this).call(this,i,d)}},{key:"restore",value:function(i){var d=void 0,T=void 0,C=i.data.split(l).join("");if(i===this.leftGuard)if(this.prev instanceof e.default){var x=this.prev.length();this.prev.insertAt(x,C),d={startNode:this.prev.domNode,startOffset:x+C.length}}else T=document.createTextNode(C),this.parent.insertBefore(w.default.create(T),this),d={startNode:T,startOffset:C.length};else i===this.rightGuard&&(this.next instanceof e.default?(this.next.insertAt(0,C),d={startNode:this.next.domNode,startOffset:C.length}):(T=document.createTextNode(C),this.parent.insertBefore(w.default.create(T),this.next),d={startNode:T,startOffset:C.length}));return i.data=l,d}},{key:"update",value:function(i,d){var T=this;i.forEach(function(C){if("characterData"===C.type&&(C.target===T.leftGuard||C.target===T.rightGuard)){var x=T.restore(C.target);x&&(d.range=x)}})}}]),o}(w.default.Embed);y.default=s},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.AlignStyle=y.AlignClass=y.AlignAttribute=void 0;var n,P=(n=v(0))&&n.__esModule?n:{default:n};var w={scope:P.default.Scope.BLOCK,whitelist:["right","center","justify"]},m=new P.default.Attributor.Attribute("align","align",w),e=new P.default.Attributor.Class("align","ql-align",w),c=new P.default.Attributor.Style("align","text-align",w);y.AlignAttribute=m,y.AlignClass=e,y.AlignStyle=c},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.BackgroundStyle=y.BackgroundClass=void 0;var c,P=(c=v(0))&&c.__esModule?c:{default:c},O=v(26);var m=new P.default.Attributor.Class("background","ql-bg",{scope:P.default.Scope.INLINE}),e=new O.ColorAttributor("background","background-color",{scope:P.default.Scope.INLINE});y.BackgroundClass=m,y.BackgroundStyle=e},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.DirectionStyle=y.DirectionClass=y.DirectionAttribute=void 0;var n,P=(n=v(0))&&n.__esModule?n:{default:n};var w={scope:P.default.Scope.BLOCK,whitelist:["rtl"]},m=new P.default.Attributor.Attribute("direction","dir",w),e=new P.default.Attributor.Class("direction","ql-direction",w),c=new P.default.Attributor.Style("direction","direction",w);y.DirectionAttribute=m,y.DirectionClass=e,y.DirectionStyle=c},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.FontClass=y.FontStyle=void 0;var a,B=function(){function a(o,h){for(var i=0;i<h.length;i++){var d=h[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}return function(o,h,i){return h&&a(o.prototype,h),i&&a(o,i),o}}(),P=function a(o,h,i){null===o&&(o=Function.prototype);var d=Object.getOwnPropertyDescriptor(o,h);if(void 0===d){var T=Object.getPrototypeOf(o);return null===T?void 0:a(T,h,i)}if("value"in d)return d.value;var C=d.get;return void 0===C?void 0:C.call(i)},w=(a=v(0))&&a.__esModule?a:{default:a};function e(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function c(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?a:o}var r={scope:w.default.Scope.INLINE,whitelist:["serif","monospace"]},f=new w.default.Attributor.Class("font","ql-font",r),l=function(a){function o(){return e(this,o),c(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}(o,a),B(o,[{key:"value",value:function(i){return P(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"value",this).call(this,i).replace(/["']/g,"")}}]),o}(w.default.Attributor.Style),s=new l("font","font-family",r);y.FontStyle=s,y.FontClass=f},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.SizeStyle=y.SizeClass=void 0;var e,P=(e=v(0))&&e.__esModule?e:{default:e};var w=new P.default.Attributor.Class("size","ql-size",{scope:P.default.Scope.INLINE,whitelist:["small","large","huge"]}),m=new P.default.Attributor.Style("size","font-size",{scope:P.default.Scope.INLINE,whitelist:["10px","18px","32px"]});y.SizeClass=w,y.SizeStyle=m},function(z,y,v){"use strict";z.exports={align:{"":v(76),center:v(77),right:v(78),justify:v(79)},background:v(80),blockquote:v(81),bold:v(82),clean:v(83),code:v(58),"code-block":v(58),color:v(84),direction:{"":v(85),rtl:v(86)},float:{center:v(87),full:v(88),left:v(89),right:v(90)},formula:v(91),header:{1:v(92),2:v(93)},italic:v(94),image:v(95),indent:{"+1":v(96),"-1":v(97)},link:v(98),list:{ordered:v(99),bullet:v(100),check:v(101)},script:{sub:v(102),super:v(103)},strike:v(104),underline:v(105),video:v(106)}},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.getLastChangeIndex=y.default=void 0;var B=function(){function h(i,d){for(var T=0;T<d.length;T++){var C=d[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(i,C.key,C)}}return function(i,d,T){return d&&h(i.prototype,d),T&&h(i,T),i}}(),O=n(v(0)),m=n(v(5));function n(h){return h&&h.__esModule?h:{default:h}}var s=function(h){function i(d,T){!function(h,i){if(!(h instanceof i))throw new TypeError("Cannot call a class as a function")}(this,i);var C=function(h,i){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?h:i}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,d,T));return C.lastRecorded=0,C.ignoreChange=!1,C.clear(),C.quill.on(m.default.events.EDITOR_CHANGE,function(x,M,b,g){x!==m.default.events.TEXT_CHANGE||C.ignoreChange||(C.options.userOnly&&g!==m.default.sources.USER?C.transform(M):C.record(M,b))}),C.quill.keyboard.addBinding({key:"Z",shortKey:!0},C.undo.bind(C)),C.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},C.redo.bind(C)),/Win/i.test(navigator.platform)&&C.quill.keyboard.addBinding({key:"Y",shortKey:!0},C.redo.bind(C)),C}return function(h,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);h.prototype=Object.create(i&&i.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(h,i):h.__proto__=i)}(i,h),B(i,[{key:"change",value:function(T,C){if(0!==this.stack[T].length){var x=this.stack[T].pop();this.stack[C].push(x),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(x[T],m.default.sources.USER),this.ignoreChange=!1;var M=o(x[T]);this.quill.setSelection(M)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(T,C){if(0!==T.ops.length){this.stack.redo=[];var x=this.quill.getContents().diff(C),M=Date.now();if(this.lastRecorded+this.options.delay>M&&this.stack.undo.length>0){var b=this.stack.undo.pop();x=x.compose(b.undo),T=b.redo.compose(T)}else this.lastRecorded=M;this.stack.undo.push({redo:T,undo:x}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(T){this.stack.undo.forEach(function(C){C.undo=T.transform(C.undo,!0),C.redo=T.transform(C.redo,!0)}),this.stack.redo.forEach(function(C){C.undo=T.transform(C.undo,!0),C.redo=T.transform(C.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),i}(n(v(9)).default);function o(h){var i=h.reduce(function(T,C){return T+(C.delete||0)},0),d=h.length()-i;return function(h){var i=h.ops[h.ops.length-1];return null!=i&&(null!=i.insert?"string"==typeof i.insert&&i.insert.endsWith("\n"):null!=i.attributes&&Object.keys(i.attributes).some(function(d){return null!=O.default.query(d,O.default.Scope.BLOCK)}))}(h)&&(d-=1),d}s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},y.default=s,y.getLastChangeIndex=o},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.BaseTooltip=void 0;var B=function(){function N(I,Y){for(var Z=0;Z<Y.length;Z++){var R=Y[Z];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}return function(I,Y,Z){return Y&&N(I.prototype,Y),Z&&N(I,Z),I}}(),P=function N(I,Y,Z){null===I&&(I=Function.prototype);var R=Object.getOwnPropertyDescriptor(I,Y);if(void 0===R){var j=Object.getPrototypeOf(I);return null===j?void 0:N(j,Y,Z)}if("value"in R)return R.value;var V=R.get;return void 0===V?void 0:V.call(Z)},w=M(v(3)),e=M(v(2)),n=M(v(8)),f=M(v(23)),s=M(v(34)),o=M(v(59)),i=M(v(60)),T=M(v(28)),x=M(v(61));function M(N){return N&&N.__esModule?N:{default:N}}function b(N,I){if(!(N instanceof I))throw new TypeError("Cannot call a class as a function")}function g(N,I){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?N:I}function _(N,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);N.prototype=Object.create(I&&I.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(N,I):N.__proto__=I)}var A=[!1,"center","right","justify"],k=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],U=["1","2","3",!1],J=["small",!1,"large","huge"],ee=function(N){function I(Y,Z){b(this,I);var R=g(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,Y,Z));return Y.emitter.listenDOM("click",document.body,function V(Q){if(!document.body.contains(Y.root))return document.body.removeEventListener("click",V);null!=R.tooltip&&!R.tooltip.root.contains(Q.target)&&document.activeElement!==R.tooltip.textbox&&!R.quill.hasFocus()&&R.tooltip.hide(),null!=R.pickers&&R.pickers.forEach(function(X){X.container.contains(Q.target)||X.close()})}),R}return _(I,N),B(I,[{key:"addModule",value:function(Z){var R=P(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"addModule",this).call(this,Z);return"toolbar"===Z&&this.extendToolbar(R),R}},{key:"buildButtons",value:function(Z,R){Z.forEach(function(j){(j.getAttribute("class")||"").split(/\s+/).forEach(function(Q){if(Q.startsWith("ql-")&&(Q=Q.slice("ql-".length),null!=R[Q]))if("direction"===Q)j.innerHTML=R[Q][""]+R[Q].rtl;else if("string"==typeof R[Q])j.innerHTML=R[Q];else{var X=j.value||"";null!=X&&R[Q][X]&&(j.innerHTML=R[Q][X])}})})}},{key:"buildPickers",value:function(Z,R){var j=this;this.pickers=Z.map(function(Q){if(Q.classList.contains("ql-align"))return null==Q.querySelector("option")&&E(Q,A),new i.default(Q,R.align);if(Q.classList.contains("ql-background")||Q.classList.contains("ql-color")){var X=Q.classList.contains("ql-background")?"background":"color";return null==Q.querySelector("option")&&E(Q,k,"background"===X?"#ffffff":"#000000"),new o.default(Q,R[X])}return null==Q.querySelector("option")&&(Q.classList.contains("ql-font")?E(Q,H):Q.classList.contains("ql-header")?E(Q,U):Q.classList.contains("ql-size")&&E(Q,J)),new T.default(Q)}),this.quill.on(n.default.events.EDITOR_CHANGE,function(){j.pickers.forEach(function(X){X.update()})})}}]),I}(s.default);ee.DEFAULTS=(0,w.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var I=this,Y=this.container.querySelector("input.ql-image[type=file]");null==Y&&((Y=document.createElement("input")).setAttribute("type","file"),Y.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Y.classList.add("ql-image"),Y.addEventListener("change",function(){if(null!=Y.files&&null!=Y.files[0]){var Z=new FileReader;Z.onload=function(R){var j=I.quill.getSelection(!0);I.quill.updateContents((new e.default).retain(j.index).delete(j.length).insert({image:R.target.result}),n.default.sources.USER),I.quill.setSelection(j.index+1,n.default.sources.SILENT),Y.value=""},Z.readAsDataURL(Y.files[0])}}),this.container.appendChild(Y)),Y.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var F=function(N){function I(Y,Z){b(this,I);var R=g(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,Y,Z));return R.textbox=R.root.querySelector('input[type="text"]'),R.listen(),R}return _(I,N),B(I,[{key:"listen",value:function(){var Z=this;this.textbox.addEventListener("keydown",function(R){f.default.match(R,"enter")?(Z.save(),R.preventDefault()):f.default.match(R,"escape")&&(Z.cancel(),R.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=R?this.textbox.value=R:Z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+Z)||""),this.root.setAttribute("data-mode",Z)}},{key:"restoreFocus",value:function(){var Z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=Z}},{key:"save",value:function(){var Z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var R=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",Z,n.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",Z,n.default.sources.USER)),this.quill.root.scrollTop=R;break;case"video":Z=function(N){var I=N.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||N.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return I?(I[1]||"https")+"://www.youtube.com/embed/"+I[2]+"?showinfo=0":(I=N.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(I[1]||"https")+"://player.vimeo.com/video/"+I[2]+"/":N}(Z);case"formula":if(!Z)break;var j=this.quill.getSelection(!0);if(null!=j){var V=j.index+j.length;this.quill.insertEmbed(V,this.root.getAttribute("data-mode"),Z,n.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(V+1," ",n.default.sources.USER),this.quill.setSelection(V+2,n.default.sources.USER)}}this.textbox.value="",this.hide()}}]),I}(x.default);function E(N,I){var Y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];I.forEach(function(Z){var R=document.createElement("option");Z===Y?R.setAttribute("selected","selected"):R.setAttribute("value",Z),N.appendChild(R)})}y.BaseTooltip=F,y.default=ee},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function P(){this.head=this.tail=null,this.length=0}return P.prototype.append=function(){for(var O=[],w=0;w<arguments.length;w++)O[w]=arguments[w];this.insertBefore(O[0],null),O.length>1&&this.append.apply(this,O.slice(1))},P.prototype.contains=function(O){for(var w,m=this.iterator();w=m();)if(w===O)return!0;return!1},P.prototype.insertBefore=function(O,w){!O||(O.next=w,null!=w?(O.prev=w.prev,null!=w.prev&&(w.prev.next=O),w.prev=O,w===this.head&&(this.head=O)):null!=this.tail?(this.tail.next=O,O.prev=this.tail,this.tail=O):(O.prev=null,this.head=this.tail=O),this.length+=1)},P.prototype.offset=function(O){for(var w=0,m=this.head;null!=m;){if(m===O)return w;w+=m.length(),m=m.next}return-1},P.prototype.remove=function(O){!this.contains(O)||(null!=O.prev&&(O.prev.next=O.next),null!=O.next&&(O.next.prev=O.prev),O===this.head&&(this.head=O.next),O===this.tail&&(this.tail=O.prev),this.length-=1)},P.prototype.iterator=function(O){return void 0===O&&(O=this.head),function(){var w=O;return null!=O&&(O=O.next),w}},P.prototype.find=function(O,w){void 0===w&&(w=!1);for(var m,e=this.iterator();m=e();){var c=m.length();if(O<c||w&&O===c&&(null==m.next||0!==m.next.length()))return[m,O];O-=c}return[null,0]},P.prototype.forEach=function(O){for(var w,m=this.iterator();w=m();)O(w)},P.prototype.forEachAt=function(O,w,m){if(!(w<=0))for(var r,e=this.find(O),f=O-e[1],l=this.iterator(e[0]);(r=l())&&f<O+w;){var s=r.length();O>f?m(r,O-f,Math.min(w,f+s-O)):m(r,0,Math.min(s,O+w-f)),f+=s}},P.prototype.map=function(O){return this.reduce(function(w,m){return w.push(O(m)),w},[])},P.prototype.reduce=function(O,w){for(var m,e=this.iterator();m=e();)w=O(w,m);return w},P}();y.default=B},function(z,y,v){"use strict";var c,B=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var f in r)r.hasOwnProperty(f)&&(n[f]=r[f])},function(n,r){function f(){this.constructor=n}c(n,r),n.prototype=null===r?Object.create(r):(f.prototype=r.prototype,new f)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(17),O=v(1),w={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},e=function(c){function n(r){var f=c.call(this,r)||this;return f.scroll=f,f.observer=new MutationObserver(function(l){f.update(l)}),f.observer.observe(f.domNode,w),f.attach(),f}return B(n,c),n.prototype.detach=function(){c.prototype.detach.call(this),this.observer.disconnect()},n.prototype.deleteAt=function(r,f){this.update(),0===r&&f===this.length()?this.children.forEach(function(l){l.remove()}):c.prototype.deleteAt.call(this,r,f)},n.prototype.formatAt=function(r,f,l,s){this.update(),c.prototype.formatAt.call(this,r,f,l,s)},n.prototype.insertAt=function(r,f,l){this.update(),c.prototype.insertAt.call(this,r,f,l)},n.prototype.optimize=function(r,f){var l=this;void 0===r&&(r=[]),void 0===f&&(f={}),c.prototype.optimize.call(this,f);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)r.push(s.pop());for(var a=function(d,T){void 0===T&&(T=!0),null!=d&&d!==l&&null!=d.domNode.parentNode&&(null==d.domNode[O.DATA_KEY].mutations&&(d.domNode[O.DATA_KEY].mutations=[]),T&&a(d.parent))},o=function(d){null==d.domNode[O.DATA_KEY]||null==d.domNode[O.DATA_KEY].mutations||(d instanceof P.default&&d.children.forEach(o),d.optimize(f))},h=r,i=0;h.length>0;i+=1){if(i>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(h.forEach(function(d){var T=O.find(d.target,!0);null!=T&&(T.domNode===d.target&&("childList"===d.type?(a(O.find(d.previousSibling,!1)),[].forEach.call(d.addedNodes,function(C){var x=O.find(C,!1);a(x,!1),x instanceof P.default&&x.children.forEach(function(M){a(M,!1)})})):"attributes"===d.type&&a(T.prev)),a(T))}),this.children.forEach(o),s=(h=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)r.push(s.pop())}},n.prototype.update=function(r,f){var l=this;void 0===f&&(f={}),(r=r||this.observer.takeRecords()).map(function(s){var a=O.find(s.target,!0);return null==a?null:null==a.domNode[O.DATA_KEY].mutations?(a.domNode[O.DATA_KEY].mutations=[s],a):(a.domNode[O.DATA_KEY].mutations.push(s),null)}).forEach(function(s){null==s||s===l||null==s.domNode[O.DATA_KEY]||s.update(s.domNode[O.DATA_KEY].mutations||[],f)}),null!=this.domNode[O.DATA_KEY].mutations&&c.prototype.update.call(this,this.domNode[O.DATA_KEY].mutations,f),this.optimize(r,f)},n.blotName="scroll",n.defaultChild="block",n.scope=O.Scope.BLOCK_BLOT,n.tagName="DIV",n}(P.default);y.default=e},function(z,y,v){"use strict";var e,B=this&&this.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,n){c.__proto__=n}||function(c,n){for(var r in n)n.hasOwnProperty(r)&&(c[r]=n[r])},function(c,n){function r(){this.constructor=c}e(c,n),c.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(18),O=v(1);var m=function(e){function c(){return null!==e&&e.apply(this,arguments)||this}return B(c,e),c.formats=function(n){if(n.tagName!==c.tagName)return e.formats.call(this,n)},c.prototype.format=function(n,r){var f=this;n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):(this.children.forEach(function(l){l instanceof P.default||(l=l.wrap(c.blotName,!0)),f.attributes.copy(l)}),this.unwrap())},c.prototype.formatAt=function(n,r,f,l){null!=this.formats()[f]||O.query(f,O.Scope.ATTRIBUTE)?this.isolate(n,r).format(f,l):e.prototype.formatAt.call(this,n,r,f,l)},c.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var f=this.next;f instanceof c&&f.prev===this&&function(e,c){if(Object.keys(e).length!==Object.keys(c).length)return!1;for(var n in e)if(e[n]!==c[n])return!1;return!0}(r,f.formats())&&(f.moveChildren(this),f.remove())},c.blotName="inline",c.scope=O.Scope.INLINE_BLOT,c.tagName="SPAN",c}(P.default);y.default=m},function(z,y,v){"use strict";var m,B=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var n in c)c.hasOwnProperty(n)&&(e[n]=c[n])},function(e,c){function n(){this.constructor=e}m(e,c),e.prototype=null===c?Object.create(c):(n.prototype=c.prototype,new n)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(18),O=v(1),w=function(m){function e(){return null!==m&&m.apply(this,arguments)||this}return B(e,m),e.formats=function(c){var n=O.query(e.blotName).tagName;if(c.tagName!==n)return m.formats.call(this,c)},e.prototype.format=function(c,n){null!=O.query(c,O.Scope.BLOCK)&&(c!==this.statics.blotName||n?m.prototype.format.call(this,c,n):this.replaceWith(e.blotName))},e.prototype.formatAt=function(c,n,r,f){null!=O.query(r,O.Scope.BLOCK)?this.format(r,f):m.prototype.formatAt.call(this,c,n,r,f)},e.prototype.insertAt=function(c,n,r){if(null==r||null!=O.query(n,O.Scope.INLINE))m.prototype.insertAt.call(this,c,n,r);else{var f=this.split(c),l=O.create(n,r);f.parent.insertBefore(l,f)}},e.prototype.update=function(c,n){navigator.userAgent.match(/Trident/)?this.build():m.prototype.update.call(this,c,n)},e.blotName="block",e.scope=O.Scope.BLOCK_BLOT,e.tagName="P",e}(P.default);y.default=w},function(z,y,v){"use strict";var w,B=this&&this.__extends||(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,e){m.__proto__=e}||function(m,e){for(var c in e)e.hasOwnProperty(c)&&(m[c]=e[c])},function(m,e){function c(){this.constructor=m}w(m,e),m.prototype=null===e?Object.create(e):(c.prototype=e.prototype,new c)});Object.defineProperty(y,"__esModule",{value:!0});var O=function(w){function m(){return null!==w&&w.apply(this,arguments)||this}return B(m,w),m.formats=function(e){},m.prototype.format=function(e,c){w.prototype.formatAt.call(this,0,this.length(),e,c)},m.prototype.formatAt=function(e,c,n,r){0===e&&c===this.length()?this.format(n,r):w.prototype.formatAt.call(this,e,c,n,r)},m.prototype.formats=function(){return this.statics.formats(this.domNode)},m}(v(19).default);y.default=O},function(z,y,v){"use strict";var m,B=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,c){e.__proto__=c}||function(e,c){for(var n in c)c.hasOwnProperty(n)&&(e[n]=c[n])},function(e,c){function n(){this.constructor=e}m(e,c),e.prototype=null===c?Object.create(c):(n.prototype=c.prototype,new n)});Object.defineProperty(y,"__esModule",{value:!0});var P=v(19),O=v(1),w=function(m){function e(c){var n=m.call(this,c)||this;return n.text=n.statics.value(n.domNode),n}return B(e,m),e.create=function(c){return document.createTextNode(c)},e.value=function(c){var n=c.data;return n.normalize&&(n=n.normalize()),n},e.prototype.deleteAt=function(c,n){this.domNode.data=this.text=this.text.slice(0,c)+this.text.slice(c+n)},e.prototype.index=function(c,n){return this.domNode===c?n:-1},e.prototype.insertAt=function(c,n,r){null==r?(this.text=this.text.slice(0,c)+n+this.text.slice(c),this.domNode.data=this.text):m.prototype.insertAt.call(this,c,n,r)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(c){m.prototype.optimize.call(this,c),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(c,n){return void 0===n&&(n=!1),[this.domNode,c]},e.prototype.split=function(c,n){if(void 0===n&&(n=!1),!n){if(0===c)return this;if(c===this.length())return this.next}var r=O.create(this.domNode.splitText(c));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},e.prototype.update=function(c,n){var r=this;c.some(function(f){return"characterData"===f.type&&f.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=O.Scope.INLINE_BLOT,e}(P.default);y.default=w},function(z,y,v){"use strict";var B=document.createElement("div");if(B.classList.toggle("test-class",!1),B.classList.contains("test-class")){var P=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(O,w){return arguments.length>1&&!this.contains(O)==!w?w:P.call(this,O)}}String.prototype.startsWith||(String.prototype.startsWith=function(O,w){return this.substr(w=w||0,O.length)===O}),String.prototype.endsWith||(String.prototype.endsWith=function(O,w){var m=this.toString();("number"!=typeof w||!isFinite(w)||Math.floor(w)!==w||w>m.length)&&(w=m.length);var e=m.indexOf(O,w-=O.length);return-1!==e&&e===w}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(w){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof w)throw new TypeError("predicate must be a function");for(var n,m=Object(this),e=m.length>>>0,c=arguments[1],r=0;r<e;r++)if(w.call(c,n=m[r],r,m))return n}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(z,y){var v=-1;function O(i,d,T){if(i==d)return i?[[0,i]]:[];(T<0||i.length<T)&&(T=null);var C=c(i,d),x=i.substring(0,C);C=n(i=i.substring(C),d=d.substring(C));var M=i.substring(i.length-C),b=function(i,d){var T;if(!i)return[[1,d]];if(!d)return[[v,i]];var C=i.length>d.length?i:d,x=i.length>d.length?d:i,M=C.indexOf(x);if(-1!=M)return T=[[1,C.substring(0,M)],[0,x],[1,C.substring(M+x.length)]],i.length>d.length&&(T[0][0]=T[2][0]=v),T;if(1==x.length)return[[v,i],[1,d]];var b=function(i,d){var T=i.length>d.length?i:d,C=i.length>d.length?d:i;if(T.length<4||2*C.length<T.length)return null;function x(J,ee,F){for(var I,Y,Z,R,D=J.substring(F,F+Math.floor(J.length/4)),E=-1,N="";-1!=(E=ee.indexOf(D,E+1));){var j=c(J.substring(F),ee.substring(E)),V=n(J.substring(0,F),ee.substring(0,E));N.length<V+j&&(N=ee.substring(E-V,E)+ee.substring(E,E+j),I=J.substring(0,F-V),Y=J.substring(F+j),Z=ee.substring(0,E-V),R=ee.substring(E+j))}return 2*N.length>=J.length?[I,Y,Z,R,N]:null}var g,_,A,k,H,M=x(T,C,Math.ceil(T.length/4)),b=x(T,C,Math.ceil(T.length/2));return M||b?(g=b?M&&M[4].length>b[4].length?M:b:M,i.length>d.length?(_=g[0],A=g[1],k=g[2],H=g[3]):(k=g[0],H=g[1],_=g[2],A=g[3]),[_,A,k,H,g[4]]):null}(i,d);if(b){var _=b[1],k=b[3],H=b[4],U=O(b[0],b[2]),J=O(_,k);return U.concat([[0,H]],J)}return function(i,d){for(var T=i.length,C=d.length,x=Math.ceil((T+C)/2),M=x,b=2*x,g=new Array(b),_=new Array(b),A=0;A<b;A++)g[A]=-1,_[A]=-1;g[M+1]=0,_[M+1]=0;for(var k=T-C,H=k%2!=0,U=0,J=0,ee=0,F=0,D=0;D<x;D++){for(var E=-D+U;E<=D-J;E+=2){for(var N=M+E,Y=(I=E==-D||E!=D&&g[N-1]<g[N+1]?g[N+1]:g[N-1]+1)-E;I<T&&Y<C&&i.charAt(I)==d.charAt(Y);)I++,Y++;if(g[N]=I,I>T)J+=2;else if(Y>C)U+=2;else if(H&&(Z=M+k-E)>=0&&Z<b&&-1!=_[Z]&&I>=(R=T-_[Z]))return e(i,d,I,Y)}for(var j=-D+ee;j<=D-F;j+=2){for(var R,Z=M+j,V=(R=j==-D||j!=D&&_[Z-1]<_[Z+1]?_[Z+1]:_[Z-1]+1)-j;R<T&&V<C&&i.charAt(T-R-1)==d.charAt(C-V-1);)R++,V++;if(_[Z]=R,R>T)F+=2;else if(V>C)ee+=2;else if(!H){var I;if((N=M+k-j)>=0&&N<b&&-1!=g[N]&&(Y=M+(I=g[N])-N,I>=(R=T-R)))return e(i,d,I,Y)}}}return[[v,i],[1,d]]}(i,d)}(i=i.substring(0,i.length-C),d=d.substring(0,d.length-C));return x&&b.unshift([0,x]),M&&b.push([0,M]),f(b),null!=T&&(b=function(i,d){var T=function(i,d){if(0===d)return[0,i];for(var T=0,C=0;C<i.length;C++){var x=i[C];if(x[0]===v||0===x[0]){var M=T+x[1].length;if(d===M)return[C+1,i];if(d<M){i=i.slice();var b=d-T,g=[x[0],x[1].slice(0,b)],_=[x[0],x[1].slice(b)];return i.splice(C,1,g,_),[C+1,i]}T=M}}throw new Error("cursor_pos is out of bounds!")}(i,d),C=T[1],x=T[0],M=C[x],b=C[x+1];if(null==M)return i;if(0!==M[0])return i;if(null!=b&&M[1]+b[1]===b[1]+M[1])return C.splice(x,2,b,M),h(C,x,2);if(null!=b&&0===b[1].indexOf(M[1])){C.splice(x,2,[b[0],M[1]],[0,M[1]]);var g=b[1].slice(M[1].length);return g.length>0&&C.splice(x+2,0,[b[0],g]),h(C,x,3)}return i}(b,T)),function(i){for(var d=!1,T=function(b){return b.charCodeAt(0)>=56320&&b.charCodeAt(0)<=57343},C=function(b){return b.charCodeAt(b.length-1)>=55296&&b.charCodeAt(b.length-1)<=56319},x=2;x<i.length;x+=1)0===i[x-2][0]&&C(i[x-2][1])&&i[x-1][0]===v&&T(i[x-1][1])&&1===i[x][0]&&T(i[x][1])&&(d=!0,i[x-1][1]=i[x-2][1].slice(-1)+i[x-1][1],i[x][1]=i[x-2][1].slice(-1)+i[x][1],i[x-2][1]=i[x-2][1].slice(0,-1));if(!d)return i;var M=[];for(x=0;x<i.length;x+=1)i[x][1].length>0&&M.push(i[x]);return M}(b)}function e(i,d,T,C){var x=i.substring(0,T),M=d.substring(0,C),b=i.substring(T),g=d.substring(C),_=O(x,M),A=O(b,g);return _.concat(A)}function c(i,d){if(!i||!d||i.charAt(0)!=d.charAt(0))return 0;for(var T=0,C=Math.min(i.length,d.length),x=C,M=0;T<x;)i.substring(M,x)==d.substring(M,x)?M=T=x:C=x,x=Math.floor((C-T)/2+T);return x}function n(i,d){if(!i||!d||i.charAt(i.length-1)!=d.charAt(d.length-1))return 0;for(var T=0,C=Math.min(i.length,d.length),x=C,M=0;T<x;)i.substring(i.length-x,i.length-M)==d.substring(d.length-x,d.length-M)?M=T=x:C=x,x=Math.floor((C-T)/2+T);return x}function f(i){i.push([0,""]);for(var b,d=0,T=0,C=0,x="",M="";d<i.length;)switch(i[d][0]){case 1:C++,M+=i[d][1],d++;break;case v:T++,x+=i[d][1],d++;break;case 0:T+C>1?(0!==T&&0!==C&&(0!==(b=c(M,x))&&(d-T-C>0&&0==i[d-T-C-1][0]?i[d-T-C-1][1]+=M.substring(0,b):(i.splice(0,0,[0,M.substring(0,b)]),d++),M=M.substring(b),x=x.substring(b)),0!==(b=n(M,x))&&(i[d][1]=M.substring(M.length-b)+i[d][1],M=M.substring(0,M.length-b),x=x.substring(0,x.length-b))),0===T?i.splice(d-C,T+C,[1,M]):0===C?i.splice(d-T,T+C,[v,x]):i.splice(d-T-C,T+C,[v,x],[1,M]),d=d-T-C+(T?1:0)+(C?1:0)+1):0!==d&&0==i[d-1][0]?(i[d-1][1]+=i[d][1],i.splice(d,1)):d++,C=0,T=0,x="",M=""}""===i[i.length-1][1]&&i.pop();var g=!1;for(d=1;d<i.length-1;)0==i[d-1][0]&&0==i[d+1][0]&&(i[d][1].substring(i[d][1].length-i[d-1][1].length)==i[d-1][1]?(i[d][1]=i[d-1][1]+i[d][1].substring(0,i[d][1].length-i[d-1][1].length),i[d+1][1]=i[d-1][1]+i[d+1][1],i.splice(d-1,1),g=!0):i[d][1].substring(0,i[d+1][1].length)==i[d+1][1]&&(i[d-1][1]+=i[d+1][1],i[d][1]=i[d][1].substring(i[d+1][1].length)+i[d+1][1],i.splice(d+1,1),g=!0)),d++;g&&f(i)}var l=O;function h(i,d,T){for(var C=d+T-1;C>=0&&C>=d-1;C--)if(C+1<i.length){var x=i[C],M=i[C+1];x[0]===M[1]&&i.splice(C,2,[x[0],x[1]+M[1]])}return i}l.INSERT=1,l.DELETE=v,l.EQUAL=0,z.exports=l},function(z,y){function v(B){var P=[];for(var O in B)P.push(O);return P}(z.exports="function"==typeof Object.keys?Object.keys:v).shim=v},function(z,y){var v="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function B(O){return"[object Arguments]"==Object.prototype.toString.call(O)}function P(O){return O&&"object"==typeof O&&"number"==typeof O.length&&Object.prototype.hasOwnProperty.call(O,"callee")&&!Object.prototype.propertyIsEnumerable.call(O,"callee")||!1}(y=z.exports=v?B:P).supported=B,y.unsupported=P},function(z,y){"use strict";var v=Object.prototype.hasOwnProperty,B="~";function P(){}function O(m,e,c){this.fn=m,this.context=e,this.once=c||!1}function w(){this._events=new P,this._eventsCount=0}Object.create&&(P.prototype=Object.create(null),(new P).__proto__||(B=!1)),w.prototype.eventNames=function(){var c,n,e=[];if(0===this._eventsCount)return e;for(n in c=this._events)v.call(c,n)&&e.push(B?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(c)):e},w.prototype.listeners=function(e,c){var r=this._events[B?B+e:e];if(c)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var f=0,l=r.length,s=new Array(l);f<l;f++)s[f]=r[f].fn;return s},w.prototype.emit=function(e,c,n,r,f,l){var s=B?B+e:e;if(!this._events[s])return!1;var h,i,a=this._events[s],o=arguments.length;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),o){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,c),!0;case 3:return a.fn.call(a.context,c,n),!0;case 4:return a.fn.call(a.context,c,n,r),!0;case 5:return a.fn.call(a.context,c,n,r,f),!0;case 6:return a.fn.call(a.context,c,n,r,f,l),!0}for(i=1,h=new Array(o-1);i<o;i++)h[i-1]=arguments[i];a.fn.apply(a.context,h)}else{var T,d=a.length;for(i=0;i<d;i++)switch(a[i].once&&this.removeListener(e,a[i].fn,void 0,!0),o){case 1:a[i].fn.call(a[i].context);break;case 2:a[i].fn.call(a[i].context,c);break;case 3:a[i].fn.call(a[i].context,c,n);break;case 4:a[i].fn.call(a[i].context,c,n,r);break;default:if(!h)for(T=1,h=new Array(o-1);T<o;T++)h[T-1]=arguments[T];a[i].fn.apply(a[i].context,h)}}return!0},w.prototype.on=function(e,c,n){var r=new O(c,n||this),f=B?B+e:e;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],r]:this._events[f].push(r):(this._events[f]=r,this._eventsCount++),this},w.prototype.once=function(e,c,n){var r=new O(c,n||this,!0),f=B?B+e:e;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],r]:this._events[f].push(r):(this._events[f]=r,this._eventsCount++),this},w.prototype.removeListener=function(e,c,n,r){var f=B?B+e:e;if(!this._events[f])return this;if(!c)return 0==--this._eventsCount?this._events=new P:delete this._events[f],this;var l=this._events[f];if(l.fn)l.fn===c&&(!r||l.once)&&(!n||l.context===n)&&(0==--this._eventsCount?this._events=new P:delete this._events[f]);else{for(var s=0,a=[],o=l.length;s<o;s++)(l[s].fn!==c||r&&!l[s].once||n&&l[s].context!==n)&&a.push(l[s]);a.length?this._events[f]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new P:delete this._events[f]}return this},w.prototype.removeAllListeners=function(e){var c;return e?this._events[c=B?B+e:e]&&(0==--this._eventsCount?this._events=new P:delete this._events[c]):(this._events=new P,this._eventsCount=0),this},w.prototype.off=w.prototype.removeListener,w.prototype.addListener=w.prototype.on,w.prototype.setMaxListeners=function(){return this},w.prefixed=B,w.EventEmitter=w,void 0!==z&&(z.exports=w)},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.matchText=y.matchSpacing=y.matchNewline=y.matchBlot=y.matchAttributor=y.default=void 0;var B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},P=function(G,ne){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return function(G,ne){var re=[],te=!0,se=!1,ce=void 0;try{for(var Ce,ue=G[Symbol.iterator]();!(te=(Ce=ue.next()).done)&&(re.push(Ce.value),!ne||re.length!==ne);te=!0);}catch(Oe){se=!0,ce=Oe}finally{try{!te&&ue.return&&ue.return()}finally{if(se)throw ce}}return re}(G,ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")},O=function(){function $(G,ne){for(var re=0;re<ne.length;re++){var te=ne[re];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(G,te.key,te)}}return function(G,ne,re){return ne&&$(G.prototype,ne),re&&$(G,re),G}}(),m=_(v(3)),c=_(v(2)),r=_(v(0)),l=_(v(5)),a=_(v(10)),h=_(v(9)),i=v(36),d=v(37),C=_(v(13)),x=v(26),M=v(38),b=v(39),g=v(40);function _($){return $&&$.__esModule?$:{default:$}}function A($,G,ne){return G in $?Object.defineProperty($,G,{value:ne,enumerable:!0,configurable:!0,writable:!0}):$[G]=ne,$}var J=(0,a.default)("quill:clipboard"),ee="__ql-matcher",F=[[Node.TEXT_NODE,_e],[Node.TEXT_NODE,fe],["br",function($,G){return Z(G,"\n")||G.insert("\n"),G}],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,X],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,Q],[Node.ELEMENT_NODE,function($,G){var ne={},re=$.style||{};return re.fontStyle&&"italic"===Y($).fontStyle&&(ne.italic=!0),re.fontWeight&&(Y($).fontWeight.startsWith("bold")||parseInt(Y($).fontWeight)>=700)&&(ne.bold=!0),Object.keys(ne).length>0&&(G=I(G,ne)),parseFloat(re.textIndent||0)>0&&(G=(new c.default).insert("\t").concat(G)),G}],["li",function($,G){var ne=r.default.query($);if(null==ne||"list-item"!==ne.blotName||!Z(G,"\n"))return G;for(var re=-1,te=$.parentNode;!te.classList.contains("ql-clipboard");)"list"===(r.default.query(te)||{}).blotName&&(re+=1),te=te.parentNode;return re<=0?G:G.compose((new c.default).retain(G.length()-1).retain(1,{indent:re}))}],["b",V.bind(V,"bold")],["i",V.bind(V,"italic")],["style",function(){return new c.default}]],D=[i.AlignAttribute,M.DirectionAttribute].reduce(function($,G){return $[G.keyName]=G,$},{}),E=[i.AlignStyle,d.BackgroundStyle,x.ColorStyle,M.DirectionStyle,b.FontStyle,g.SizeStyle].reduce(function($,G){return $[G.keyName]=G,$},{}),N=function($){function G(ne,re){!function($,G){if(!($ instanceof G))throw new TypeError("Cannot call a class as a function")}(this,G);var te=function($,G){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!G||"object"!=typeof G&&"function"!=typeof G?$:G}(this,(G.__proto__||Object.getPrototypeOf(G)).call(this,ne,re));return te.quill.root.addEventListener("paste",te.onPaste.bind(te)),te.container=te.quill.addContainer("ql-clipboard"),te.container.setAttribute("contenteditable",!0),te.container.setAttribute("tabindex",-1),te.matchers=[],F.concat(te.options.matchers).forEach(function(se){var ce=P(se,2),Ce=ce[1];!re.matchVisual&&Ce===de||te.addMatcher(ce[0],Ce)}),te}return function($,G){if("function"!=typeof G&&null!==G)throw new TypeError("Super expression must either be null or a function, not "+typeof G);$.prototype=Object.create(G&&G.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf($,G):$.__proto__=G)}(G,$),O(G,[{key:"addMatcher",value:function(re,te){this.matchers.push([re,te])}},{key:"convert",value:function(re){if("string"==typeof re)return this.container.innerHTML=re.replace(/\>\r?\n +\</g,"><"),this.convert();var te=this.quill.getFormat(this.quill.selection.savedRange.index);if(te[C.default.blotName]){var se=this.container.innerText;return this.container.innerHTML="",(new c.default).insert(se,A({},C.default.blotName,te[C.default.blotName]))}var ce=this.prepareMatching(),ue=P(ce,2),ge=j(this.container,ue[0],ue[1]);return Z(ge,"\n")&&null==ge.ops[ge.ops.length-1].attributes&&(ge=ge.compose((new c.default).retain(ge.length()-1).delete(1))),J.log("convert",this.container.innerHTML,ge),this.container.innerHTML="",ge}},{key:"dangerouslyPasteHTML",value:function(re,te){var se=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof re)this.quill.setContents(this.convert(re),te),this.quill.setSelection(0,l.default.sources.SILENT);else{var ce=this.convert(te);this.quill.updateContents((new c.default).retain(re).concat(ce),se),this.quill.setSelection(re+ce.length(),l.default.sources.SILENT)}}},{key:"onPaste",value:function(re){var te=this;if(!re.defaultPrevented&&this.quill.isEnabled()){var se=this.quill.getSelection(),ce=(new c.default).retain(se.index),ue=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(l.default.sources.SILENT),setTimeout(function(){ce=ce.concat(te.convert()).delete(se.length),te.quill.updateContents(ce,l.default.sources.USER),te.quill.setSelection(ce.length()-se.length,l.default.sources.SILENT),te.quill.scrollingContainer.scrollTop=ue,te.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var re=this,te=[],se=[];return this.matchers.forEach(function(ce){var ue=P(ce,2),Ce=ue[0],Oe=ue[1];switch(Ce){case Node.TEXT_NODE:se.push(Oe);break;case Node.ELEMENT_NODE:te.push(Oe);break;default:[].forEach.call(re.container.querySelectorAll(Ce),function(ge){ge[ee]=ge[ee]||[],ge[ee].push(Oe)})}}),[te,se]}}]),G}(h.default);function I($,G,ne){return"object"===(void 0===G?"undefined":B(G))?Object.keys(G).reduce(function(re,te){return I(re,te,G[te])},$):$.reduce(function(re,te){return te.attributes&&te.attributes[G]?re.push(te):re.insert(te.insert,(0,m.default)({},A({},G,ne),te.attributes))},new c.default)}function Y($){if($.nodeType!==Node.ELEMENT_NODE)return{};var G="__ql-computed-style";return $[G]||($[G]=window.getComputedStyle($))}function Z($,G){for(var ne="",re=$.ops.length-1;re>=0&&ne.length<G.length;--re){var te=$.ops[re];if("string"!=typeof te.insert)break;ne=te.insert+ne}return ne.slice(-1*G.length)===G}function R($){if(0===$.childNodes.length)return!1;var G=Y($);return["block","list-item"].indexOf(G.display)>-1}function j($,G,ne){return $.nodeType===$.TEXT_NODE?ne.reduce(function(re,te){return te($,re)},new c.default):$.nodeType===$.ELEMENT_NODE?[].reduce.call($.childNodes||[],function(re,te){var se=j(te,G,ne);return te.nodeType===$.ELEMENT_NODE&&(se=G.reduce(function(ce,ue){return ue(te,ce)},se),se=(te[ee]||[]).reduce(function(ce,ue){return ue(te,ce)},se)),re.concat(se)},new c.default):new c.default}function V($,G,ne){return I(ne,$,!0)}function Q($,G){var ne=r.default.Attributor.Attribute.keys($),re=r.default.Attributor.Class.keys($),te=r.default.Attributor.Style.keys($),se={};return ne.concat(re).concat(te).forEach(function(ce){var ue=r.default.query(ce,r.default.Scope.ATTRIBUTE);null!=ue&&(se[ue.attrName]=ue.value($),se[ue.attrName])||(null!=(ue=D[ce])&&(ue.attrName===ce||ue.keyName===ce)&&(se[ue.attrName]=ue.value($)||void 0),null!=(ue=E[ce])&&(ue.attrName===ce||ue.keyName===ce)&&(se[(ue=E[ce]).attrName]=ue.value($)||void 0))}),Object.keys(se).length>0&&(G=I(G,se)),G}function X($,G){var ne=r.default.query($);if(null==ne)return G;if(ne.prototype instanceof r.default.Embed){var re={},te=ne.value($);null!=te&&(re[ne.blotName]=te,G=(new c.default).insert(re,ne.formats($)))}else"function"==typeof ne.formats&&(G=I(G,ne.blotName,ne.formats($)));return G}function fe($,G){return Z(G,"\n")||(R($)||G.length()>0&&$.nextSibling&&R($.nextSibling))&&G.insert("\n"),G}function de($,G){if(R($)&&null!=$.nextElementSibling&&!Z(G,"\n\n")){var ne=$.offsetHeight+parseFloat(Y($).marginTop)+parseFloat(Y($).marginBottom);$.nextElementSibling.offsetTop>$.offsetTop+1.5*ne&&G.insert("\n")}return G}function _e($,G){var ne=$.data;if("O:P"===$.parentNode.tagName)return G.insert(ne.trim());if(0===ne.trim().length&&$.parentNode.classList.contains("ql-clipboard"))return G;if(!Y($.parentNode).whiteSpace.startsWith("pre")){var re=function(se,ce){return(ce=ce.replace(/[^\u00a0]/g,"")).length<1&&se?" ":ce};ne=(ne=ne.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,re.bind(re,!0)),(null==$.previousSibling&&R($.parentNode)||null!=$.previousSibling&&R($.previousSibling))&&(ne=ne.replace(/^\s+/,re.bind(re,!1))),(null==$.nextSibling&&R($.parentNode)||null!=$.nextSibling&&R($.nextSibling))&&(ne=ne.replace(/\s+$/,re.bind(re,!1)))}return G.insert(ne)}N.DEFAULTS={matchers:[],matchVisual:!0},y.default=N,y.matchAttributor=Q,y.matchBlot=X,y.matchNewline=fe,y.matchSpacing=de,y.matchText=_e},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function f(l,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}return function(l,s,a){return s&&f(l.prototype,s),a&&f(l,a),l}}(),P=function f(l,s,a){null===l&&(l=Function.prototype);var o=Object.getOwnPropertyDescriptor(l,s);if(void 0===o){var h=Object.getPrototypeOf(l);return null===h?void 0:f(h,s,a)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(a)};function e(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function c(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?f:l}var f,r=function(f){function l(){return e(this,l),c(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return function(f,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}(l,f),B(l,[{key:"optimize",value:function(a){P(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"optimize",this).call(this,a),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return P(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),l}((f=v(6),f&&f.__esModule?f:{default:f}).default);r.blotName="bold",r.tagName=["STRONG","B"],y.default=r},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.addControls=y.default=void 0;var B=function(_,A){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return function(_,A){var k=[],H=!0,U=!1,J=void 0;try{for(var F,ee=_[Symbol.iterator]();!(H=(F=ee.next()).done)&&(k.push(F.value),!A||k.length!==A);H=!0);}catch(D){U=!0,J=D}finally{try{!H&&ee.return&&ee.return()}finally{if(U)throw J}}return k}(_,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function g(_,A){for(var k=0;k<A.length;k++){var H=A[k];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(_,H.key,H)}}return function(_,A,k){return A&&g(_.prototype,A),k&&g(_,k),_}}(),w=a(v(2)),e=a(v(0)),n=a(v(5)),f=a(v(10)),s=a(v(9));function a(g){return g&&g.__esModule?g:{default:g}}function i(g,_){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?g:_}var T=(0,f.default)("quill:toolbar"),C=function(g){function _(A,k){!function(g,_){if(!(g instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_);var J,H=i(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,A,k));if(Array.isArray(H.options.container)){var U=document.createElement("div");M(U,H.options.container),A.container.parentNode.insertBefore(U,A.container),H.container=U}else H.container="string"==typeof H.options.container?document.querySelector(H.options.container):H.options.container;return H.container instanceof HTMLElement?(H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(ee){H.addHandler(ee,H.options.handlers[ee])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(ee){H.attach(ee)}),H.quill.on(n.default.events.EDITOR_CHANGE,function(ee,F){ee===n.default.events.SELECTION_CHANGE&&H.update(F)}),H.quill.on(n.default.events.SCROLL_OPTIMIZE,function(){var ee=H.quill.selection.getRange(),F=B(ee,1);H.update(F[0])}),H):(J=T.error("Container required for toolbar",H.options),i(H,J))}return function(g,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);g.prototype=Object.create(_&&_.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(g,_):g.__proto__=_)}(_,g),P(_,[{key:"addHandler",value:function(k,H){this.handlers[k]=H}},{key:"attach",value:function(k){var H=this,U=[].find.call(k.classList,function(ee){return 0===ee.indexOf("ql-")});if(U){if(U=U.slice("ql-".length),"BUTTON"===k.tagName&&k.setAttribute("type","button"),null==this.handlers[U]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[U])return void T.warn("ignoring attaching to disabled format",U,k);if(null==e.default.query(U))return void T.warn("ignoring attaching to nonexistent format",U,k)}k.addEventListener("SELECT"===k.tagName?"change":"click",function(ee){var F=void 0;if("SELECT"===k.tagName){if(k.selectedIndex<0)return;var D=k.options[k.selectedIndex];F=!D.hasAttribute("selected")&&(D.value||!1)}else F=!k.classList.contains("ql-active")&&(k.value||!k.hasAttribute("value")),ee.preventDefault();H.quill.focus();var E=H.quill.selection.getRange(),I=B(E,1)[0];if(null!=H.handlers[U])H.handlers[U].call(H,F);else if(e.default.query(U).prototype instanceof e.default.Embed){if(!(F=prompt("Enter "+U)))return;H.quill.updateContents((new w.default).retain(I.index).delete(I.length).insert(function(g,_,A){return _ in g?Object.defineProperty(g,_,{value:A,enumerable:!0,configurable:!0,writable:!0}):g[_]=A,g}({},U,F)),n.default.sources.USER)}else H.quill.format(U,F,n.default.sources.USER);H.update(I)}),this.controls.push([U,k])}}},{key:"update",value:function(k){var H=null==k?{}:this.quill.getFormat(k);this.controls.forEach(function(U){var J=B(U,2),ee=J[0],F=J[1];if("SELECT"===F.tagName){var D=void 0;if(null==k)D=null;else if(null==H[ee])D=F.querySelector("option[selected]");else if(!Array.isArray(H[ee])){var E=H[ee];"string"==typeof E&&(E=E.replace(/\"/g,'\\"')),D=F.querySelector('option[value="'+E+'"]')}null==D?(F.value="",F.selectedIndex=-1):D.selected=!0}else if(null==k)F.classList.remove("ql-active");else if(F.hasAttribute("value")){var N=H[ee]===F.getAttribute("value")||null!=H[ee]&&H[ee].toString()===F.getAttribute("value")||null==H[ee]&&!F.getAttribute("value");F.classList.toggle("ql-active",N)}else F.classList.toggle("ql-active",null!=H[ee])})}}]),_}(s.default);function x(g,_,A){var k=document.createElement("button");k.setAttribute("type","button"),k.classList.add("ql-"+_),null!=A&&(k.value=A),g.appendChild(k)}function M(g,_){Array.isArray(_[0])||(_=[_]),_.forEach(function(A){var k=document.createElement("span");k.classList.add("ql-formats"),A.forEach(function(H){if("string"==typeof H)x(k,H);else{var U=Object.keys(H)[0],J=H[U];Array.isArray(J)?function(g,_,A){var k=document.createElement("select");k.classList.add("ql-"+_),A.forEach(function(H){var U=document.createElement("option");!1!==H?U.setAttribute("value",H):U.setAttribute("selected","selected"),k.appendChild(U)}),g.appendChild(k)}(k,U,J):x(k,U,J)}}),g.appendChild(k)})}C.DEFAULTS={},C.DEFAULTS={container:null,handlers:{clean:function(){var _=this,A=this.quill.getSelection();if(null!=A)if(0==A.length){var k=this.quill.getFormat();Object.keys(k).forEach(function(H){null!=e.default.query(H,e.default.Scope.INLINE)&&_.quill.format(H,!1)})}else this.quill.removeFormat(A,n.default.sources.USER)},direction:function(_){var A=this.quill.getFormat().align;"rtl"===_&&null==A?this.quill.format("align","right",n.default.sources.USER):!_&&"right"===A&&this.quill.format("align",!1,n.default.sources.USER),this.quill.format("direction",_,n.default.sources.USER)},indent:function(_){var A=this.quill.getSelection(),k=this.quill.getFormat(A),H=parseInt(k.indent||0);if("+1"===_||"-1"===_){var U="+1"===_?1:-1;"rtl"===k.direction&&(U*=-1),this.quill.format("indent",H+U,n.default.sources.USER)}},link:function(_){!0===_&&(_=prompt("Enter link URL:")),this.quill.format("link",_,n.default.sources.USER)},list:function(_){var A=this.quill.getSelection(),k=this.quill.getFormat(A);this.quill.format("list","check"===_?"checked"!==k.list&&"unchecked"!==k.list&&"unchecked":_,n.default.sources.USER)}}},y.default=C,y.addControls=M},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function f(l,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}return function(l,s,a){return s&&f(l.prototype,s),a&&f(l,a),l}}(),P=function f(l,s,a){null===l&&(l=Function.prototype);var o=Object.getOwnPropertyDescriptor(l,s);if(void 0===o){var h=Object.getPrototypeOf(l);return null===h?void 0:f(h,s,a)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(a)};var f,r=function(f){function l(s,a){!function(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var o=function(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?f:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,s));return o.label.innerHTML=a,o.container.classList.add("ql-color-picker"),[].slice.call(o.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(h){h.classList.add("ql-primary")}),o}return function(f,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}(l,f),B(l,[{key:"buildItem",value:function(a){var o=P(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"buildItem",this).call(this,a);return o.style.backgroundColor=a.getAttribute("value")||"",o}},{key:"selectItem",value:function(a,o){P(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"selectItem",this).call(this,a,o);var h=this.label.querySelector(".ql-color-label"),i=a&&a.getAttribute("data-value")||"";h&&("line"===h.tagName?h.style.stroke=i:h.style.fill=i)}}]),l}((f=v(28),f&&f.__esModule?f:{default:f}).default);y.default=r},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function f(l,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}return function(l,s,a){return s&&f(l.prototype,s),a&&f(l,a),l}}(),P=function f(l,s,a){null===l&&(l=Function.prototype);var o=Object.getOwnPropertyDescriptor(l,s);if(void 0===o){var h=Object.getPrototypeOf(l);return null===h?void 0:f(h,s,a)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(a)};var f,r=function(f){function l(s,a){!function(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}(this,l);var o=function(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?f:l}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,s));return o.container.classList.add("ql-icon-picker"),[].forEach.call(o.container.querySelectorAll(".ql-picker-item"),function(h){h.innerHTML=a[h.getAttribute("data-value")||""]}),o.defaultItem=o.container.querySelector(".ql-selected"),o.selectItem(o.defaultItem),o}return function(f,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}(l,f),B(l,[{key:"selectItem",value:function(a,o){P(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"selectItem",this).call(this,a,o),this.label.innerHTML=(a=a||this.defaultItem).innerHTML}}]),l}((f=v(28),f&&f.__esModule?f:{default:f}).default);y.default=r},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function w(m,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(m,n.key,n)}}return function(m,e,c){return e&&w(m.prototype,e),c&&w(m,c),m}}();var O=function(){function w(m,e){var c=this;(function(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")})(this,w),this.quill=m,this.boundsContainer=e||document.body,this.root=m.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){c.root.style.marginTop=-1*c.quill.root.scrollTop+"px"}),this.hide()}return B(w,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var c=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=c+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),f=this.root.getBoundingClientRect(),l=0;return f.right>r.right&&(this.root.style.left=c+(l=r.right-f.right)+"px"),f.left<r.left&&(this.root.style.left=c+(l=r.left-f.left)+"px"),f.bottom>r.bottom&&(this.root.style.top=n-(e.bottom-e.top+(f.bottom-f.top))+"px",this.root.classList.add("ql-flip")),l}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),w}();y.default=O},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(g,_){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return function(g,_){var A=[],k=!0,H=!1,U=void 0;try{for(var ee,J=g[Symbol.iterator]();!(k=(ee=J.next()).done)&&(A.push(ee.value),!_||A.length!==_);k=!0);}catch(F){H=!0,U=F}finally{try{!k&&J.return&&J.return()}finally{if(H)throw U}}return A}(g,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function b(g,_,A){null===g&&(g=Function.prototype);var k=Object.getOwnPropertyDescriptor(g,_);if(void 0===k){var H=Object.getPrototypeOf(g);return null===H?void 0:b(H,_,A)}if("value"in k)return k.value;var U=k.get;return void 0===U?void 0:U.call(A)},O=function(){function b(g,_){for(var A=0;A<_.length;A++){var k=_[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,_,A){return _&&b(g.prototype,_),A&&b(g,A),g}}(),m=h(v(3)),c=h(v(8)),n=v(43),r=h(n),l=h(v(27)),s=v(15),o=h(v(41));function h(b){return b&&b.__esModule?b:{default:b}}function i(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function d(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?b:g}function T(b,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var C=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],x=function(b){function g(_,A){i(this,g),null!=A.modules.toolbar&&null==A.modules.toolbar.container&&(A.modules.toolbar.container=C);var k=d(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,_,A));return k.quill.container.classList.add("ql-snow"),k}return T(g,b),O(g,[{key:"extendToolbar",value:function(A){A.container.classList.add("ql-snow"),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),o.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),o.default),this.tooltip=new M(this.quill,this.options.bounds),A.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(k,H){A.handlers.link.call(A,!H.format.link)})}}]),g}(r.default);x.DEFAULTS=(0,m.default)(!0,{},r.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(g){if(g){var _=this.quill.getSelection();if(null==_||0==_.length)return;var A=this.quill.getText(_);/^\S+@\S+\.\S+$/.test(A)&&0!==A.indexOf("mailto:")&&(A="mailto:"+A),this.quill.theme.tooltip.edit("link",A)}else this.quill.format("link",!1)}}}}});var M=function(b){function g(_,A){i(this,g);var k=d(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,_,A));return k.preview=k.root.querySelector("a.ql-preview"),k}return T(g,b),O(g,[{key:"listen",value:function(){var A=this;P(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(k){A.root.classList.contains("ql-editing")?A.save():A.edit("link",A.preview.textContent),k.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(k){if(null!=A.linkRange){var H=A.linkRange;A.restoreFocus(),A.quill.formatText(H,"link",!1,c.default.sources.USER),delete A.linkRange}k.preventDefault(),A.hide()}),this.quill.on(c.default.events.SELECTION_CHANGE,function(k,H,U){if(null!=k){if(0===k.length&&U===c.default.sources.USER){var J=A.quill.scroll.descendant(l.default,k.index),ee=B(J,2),F=ee[0];if(null!=F){A.linkRange=new s.Range(k.index-ee[1],F.length());var E=l.default.formats(F.domNode);return A.preview.textContent=E,A.preview.setAttribute("href",E),A.show(),void A.position(A.quill.getBounds(A.linkRange))}}else delete A.linkRange;A.hide()}})}},{key:"show",value:function(){P(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),g}(n.BaseTooltip);M.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),y.default=x},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var P=te(v(29)),O=v(36),w=v(38),m=v(64),c=te(v(65)),r=te(v(66)),f=v(67),l=te(f),s=v(37),a=v(26),o=v(39),h=v(40),d=te(v(56)),C=te(v(68)),M=te(v(27)),g=te(v(69)),A=te(v(70)),H=te(v(71)),J=te(v(72)),F=te(v(73)),D=v(13),E=te(D),I=te(v(74)),Z=te(v(75)),j=te(v(57)),Q=te(v(41)),ie=te(v(28)),le=te(v(59)),de=te(v(60)),_e=te(v(61)),G=te(v(108)),re=te(v(62));function te(se){return se&&se.__esModule?se:{default:se}}P.default.register({"attributors/attribute/direction":w.DirectionAttribute,"attributors/class/align":O.AlignClass,"attributors/class/background":s.BackgroundClass,"attributors/class/color":a.ColorClass,"attributors/class/direction":w.DirectionClass,"attributors/class/font":o.FontClass,"attributors/class/size":h.SizeClass,"attributors/style/align":O.AlignStyle,"attributors/style/background":s.BackgroundStyle,"attributors/style/color":a.ColorStyle,"attributors/style/direction":w.DirectionStyle,"attributors/style/font":o.FontStyle,"attributors/style/size":h.SizeStyle},!0),P.default.register({"formats/align":O.AlignClass,"formats/direction":w.DirectionClass,"formats/indent":m.IndentClass,"formats/background":s.BackgroundStyle,"formats/color":a.ColorStyle,"formats/font":o.FontClass,"formats/size":h.SizeClass,"formats/blockquote":c.default,"formats/code-block":E.default,"formats/header":r.default,"formats/list":l.default,"formats/bold":d.default,"formats/code":D.Code,"formats/italic":C.default,"formats/link":M.default,"formats/script":g.default,"formats/strike":A.default,"formats/underline":H.default,"formats/image":J.default,"formats/video":F.default,"formats/list/item":f.ListItem,"modules/formula":I.default,"modules/syntax":Z.default,"modules/toolbar":j.default,"themes/bubble":G.default,"themes/snow":re.default,"ui/icons":Q.default,"ui/picker":ie.default,"ui/icon-picker":de.default,"ui/color-picker":le.default,"ui/tooltip":_e.default},!0),y.default=P.default},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.IndentClass=void 0;var l,B=function(){function l(s,a){for(var o=0;o<a.length;o++){var h=a[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(s,h.key,h)}}return function(s,a,o){return a&&l(s.prototype,a),o&&l(s,o),s}}(),P=function l(s,a,o){null===s&&(s=Function.prototype);var h=Object.getOwnPropertyDescriptor(s,a);if(void 0===h){var i=Object.getPrototypeOf(s);return null===i?void 0:l(i,a,o)}if("value"in h)return h.value;var d=h.get;return void 0===d?void 0:d.call(o)},w=(l=v(0))&&l.__esModule?l:{default:l};function e(l,s){if(!(l instanceof s))throw new TypeError("Cannot call a class as a function")}function c(l,s){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!=typeof s&&"function"!=typeof s?l:s}var r=function(l){function s(){return e(this,s),c(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return function(l,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);l.prototype=Object.create(s&&s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(l,s):l.__proto__=s)}(s,l),B(s,[{key:"add",value:function(o,h){if("+1"===h||"-1"===h){var i=this.value(o)||0;h="+1"===h?i+1:i-1}return 0===h?(this.remove(o),!0):P(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"add",this).call(this,o,h)}},{key:"canAdd",value:function(o,h){return P(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"canAdd",this).call(this,o,h)||P(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"canAdd",this).call(this,o,parseInt(h))}},{key:"value",value:function(o){return parseInt(P(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"value",this).call(this,o))||void 0}}]),s}(w.default.Attributor.Class),f=new r("indent","ql-indent",{scope:w.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});y.IndentClass=f},function(z,y,v){"use strict";function w(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function m(n,r){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?n:r}Object.defineProperty(y,"__esModule",{value:!0});var n,c=function(n){function r(){return w(this,r),m(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r)}(r,n),r}((n=v(4),n&&n.__esModule?n:{default:n}).default);c.blotName="blockquote",c.tagName="blockquote",y.default=c},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function r(f,l){for(var s=0;s<l.length;s++){var a=l[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(f,l,s){return l&&r(f.prototype,l),s&&r(f,s),f}}();function m(r,f){if(!(r instanceof f))throw new TypeError("Cannot call a class as a function")}function e(r,f){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?r:f}var r,n=function(r){function f(){return m(this,f),e(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return function(r,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);r.prototype=Object.create(f&&f.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(r,f):r.__proto__=f)}(f,r),B(f,null,[{key:"formats",value:function(s){return this.tagName.indexOf(s.tagName)+1}}]),f}((r=v(4),r&&r.__esModule?r:{default:r}).default);n.blotName="header",n.tagName=["H1","H2","H3","H4","H5","H6"],y.default=n},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.ListItem=void 0;var B=function(){function i(d,T){for(var C=0;C<T.length;C++){var x=T[C];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,T,C){return T&&i(d.prototype,T),C&&i(d,C),d}}(),P=function i(d,T,C){null===d&&(d=Function.prototype);var x=Object.getOwnPropertyDescriptor(d,T);if(void 0===x){var M=Object.getPrototypeOf(d);return null===M?void 0:i(M,T,C)}if("value"in x)return x.value;var b=x.get;return void 0===b?void 0:b.call(C)},w=r(v(0)),e=r(v(4)),n=r(v(25));function r(i){return i&&i.__esModule?i:{default:i}}function l(i,d){if(!(i instanceof d))throw new TypeError("Cannot call a class as a function")}function s(i,d){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!=typeof d&&"function"!=typeof d?i:d}function a(i,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);i.prototype=Object.create(d&&d.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(i,d):i.__proto__=d)}var o=function(i){function d(){return l(this,d),s(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return a(d,i),B(d,[{key:"format",value:function(C,x){C!==h.blotName||x?P(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"format",this).call(this,C,x):this.replaceWith(w.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():P(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(C,x){return this.parent.isolate(this.offset(this.parent),this.length()),C===this.parent.statics.blotName?(this.parent.replaceWith(C,x),this):(this.parent.unwrap(),P(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"replaceWith",this).call(this,C,x))}}],[{key:"formats",value:function(C){return C.tagName===this.tagName?void 0:P(d.__proto__||Object.getPrototypeOf(d),"formats",this).call(this,C)}}]),d}(e.default);o.blotName="list-item",o.tagName="LI";var h=function(i){function d(T){l(this,d);var C=s(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,T)),x=function(b){if(b.target.parentNode===T){var g=C.statics.formats(T),_=w.default.find(b.target);"checked"===g?_.format("list","unchecked"):"unchecked"===g&&_.format("list","checked")}};return T.addEventListener("touchstart",x),T.addEventListener("mousedown",x),C}return a(d,i),B(d,null,[{key:"create",value:function(C){var x="ordered"===C?"OL":"UL",M=P(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this,x);return("checked"===C||"unchecked"===C)&&M.setAttribute("data-checked","checked"===C),M}},{key:"formats",value:function(C){return"OL"===C.tagName?"ordered":"UL"===C.tagName?C.hasAttribute("data-checked")?"true"===C.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),B(d,[{key:"format",value:function(C,x){this.children.length>0&&this.children.tail.format(C,x)}},{key:"formats",value:function(){return function(i,d,T){return d in i?Object.defineProperty(i,d,{value:T,enumerable:!0,configurable:!0,writable:!0}):i[d]=T,i}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(C,x){if(C instanceof o)P(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"insertBefore",this).call(this,C,x);else{var M=null==x?this.length():x.offset(this),b=this.split(M);b.parent.insertBefore(C,b)}}},{key:"optimize",value:function(C){P(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"optimize",this).call(this,C);var x=this.next;null!=x&&x.prev===this&&x.statics.blotName===this.statics.blotName&&x.domNode.tagName===this.domNode.tagName&&x.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(x.moveChildren(this),x.remove())}},{key:"replace",value:function(C){if(C.statics.blotName!==this.statics.blotName){var x=w.default.create(this.statics.defaultChild);C.moveChildren(x),this.appendChild(x)}P(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"replace",this).call(this,C)}}]),d}(n.default);h.blotName="list",h.scope=w.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[o],y.ListItem=o,y.default=h},function(z,y,v){"use strict";function w(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function m(n,r){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?n:r}Object.defineProperty(y,"__esModule",{value:!0});var n,c=function(n){function r(){return w(this,r),m(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r)}(r,n),r}((n=v(56),n&&n.__esModule?n:{default:n}).default);c.blotName="italic",c.tagName=["EM","I"],y.default=c},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var B=function(){function f(l,s){for(var a=0;a<s.length;a++){var o=s[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(l,o.key,o)}}return function(l,s,a){return s&&f(l.prototype,s),a&&f(l,a),l}}(),P=function f(l,s,a){null===l&&(l=Function.prototype);var o=Object.getOwnPropertyDescriptor(l,s);if(void 0===o){var h=Object.getPrototypeOf(l);return null===h?void 0:f(h,s,a)}if("value"in o)return o.value;var i=o.get;return void 0===i?void 0:i.call(a)};function e(f,l){if(!(f instanceof l))throw new TypeError("Cannot call a class as a function")}function c(f,l){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=typeof l&&"function"!=typeof l?f:l}var f,r=function(f){function l(){return e(this,l),c(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return function(f,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+typeof l);f.prototype=Object.create(l&&l.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(f,l):f.__proto__=l)}(l,f),B(l,null,[{key:"create",value:function(a){return"super"===a?document.createElement("sup"):"sub"===a?document.createElement("sub"):P(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,a)}},{key:"formats",value:function(a){return"SUB"===a.tagName?"sub":"SUP"===a.tagName?"super":void 0}}]),l}((f=v(6),f&&f.__esModule?f:{default:f}).default);r.blotName="script",r.tagName=["SUB","SUP"],y.default=r},function(z,y,v){"use strict";function w(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function m(n,r){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?n:r}Object.defineProperty(y,"__esModule",{value:!0});var n,c=function(n){function r(){return w(this,r),m(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r)}(r,n),r}((n=v(6),n&&n.__esModule?n:{default:n}).default);c.blotName="strike",c.tagName="S",y.default=c},function(z,y,v){"use strict";function w(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function m(n,r){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?n:r}Object.defineProperty(y,"__esModule",{value:!0});var n,c=function(n){function r(){return w(this,r),m(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r)}(r,n),r}((n=v(6),n&&n.__esModule?n:{default:n}).default);c.blotName="underline",c.tagName="U",y.default=c},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var s,B=function(){function s(a,o){for(var h=0;h<o.length;h++){var i=o[h];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,o,h){return o&&s(a.prototype,o),h&&s(a,h),a}}(),P=function s(a,o,h){null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(void 0===i){var d=Object.getPrototypeOf(a);return null===d?void 0:s(d,o,h)}if("value"in i)return i.value;var T=i.get;return void 0===T?void 0:T.call(h)},w=(s=v(0))&&s.__esModule?s:{default:s},m=v(27);function c(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function n(s,a){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?s:a}var f=["alt","height","width"],l=function(s){function a(){return c(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(s,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(s,a):s.__proto__=a)}(a,s),B(a,[{key:"format",value:function(h,i){f.indexOf(h)>-1?i?this.domNode.setAttribute(h,i):this.domNode.removeAttribute(h):P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,h,i)}}],[{key:"create",value:function(h){var i=P(a.__proto__||Object.getPrototypeOf(a),"create",this).call(this,h);return"string"==typeof h&&i.setAttribute("src",this.sanitize(h)),i}},{key:"formats",value:function(h){return f.reduce(function(i,d){return h.hasAttribute(d)&&(i[d]=h.getAttribute(d)),i},{})}},{key:"match",value:function(h){return/\.(jpe?g|gif|png)$/.test(h)||/^data:image\/.+;base64/.test(h)}},{key:"sanitize",value:function(h){return(0,m.sanitize)(h,["http","https","data"])?h:"//:0"}},{key:"value",value:function(h){return h.getAttribute("src")}}]),a}(w.default.Embed);l.blotName="image",l.tagName="IMG",y.default=l},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var s,B=function(){function s(a,o){for(var h=0;h<o.length;h++){var i=o[h];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}return function(a,o,h){return o&&s(a.prototype,o),h&&s(a,h),a}}(),P=function s(a,o,h){null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(void 0===i){var d=Object.getPrototypeOf(a);return null===d?void 0:s(d,o,h)}if("value"in i)return i.value;var T=i.get;return void 0===T?void 0:T.call(h)},O=v(4),m=(s=v(27))&&s.__esModule?s:{default:s};function c(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function n(s,a){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?s:a}var f=["height","width"],l=function(s){function a(){return c(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(s,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(s,a):s.__proto__=a)}(a,s),B(a,[{key:"format",value:function(h,i){f.indexOf(h)>-1?i?this.domNode.setAttribute(h,i):this.domNode.removeAttribute(h):P(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"format",this).call(this,h,i)}}],[{key:"create",value:function(h){var i=P(a.__proto__||Object.getPrototypeOf(a),"create",this).call(this,h);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(h)),i}},{key:"formats",value:function(h){return f.reduce(function(i,d){return h.hasAttribute(d)&&(i[d]=h.getAttribute(d)),i},{})}},{key:"sanitize",value:function(h){return m.default.sanitize(h)}},{key:"value",value:function(h){return h.getAttribute("src")}}]),a}(O.BlockEmbed);l.blotName="video",l.className="ql-video",l.tagName="IFRAME",y.default=l},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.FormulaBlot=void 0;var B=function(){function h(i,d){for(var T=0;T<d.length;T++){var C=d[T];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(i,C.key,C)}}return function(i,d,T){return d&&h(i.prototype,d),T&&h(i,T),i}}(),P=function h(i,d,T){null===i&&(i=Function.prototype);var C=Object.getOwnPropertyDescriptor(i,d);if(void 0===C){var x=Object.getPrototypeOf(i);return null===x?void 0:h(x,d,T)}if("value"in C)return C.value;var M=C.get;return void 0===M?void 0:M.call(T)},w=r(v(35)),e=r(v(5)),n=r(v(9));function r(h){return h&&h.__esModule?h:{default:h}}function f(h,i){if(!(h instanceof i))throw new TypeError("Cannot call a class as a function")}function l(h,i){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?h:i}function s(h,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);h.prototype=Object.create(i&&i.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(h,i):h.__proto__=i)}var a=function(h){function i(){return f(this,i),l(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return s(i,h),B(i,null,[{key:"create",value:function(T){var C=P(i.__proto__||Object.getPrototypeOf(i),"create",this).call(this,T);return"string"==typeof T&&(window.katex.render(T,C,{throwOnError:!1,errorColor:"#f00"}),C.setAttribute("data-value",T)),C}},{key:"value",value:function(T){return T.getAttribute("data-value")}}]),i}(w.default);a.blotName="formula",a.className="ql-formula",a.tagName="SPAN";var o=function(h){function i(){f(this,i);var d=l(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return d}return s(i,h),B(i,null,[{key:"register",value:function(){e.default.register(a,!0)}}]),i}(n.default);y.FormulaBlot=a,y.default=o},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.CodeToken=y.CodeBlock=void 0;var B=function(){function T(C,x){for(var M=0;M<x.length;M++){var b=x[M];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(C,b.key,b)}}return function(C,x,M){return x&&T(C.prototype,x),M&&T(C,M),C}}(),P=function T(C,x,M){null===C&&(C=Function.prototype);var b=Object.getOwnPropertyDescriptor(C,x);if(void 0===b){var g=Object.getPrototypeOf(C);return null===g?void 0:T(g,x,M)}if("value"in b)return b.value;var _=b.get;return void 0===_?void 0:_.call(M)},w=l(v(0)),e=l(v(5)),n=l(v(9));function l(T){return T&&T.__esModule?T:{default:T}}function s(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function a(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}function o(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}var h=function(T){function C(){return s(this,C),a(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return o(C,T),B(C,[{key:"replaceWith",value:function(M){this.domNode.textContent=this.domNode.textContent,this.attach(),P(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,M)}},{key:"highlight",value:function(M){var b=this.domNode.textContent;this.cachedText!==b&&((b.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=M(b),this.domNode.normalize(),this.attach()),this.cachedText=b)}}]),C}(l(v(13)).default);h.className="ql-syntax";var i=new w.default.Attributor.Class("token","hljs",{scope:w.default.Scope.INLINE}),d=function(T){function C(x,M){s(this,C);var b=a(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,x,M));if("function"!=typeof b.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var g=null;return b.quill.on(e.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(g),g=setTimeout(function(){b.highlight(),g=null},b.options.interval)}),b.highlight(),b}return o(C,T),B(C,null,[{key:"register",value:function(){e.default.register(i,!0),e.default.register(h,!0)}}]),B(C,[{key:"highlight",value:function(){var M=this;if(!this.quill.selection.composing){this.quill.update(e.default.sources.USER);var b=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(g){g.highlight(M.options.highlight)}),this.quill.update(e.default.sources.SILENT),null!=b&&this.quill.setSelection(b,e.default.sources.SILENT)}}}]),C}(n.default);d.DEFAULTS={highlight:null==window.hljs?null:function(T){return window.hljs.highlightAuto(T).value},interval:1e3},y.CodeBlock=h,y.CodeToken=i,y.default=d},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(z,y){z.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(z,y){z.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(z,y){z.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(z,y){z.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(z,y){z.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(z,y,v){"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.default=y.BubbleTooltip=void 0;var B=function C(x,M,b){null===x&&(x=Function.prototype);var g=Object.getOwnPropertyDescriptor(x,M);if(void 0===g){var _=Object.getPrototypeOf(x);return null===_?void 0:C(_,M,b)}if("value"in g)return g.value;var A=g.get;return void 0===A?void 0:A.call(b)},P=function(){function C(x,M){for(var b=0;b<M.length;b++){var g=M[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(x,g.key,g)}}return function(x,M,b){return M&&C(x.prototype,M),b&&C(x,b),x}}(),w=s(v(3)),e=s(v(8)),c=v(43),n=s(c),r=v(15),l=s(v(41));function s(C){return C&&C.__esModule?C:{default:C}}function a(C,x){if(!(C instanceof x))throw new TypeError("Cannot call a class as a function")}function o(C,x){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?C:x}function h(C,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);C.prototype=Object.create(x&&x.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(C,x):C.__proto__=x)}var i=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],d=function(C){function x(M,b){a(this,x),null!=b.modules.toolbar&&null==b.modules.toolbar.container&&(b.modules.toolbar.container=i);var g=o(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,M,b));return g.quill.container.classList.add("ql-bubble"),g}return h(x,C),P(x,[{key:"extendToolbar",value:function(b){this.tooltip=new T(this.quill,this.options.bounds),this.tooltip.root.appendChild(b.container),this.buildButtons([].slice.call(b.container.querySelectorAll("button")),l.default),this.buildPickers([].slice.call(b.container.querySelectorAll("select")),l.default)}}]),x}(n.default);d.DEFAULTS=(0,w.default)(!0,{},n.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(x){x?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var T=function(C){function x(M,b){a(this,x);var g=o(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,M,b));return g.quill.on(e.default.events.EDITOR_CHANGE,function(_,A,k,H){if(_===e.default.events.SELECTION_CHANGE)if(null!=A&&A.length>0&&H===e.default.sources.USER){g.show(),g.root.style.left="0px",g.root.style.width="",g.root.style.width=g.root.offsetWidth+"px";var U=g.quill.getLines(A.index,A.length);if(1===U.length)g.position(g.quill.getBounds(A));else{var J=U[U.length-1],ee=g.quill.getIndex(J),F=Math.min(J.length()-1,A.index+A.length-ee),D=g.quill.getBounds(new r.Range(ee,F));g.position(D)}}else document.activeElement!==g.textbox&&g.quill.hasFocus()&&g.hide()}),g}return h(x,C),P(x,[{key:"listen",value:function(){var b=this;B(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){b.root.classList.remove("ql-editing")}),this.quill.on(e.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!b.root.classList.contains("ql-hidden")){var g=b.quill.getSelection();null!=g&&b.position(b.quill.getBounds(g))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(b){var g=B(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"position",this).call(this,b),_=this.root.querySelector(".ql-tooltip-arrow");if(_.style.marginLeft="",0===g)return g;_.style.marginLeft=-1*g-_.offsetWidth/2+"px"}}]),x}(c.BaseTooltip);T.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),y.BubbleTooltip=T,y.default=d},function(z,y,v){z.exports=v(63)}]).default}}]);