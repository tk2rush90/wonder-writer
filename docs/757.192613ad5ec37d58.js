"use strict";(self.webpackChunkwonder_writer=self.webpackChunkwonder_writer||[]).push([[757],{1757:(H,d,i)=>{i.r(d),i.d(d,{ProjectSettingsModule:()=>Y});var u=i(9808),g=i(9426),p=i(9270),h=i(7566),C=i(8397),_=i(91);let x=(()=>{class n{static get fontOptions(){return this.availableFonts.map(e=>new _.B(e,e))}}return n.availableFonts=["NotoSans","NotoSerif","NanumGothic","NanumMyeongjo"],n})();var M=i(496),P=i(2076),S=i(8746),O=i(7489),j=i(8543),m=i(6267),b=i(8389),t=i(1223),a=i(2382);let v=(()=>{class n extends j.I{constructor(e,o,s,r){super(e,o),this.ngControl=e,this.changeDetectorRef=o,this.elementRef=s,this.eventListenerService=r,this.min=0,this.max=0,this._value=0,this._percent=0,this._onWindowMouseMove=l=>{this._calculateValueByPosition(l)},this._onWindowMouseUp=()=>{this.eventListenerService.removeEvent(window,"mousemove",this._onWindowMouseMove),this.eventListenerService.removeEvent(window,"mouseup",this._onWindowMouseUp),this.eventListenerService.removeEvent(window,"touchmove",this._onWindowMouseMove),this.eventListenerService.removeEvent(window,"touchend",this._onWindowMouseUp)}}get percent(){return`${this._percent}%`}get element(){return this.elementRef.nativeElement}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}onButtonMouseDown(e){this._calculateValueByPosition(e),this._addWindowEvents()}writeValue(e){this._value=e,this._calculatePositionByValue()}_addWindowEvents(){this.eventListenerService.addEvent(window,"mousemove",this._onWindowMouseMove),this.eventListenerService.addEvent(window,"mouseup",this._onWindowMouseUp),this.eventListenerService.addEvent(window,"touchmove",this._onWindowMouseMove),this.eventListenerService.addEvent(window,"touchend",this._onWindowMouseUp)}_calculatePositionByValue(){this._percent=(this._value-this.min)/(this.max-this.min)*100}_calculateValueByPosition(e){const o=this.element.getBoundingClientRect(),{x:s}=b.F$.getMouseOrTouchXY(e);let r=Math.round((s-o.x)/o.width*(this.max-this.min)+this.min);r<this.min&&(r=this.min),r>this.max&&(r=this.max),this.setValue(r)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.a5,10),t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(m.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-range-slider"]],inputs:{min:"min",max:"max"},features:[t._Bn([m.F]),t.qOj],decls:3,vars:4,consts:[[1,"tk-slide-track",3,"mousedown","touchstart"],[1,"tk-slide-thumb"],[1,"tk-slide-button"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.NdJ("mousedown",function(r){return o.onButtonMouseDown(r)})("touchstart",function(r){return o.onButtonMouseDown(r)}),t._UZ(1,"div",1),t._UZ(2,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Udp("width",o.percent),t.xp6(1),t.Udp("left",o.percent))},styles:["[_nghost-%COMP%]{position:relative;display:block;-webkit-user-select:none;user-select:none;cursor:pointer}.tk-slide-track[_ngcontent-%COMP%]{width:100%;height:4px;position:relative;top:50%;left:0;margin-top:-2px;background-color:#fff;border-radius:2px}.tk-slide-thumb[_ngcontent-%COMP%]{position:absolute;height:100%;background-color:#6f86c5;left:0;border-radius:2px}.tk-slide-button[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;position:absolute;top:50%;margin-top:-10px;margin-left:-10px;background-color:#6f86c5}.ww-light-theme   [_nghost-%COMP%]   .tk-slide-track[_ngcontent-%COMP%]{background-color:#8b8b8b}"]}),n})();var w=i(4377),y=i(3557),B=i(8718),Z=i(1407),T=i(7458),F=i(9125),A=i(3848);function k(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(2).onThemeChange(r.value)}),t.qZA()}if(2&n){const e=c.$implicit,o=t.oxw(2);t.Udp("background-color",e.color),t.ekj("ww-selected",e.value===o.settings.theme)}}function W(n,c){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t._uU(3," \ubcf8\ubb38 \ud3f0\ud2b8 "),t.qZA(),t.TgZ(4,"app-select",5),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().settings.contentFont=s}),t.qZA(),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t._uU(7," \ubcf8\ubb38 \ub113\uc774 "),t.qZA(),t.TgZ(8,"div",6),t.TgZ(9,"app-range-slider",7),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().settings.contentWidth=s}),t.qZA(),t.TgZ(10,"input",8),t.NdJ("blur",function(){return t.CHM(e),t.oxw().onInputConfirm()})("focus",function(){return t.CHM(e),t.oxw().onInputFocus()})("keydown.enter",function(){return t.CHM(e),t.oxw().onInputConfirm()})("ngModelChange",function(s){return t.CHM(e),t.oxw().onContentWidthChange(s)}),t.qZA(),t.TgZ(11,"span",9),t._uU(12," px "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",3),t.TgZ(14,"div",4),t._uU(15," \ud504\ub85c\uc81d\ud2b8 \ud14c\ub9c8 "),t.qZA(),t.TgZ(16,"div",6),t.YNc(17,k,1,4,"div",10),t.qZA(),t.qZA(),t.TgZ(18,"div",11),t.TgZ(19,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveChanges()}),t._uU(20," \ubcc0\uacbd \uc800\uc7a5 "),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.settings.contentFont)("options",e.fonts),t.xp6(5),t.Q6J("ngModel",e.settings.contentWidth)("max",e.maxWidth)("min",e.minWidth),t.xp6(1),t.Q6J("ngModel",e.settings.contentWidth),t.xp6(7),t.Q6J("ngForOf",e.themes)}}const V=[{path:"",component:(()=>{class n extends C.D{constructor(e,o,s,r,l,f,z,E){super(e,o,s,r,l,f),this.activatedRoute=e,this.toastService=o,this.loadingCoverService=s,this.projectSettingsService=r,this.projectSettingsStoreService=l,this.subscriptionService=f,this.router=z,this.headerService=E,this.themes=[{value:"dark",color:"#313335"},{value:"white",color:"#FFFFFF"}],this.fonts=x.fontOptions,this.minWidth=300,this.maxWidth=700}ngOnInit(){super.ngOnInit(),this._showHeaderActions(),this._subscribeBackClick(),this._subscribeActivatedRouteParamMap()}onInputFocus(){this._tempValue=this.settings.contentWidth}onInputConfirm(){var e,o;this._tempValue=this._tempValue,this._tempValue<this.minWidth&&(this._tempValue=this.minWidth),this._tempValue>this.maxWidth&&(this._tempValue=this.maxWidth),this.settings.contentWidth===this._tempValue?(null===(e=this.rangeSlider)||void 0===e||e.writeValue(this._tempValue),null===(o=this.input)||void 0===o||o.writeValue(this._tempValue)):this.settings.contentWidth=this._tempValue}onContentWidthChange(e){this._tempValue=M.i.toInteger(e)}onThemeChange(e){this.settings.theme=e}saveChanges(){this._saveProjectSettings()}_showHeaderActions(){this.headerService.showBack=!0,this.headerService.showMenu=!1,this.headerService.actions=[]}_subscribeBackClick(){const e=this.headerService.subscribeBackClick(()=>{this._navigateToProject()});this.subscriptionService.store("_subscribeBackClick",e)}_navigateToProject(){this.router.navigate(["/writer/project",this._projectId]).catch(e=>{console.error(e),this.toastService.open({message:"\ud398\uc774\uc9c0\ub97c \uc774\ub3d9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",type:h.p.error})})}_saveProjectSettings(){const e=this.projectSettingsStoreService.updateProjectSettings(this.settings),o=(0,P.D)(e).pipe((0,S.x)(()=>this.loadingCoverService.showLoading=!1)).subscribe({next:()=>{this.projectSettingsService.settings=(0,O.cloneDeep)(this.settings),this.toastService.open({message:"\ubcc0\uacbd \uc0ac\ud56d\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4"})},error:s=>{console.error(s),this.toastService.open({message:"\ubcc0\uacbd \uc0ac\ud56d\uc744 \uc800\uc7a5\ud558\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4",type:h.p.error})}});this.subscriptionService.store("_saveProjectSettings",o),this.loadingCoverService.showLoading=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz),t.Y36(h.k),t.Y36(y.x),t.Y36(B.Z),t.Y36(Z.e),t.Y36(p.F),t.Y36(g.F0),t.Y36(T.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-project-settings"]],viewQuery:function(e,o){if(1&e&&(t.Gf(v,5),t.Gf(w.V,5)),2&e){let s;t.iGM(s=t.CRH())&&(o.rangeSlider=s.first),t.iGM(s=t.CRH())&&(o.input=s.first)}},features:[t._Bn([p.F]),t.qOj],decls:4,vars:1,consts:[[1,"ww-content"],[1,"ww-flex","ww-header"],[4,"ngIf"],[1,"ww-flex-space","ww-setting"],[1,"ww-label"],[3,"ngModel","options","ngModelChange"],[1,"ww-flex"],[3,"ngModel","max","min","ngModelChange"],["appInput","","type","number",3,"ngModel","blur","focus","keydown.enter","ngModelChange"],[1,"ww-unit"],["class","ww-theme",3,"ww-selected","background-color","click",4,"ngFor","ngForOf"],[1,"ww-button"],["appFlatButton","",3,"click"],[1,"ww-theme",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2," \ud504\ub85c\uc81d\ud2b8 \uc124\uc815 "),t.qZA(),t.YNc(3,W,21,7,"ng-container",2),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.settings))},directives:[u.O5,F.H,a.JJ,a.On,v,w.V,a.wV,a.Fj,u.sg,A.z],styles:['[_nghost-%COMP%]{width:100%;height:100%;display:block}.ww-content[_ngcontent-%COMP%]{box-sizing:border-box;padding:30px 0;width:calc(100% - 20px);max-width:750px;height:100%;overflow:auto;margin:0 auto}.ww-flex[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.ww-flex[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-header[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:20px;font-weight:400;height:50px;color:#fff}.ww-flex-space[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.ww-flex-space[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}.ww-setting[_ngcontent-%COMP%]{height:40px;margin-top:15px}.ww-label[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:400;color:#fff}app-select[_ngcontent-%COMP%]{width:150px}app-select[_ngcontent-%COMP%]     .tk-option:nth-of-type(1) .tk-option-label{font-family:Noto Sans KR,sans-serif}app-select[_ngcontent-%COMP%]     .tk-option:nth-of-type(2) .tk-option-label{font-family:"Noto Serif KR",serif}app-select[_ngcontent-%COMP%]     .tk-option:nth-of-type(3) .tk-option-label{font-family:Nanum Gothic,sans-serif}app-select[_ngcontent-%COMP%]     .tk-option:nth-of-type(4) .tk-option-label{font-family:Nanum Myeongjo,serif}app-range-slider[_ngcontent-%COMP%]{width:150px;height:40px}@media screen and (max-width: 425px){app-range-slider[_ngcontent-%COMP%]{width:100px}}input[_ngcontent-%COMP%]{width:70px;text-align:center;margin-left:15px}.ww-unit[_ngcontent-%COMP%]{font-family:Noto Sans KR,sans-serif;font-size:14px;font-weight:400;margin-left:10px;color:#fff;text-align:right}.ww-theme[_ngcontent-%COMP%]{width:35px;height:35px;box-sizing:border-box;border:1px solid #8B8B8B;border-radius:5px;cursor:pointer;-webkit-user-select:none;user-select:none}.ww-theme.ww-selected[_ngcontent-%COMP%]{box-sizing:border-box;border:3px solid #6F86C5}.ww-theme[_ngcontent-%COMP%] + .ww-theme[_ngcontent-%COMP%]{margin-left:10px}.ww-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;margin-top:30px}.ww-button[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto}button[_ngcontent-%COMP%]{width:130px}.ww-light-theme   [_nghost-%COMP%]   .ww-header[_ngcontent-%COMP%]{color:#4e91d5}.ww-light-theme   [_nghost-%COMP%]   .ww-label[_ngcontent-%COMP%], .ww-light-theme   [_nghost-%COMP%]   .ww-unit[_ngcontent-%COMP%]{color:#313335}']}),n})()}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(V)],g.Bz]}),n})();var N=i(9616),U=i(7971);let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez]]}),n})();var I=i(4825),J=i(4566);let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,R,N.A,U.l,a.u5,D,I.g,J.n]]}),n})()}}]);